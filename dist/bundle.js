var x0=Object.create;var Xl=Object.defineProperty;var T0=Object.getOwnPropertyDescriptor;var _0=Object.getOwnPropertyNames;var S0=Object.getPrototypeOf,w0=Object.prototype.hasOwnProperty;var Ao=(t,e)=>()=>(t&&(e=t(t=0)),e);var Mn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Gs=(t,e)=>{for(var n in e)Xl(t,n,{get:e[n],enumerable:!0})},k0=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _0(e))!w0.call(t,i)&&i!==n&&Xl(t,i,{get:()=>e[i],enumerable:!(r=T0(e,i))||r.enumerable});return t};var P=(t,e,n)=>(n=t!=null?x0(S0(t)):{},k0(e||!t||!t.__esModule?Xl(n,"default",{value:t,enumerable:!0}):n,t));var qf=Mn(ce=>{"use strict";var No=Symbol.for("react.element"),E0=Symbol.for("react.portal"),A0=Symbol.for("react.fragment"),N0=Symbol.for("react.strict_mode"),I0=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),P0=Symbol.for("react.context"),M0=Symbol.for("react.forward_ref"),R0=Symbol.for("react.suspense"),D0=Symbol.for("react.memo"),L0=Symbol.for("react.lazy"),Df=Symbol.iterator;function F0(t){return t===null||typeof t!="object"?null:(t=Df&&t[Df]||t["@@iterator"],typeof t=="function"?t:null)}var Uf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vf=Object.assign,$f={};function yi(t,e,n){this.props=t,this.context=e,this.refs=$f,this.updater=n||Uf}yi.prototype.isReactComponent={};yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gf(){}Gf.prototype=yi.prototype;function eu(t,e,n){this.props=t,this.context=e,this.refs=$f,this.updater=n||Uf}var tu=eu.prototype=new Gf;tu.constructor=eu;Vf(tu,yi.prototype);tu.isPureReactComponent=!0;var Lf=Array.isArray,Bf=Object.prototype.hasOwnProperty,nu={current:null},Of={key:!0,ref:!0,__self:!0,__source:!0};function Hf(t,e,n){var r,i={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Bf.call(e,r)&&!Of.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:No,type:t,key:o,ref:l,props:i,_owner:nu.current}}function U0(t,e){return{$$typeof:No,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ru(t){return typeof t=="object"&&t!==null&&t.$$typeof===No}function V0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ff=/\/+/g;function jl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V0(""+t.key):e.toString(36)}function Os(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case No:case E0:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+jl(l,0):r,Lf(i)?(n="",t!=null&&(n=t.replace(Ff,"$&/")+"/"),Os(i,e,n,"",function(d){return d})):i!=null&&(ru(i)&&(i=U0(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Ff,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Lf(t))for(var u=0;u<t.length;u++){o=t[u];var c=r+jl(o,u);l+=Os(o,e,n,c,i)}else if(c=F0(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=r+jl(o,u++),l+=Os(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Bs(t,e,n){if(t==null)return t;var r=[],i=0;return Os(t,r,"","",function(o){return e.call(n,o,i++)}),r}function $0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},Hs={transition:null},G0={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:nu};function zf(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Bs,forEach:function(t,e,n){Bs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bs(t,function(){e++}),e},toArray:function(t){return Bs(t,function(e){return e})||[]},only:function(t){if(!ru(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=yi;ce.Fragment=A0;ce.Profiler=I0;ce.PureComponent=eu;ce.StrictMode=N0;ce.Suspense=R0;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G0;ce.act=zf;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vf({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=nu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Bf.call(e,c)&&!Of.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:No,type:t.type,key:i,ref:o,props:r,_owner:l}};ce.createContext=function(t){return t={$$typeof:P0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b0,_context:t},t.Consumer=t};ce.createElement=Hf;ce.createFactory=function(t){var e=Hf.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:M0,render:t}};ce.isValidElement=ru;ce.lazy=function(t){return{$$typeof:L0,_payload:{_status:-1,_result:t},_init:$0}};ce.memo=function(t,e){return{$$typeof:D0,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Hs.transition;Hs.transition={};try{t()}finally{Hs.transition=e}};ce.unstable_act=zf;ce.useCallback=function(t,e){return Ct.current.useCallback(t,e)};ce.useContext=function(t){return Ct.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Ct.current.useEffect(t,e)};ce.useId=function(){return Ct.current.useId()};ce.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Ct.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};ce.useRef=function(t){return Ct.current.useRef(t)};ce.useState=function(t){return Ct.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Ct.current.useTransition()};ce.version="18.3.1"});var Ce=Mn((FP,Kf)=>{"use strict";Kf.exports=qf()});var nm=Mn(Ie=>{"use strict";function au(t,e){var n=t.length;t.push(e);e:for(;0<n;){var r=n-1>>>1,i=t[r];if(0<zs(i,e))t[r]=e,t[n]=i,n=r;else break e}}function rn(t){return t.length===0?null:t[0]}function Ks(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var r=0,i=t.length,o=i>>>1;r<o;){var l=2*(r+1)-1,u=t[l],c=l+1,d=t[c];if(0>zs(u,n))c<i&&0>zs(d,u)?(t[r]=d,t[c]=n,r=c):(t[r]=u,t[l]=n,r=l);else if(c<i&&0>zs(d,n))t[r]=d,t[c]=n,r=c;else break e}}return e}function zs(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(Jf=performance,Ie.unstable_now=function(){return Jf.now()}):(iu=Date,Wf=iu.now(),Ie.unstable_now=function(){return iu.now()-Wf});var Jf,iu,Wf,hn=[],nr=[],B0=1,Bt=null,ft=3,Js=!1,Mr=!1,bo=!1,Zf=typeof setTimeout=="function"?setTimeout:null,Xf=typeof clearTimeout=="function"?clearTimeout:null,Yf=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function lu(t){for(var e=rn(nr);e!==null;){if(e.callback===null)Ks(nr);else if(e.startTime<=t)Ks(nr),e.sortIndex=e.expirationTime,au(hn,e);else break;e=rn(nr)}}function uu(t){if(bo=!1,lu(t),!Mr)if(rn(hn)!==null)Mr=!0,du(cu);else{var e=rn(nr);e!==null&&fu(uu,e.startTime-t)}}function cu(t,e){Mr=!1,bo&&(bo=!1,Xf(Po),Po=-1),Js=!0;var n=ft;try{for(lu(e),Bt=rn(hn);Bt!==null&&(!(Bt.expirationTime>e)||t&&!tm());){var r=Bt.callback;if(typeof r=="function"){Bt.callback=null,ft=Bt.priorityLevel;var i=r(Bt.expirationTime<=e);e=Ie.unstable_now(),typeof i=="function"?Bt.callback=i:Bt===rn(hn)&&Ks(hn),lu(e)}else Ks(hn);Bt=rn(hn)}if(Bt!==null)var o=!0;else{var l=rn(nr);l!==null&&fu(uu,l.startTime-e),o=!1}return o}finally{Bt=null,ft=n,Js=!1}}var Ws=!1,qs=null,Po=-1,jf=5,em=-1;function tm(){return!(Ie.unstable_now()-em<jf)}function ou(){if(qs!==null){var t=Ie.unstable_now();em=t;var e=!0;try{e=qs(!0,t)}finally{e?Io():(Ws=!1,qs=null)}}else Ws=!1}var Io;typeof Yf=="function"?Io=function(){Yf(ou)}:typeof MessageChannel<"u"?(su=new MessageChannel,Qf=su.port2,su.port1.onmessage=ou,Io=function(){Qf.postMessage(null)}):Io=function(){Zf(ou,0)};var su,Qf;function du(t){qs=t,Ws||(Ws=!0,Io())}function fu(t,e){Po=Zf(function(){t(Ie.unstable_now())},e)}Ie.unstable_IdlePriority=5;Ie.unstable_ImmediatePriority=1;Ie.unstable_LowPriority=4;Ie.unstable_NormalPriority=3;Ie.unstable_Profiling=null;Ie.unstable_UserBlockingPriority=2;Ie.unstable_cancelCallback=function(t){t.callback=null};Ie.unstable_continueExecution=function(){Mr||Js||(Mr=!0,du(cu))};Ie.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jf=0<t?Math.floor(1e3/t):5};Ie.unstable_getCurrentPriorityLevel=function(){return ft};Ie.unstable_getFirstCallbackNode=function(){return rn(hn)};Ie.unstable_next=function(t){switch(ft){case 1:case 2:case 3:var e=3;break;default:e=ft}var n=ft;ft=e;try{return t()}finally{ft=n}};Ie.unstable_pauseExecution=function(){};Ie.unstable_requestPaint=function(){};Ie.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=ft;ft=t;try{return e()}finally{ft=n}};Ie.unstable_scheduleCallback=function(t,e,n){var r=Ie.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=n+i,t={id:B0++,callback:e,priorityLevel:t,startTime:n,expirationTime:i,sortIndex:-1},n>r?(t.sortIndex=n,au(nr,t),rn(hn)===null&&t===rn(nr)&&(bo?(Xf(Po),Po=-1):bo=!0,fu(uu,n-r))):(t.sortIndex=i,au(hn,t),Mr||Js||(Mr=!0,du(cu))),t};Ie.unstable_shouldYield=tm;Ie.unstable_wrapCallback=function(t){var e=ft;return function(){var n=ft;ft=e;try{return t.apply(this,arguments)}finally{ft=n}}}});var im=Mn((VP,rm)=>{"use strict";rm.exports=nm()});var lg=Mn(Ut=>{"use strict";var O0=Ce(),Lt=im();function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dp=new Set,jo={};function qr(t,e){Vi(t,e),Vi(t+"Capture",e)}function Vi(t,e){for(jo[t]=e,t=0;t<e.length;t++)dp.add(e[t])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,H0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,om={},sm={};function z0(t){return Lu.call(sm,t)?!0:Lu.call(om,t)?!1:H0.test(t)?sm[t]=!0:(om[t]=!0,!1)}function q0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K0(t,e,n,r){if(e===null||typeof e>"u"||q0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(t,e,n,r,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new _t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new _t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new _t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new _t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new _t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new _t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new _t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new _t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new _t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ac=/[\-:]([a-z])/g;function Nc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ac,Nc);ct[e]=new _t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ac,Nc);ct[e]=new _t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ac,Nc);ct[e]=new _t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new _t(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new _t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ic(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(K0(e,n,i,r)&&(n=null),r||i===null?z0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var On=O0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ys=Symbol.for("react.element"),xi=Symbol.for("react.portal"),Ti=Symbol.for("react.fragment"),bc=Symbol.for("react.strict_mode"),Fu=Symbol.for("react.profiler"),fp=Symbol.for("react.provider"),mp=Symbol.for("react.context"),Pc=Symbol.for("react.forward_ref"),Uu=Symbol.for("react.suspense"),Vu=Symbol.for("react.suspense_list"),Mc=Symbol.for("react.memo"),ir=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var pp=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var am=Symbol.iterator;function Mo(t){return t===null||typeof t!="object"?null:(t=am&&t[am]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,mu;function Go(t){if(mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mu=e&&e[1]||""}return`
`+mu+t}var pu=!1;function hu(t,e){if(!t||pu)return"";pu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,u=o.length-1;1<=l&&0<=u&&i[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==o[u]){var c=`
`+i[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=u);break}}}finally{pu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Go(t):""}function J0(t){switch(t.tag){case 5:return Go(t.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return t=hu(t.type,!1),t;case 11:return t=hu(t.type.render,!1),t;case 1:return t=hu(t.type,!0),t;default:return""}}function $u(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ti:return"Fragment";case xi:return"Portal";case Fu:return"Profiler";case bc:return"StrictMode";case Uu:return"Suspense";case Vu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mp:return(t.displayName||"Context")+".Consumer";case fp:return(t._context.displayName||"Context")+".Provider";case Pc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mc:return e=t.displayName||null,e!==null?e:$u(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return $u(t(e))}catch{}}return null}function W0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $u(e);case 8:return e===bc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Y0(t){var e=hp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qs(t){t._valueTracker||(t._valueTracker=Y0(t))}function gp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gu(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yp(t,e){e=e.checked,e!=null&&Ic(t,"checked",e,!1)}function Bu(t,e){yp(t,e);var n=vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ou(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ou(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function um(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ou(t,e,n){(e!=="number"||wa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function Mi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Bo(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function vp(t,e){var n=vr(e.value),r=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zs,xp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zs=Zs||document.createElement("div"),Zs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function es(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q0=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){Q0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function Tp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function _p(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Tp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Z0=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qu(t,e){if(e){if(Z0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ju=null;function Rc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wu=null,Ri=null,Di=null;function fm(t){if(t=vs(t)){if(typeof Wu!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Xa(e),Wu(t.stateNode,t.type,e))}}function Sp(t){Ri?Di?Di.push(t):Di=[t]:Ri=t}function wp(){if(Ri){var t=Ri,e=Di;if(Di=Ri=null,fm(t),e)for(t=0;t<e.length;t++)fm(e[t])}}function kp(t,e){return t(e)}function Ep(){}var gu=!1;function Ap(t,e,n){if(gu)return t(e,n);gu=!0;try{return kp(t,e,n)}finally{gu=!1,(Ri!==null||Di!==null)&&(Ep(),wp())}}function ts(t,e){var n=t.stateNode;if(n===null)return null;var r=Xa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Yu=!1;if(Vn)try{vi={},Object.defineProperty(vi,"passive",{get:function(){Yu=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{Yu=!1}var vi;function X0(t,e,n,r,i,o,l,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var qo=!1,ka=null,Ea=!1,Qu=null,j0={onError:function(t){qo=!0,ka=t}};function eC(t,e,n,r,i,o,l,u,c){qo=!1,ka=null,X0.apply(j0,arguments)}function tC(t,e,n,r,i,o,l,u,c){if(eC.apply(this,arguments),qo){if(qo){var d=ka;qo=!1,ka=null}else throw Error(F(198));Ea||(Ea=!0,Qu=d)}}function Kr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Np(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mm(t){if(Kr(t)!==t)throw Error(F(188))}function nC(t){var e=t.alternate;if(!e){if(e=Kr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return mm(i),t;if(o===r)return mm(i),e;o=o.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=o;break}if(u===r){l=!0,r=i,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,r=i;break}if(u===r){l=!0,r=o,n=i;break}u=u.sibling}if(!l)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Ip(t){return t=nC(t),t!==null?bp(t):null}function bp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bp(t);if(e!==null)return e;t=t.sibling}return null}var Pp=Lt.unstable_scheduleCallback,pm=Lt.unstable_cancelCallback,rC=Lt.unstable_shouldYield,iC=Lt.unstable_requestPaint,Je=Lt.unstable_now,oC=Lt.unstable_getCurrentPriorityLevel,Dc=Lt.unstable_ImmediatePriority,Mp=Lt.unstable_UserBlockingPriority,Aa=Lt.unstable_NormalPriority,sC=Lt.unstable_LowPriority,Rp=Lt.unstable_IdlePriority,Wa=null,Cn=null;function aC(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Wa,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:cC,lC=Math.log,uC=Math.LN2;function cC(t){return t>>>=0,t===0?32:31-(lC(t)/uC|0)|0}var Xs=64,js=4194304;function Oo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Na(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var u=l&~i;u!==0?r=Oo(u):(o&=l,o!==0&&(r=Oo(o)))}else l=n&~i,l!==0?r=Oo(l):o!==0&&(r=Oo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),i=1<<n,r|=t[n],e&=~i;return r}function dC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-un(o),u=1<<l,c=i[l];c===-1?(!(u&n)||u&r)&&(i[l]=dC(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function Zu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dp(){var t=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),t}function yu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function mC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-un(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Lc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function Lp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fp,Fc,Up,Vp,$p,Xu=!1,ea=[],cr=null,dr=null,fr=null,ns=new Map,rs=new Map,sr=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(t,e){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ns.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(e.pointerId)}}function Ro(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=vs(e),e!==null&&Fc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hC(t,e,n,r,i){switch(e){case"focusin":return cr=Ro(cr,t,e,n,r,i),!0;case"dragenter":return dr=Ro(dr,t,e,n,r,i),!0;case"mouseover":return fr=Ro(fr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ns.set(o,Ro(ns.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,rs.set(o,Ro(rs.get(o)||null,t,e,n,r,i)),!0}return!1}function Gp(t){var e=Lr(t.target);if(e!==null){var n=Kr(e);if(n!==null){if(e=n.tag,e===13){if(e=Np(n),e!==null){t.blockedOn=e,$p(t.priority,function(){Up(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ju(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ju=r,n.target.dispatchEvent(r),Ju=null}else return e=vs(n),e!==null&&Fc(e),t.blockedOn=n,!1;e.shift()}return!0}function gm(t,e,n){pa(t)&&n.delete(e)}function gC(){Xu=!1,cr!==null&&pa(cr)&&(cr=null),dr!==null&&pa(dr)&&(dr=null),fr!==null&&pa(fr)&&(fr=null),ns.forEach(gm),rs.forEach(gm)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,Xu||(Xu=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,gC)))}function is(t){function e(i){return Do(i,t)}if(0<ea.length){Do(ea[0],t);for(var n=1;n<ea.length;n++){var r=ea[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cr!==null&&Do(cr,t),dr!==null&&Do(dr,t),fr!==null&&Do(fr,t),ns.forEach(e),rs.forEach(e),n=0;n<sr.length;n++)r=sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)Gp(n),n.blockedOn===null&&sr.shift()}var Li=On.ReactCurrentBatchConfig,Ia=!0;function yC(t,e,n,r){var i=xe,o=Li.transition;Li.transition=null;try{xe=1,Uc(t,e,n,r)}finally{xe=i,Li.transition=o}}function vC(t,e,n,r){var i=xe,o=Li.transition;Li.transition=null;try{xe=4,Uc(t,e,n,r)}finally{xe=i,Li.transition=o}}function Uc(t,e,n,r){if(Ia){var i=ju(t,e,n,r);if(i===null)wu(t,e,r,ba,n),hm(t,r);else if(hC(i,t,e,n,r))r.stopPropagation();else if(hm(t,r),e&4&&-1<pC.indexOf(t)){for(;i!==null;){var o=vs(i);if(o!==null&&Fp(o),o=ju(t,e,n,r),o===null&&wu(t,e,r,ba,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else wu(t,e,r,null,n)}}var ba=null;function ju(t,e,n,r){if(ba=null,t=Rc(r),t=Lr(t),t!==null)if(e=Kr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Np(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ba=t,null}function Bp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oC()){case Dc:return 1;case Mp:return 4;case Aa:case sC:return 16;case Rp:return 536870912;default:return 16}default:return 16}}var lr=null,Vc=null,ha=null;function Op(){if(ha)return ha;var t,e=Vc,n=e.length,r,i="value"in lr?lr.value:lr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[o-r];r++);return ha=i.slice(t,1<r?1-r:void 0)}function ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ta(){return!0}function ym(){return!1}function Ft(t){function e(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ta:ym,this.isPropagationStopped=ym,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),e}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$c=Ft(qi),ys=He({},qi,{view:0,detail:0}),CC=Ft(ys),vu,Cu,Lo,Ya=He({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(vu=t.screenX-Lo.screenX,Cu=t.screenY-Lo.screenY):Cu=vu=0,Lo=t),vu)},movementY:function(t){return"movementY"in t?t.movementY:Cu}}),vm=Ft(Ya),xC=He({},Ya,{dataTransfer:0}),TC=Ft(xC),_C=He({},ys,{relatedTarget:0}),xu=Ft(_C),SC=He({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),wC=Ft(SC),kC=He({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EC=Ft(kC),AC=He({},qi,{data:0}),Cm=Ft(AC),NC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bC[t])?!!e[t]:!1}function Gc(){return PC}var MC=He({},ys,{key:function(t){if(t.key){var e=NC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(t){return t.type==="keypress"?ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RC=Ft(MC),DC=He({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=Ft(DC),LC=He({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),FC=Ft(LC),UC=He({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),VC=Ft(UC),$C=He({},Ya,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GC=Ft($C),BC=[9,13,27,32],Bc=Vn&&"CompositionEvent"in window,Ko=null;Vn&&"documentMode"in document&&(Ko=document.documentMode);var OC=Vn&&"TextEvent"in window&&!Ko,Hp=Vn&&(!Bc||Ko&&8<Ko&&11>=Ko),Tm=" ",_m=!1;function zp(t,e){switch(t){case"keyup":return BC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _i=!1;function HC(t,e){switch(t){case"compositionend":return qp(e);case"keypress":return e.which!==32?null:(_m=!0,Tm);case"textInput":return t=e.data,t===Tm&&_m?null:t;default:return null}}function zC(t,e){if(_i)return t==="compositionend"||!Bc&&zp(t,e)?(t=Op(),ha=Vc=lr=null,_i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hp&&e.locale!=="ko"?null:e.data;default:return null}}var qC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qC[t.type]:e==="textarea"}function Kp(t,e,n,r){Sp(r),e=Pa(e,"onChange"),0<e.length&&(n=new $c("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jo=null,os=null;function KC(t){rh(t,0)}function Qa(t){var e=ki(t);if(gp(e))return t}function JC(t,e){if(t==="change")return e}var Jp=!1;Vn&&(Vn?(ra="oninput"in document,ra||(Tu=document.createElement("div"),Tu.setAttribute("oninput","return;"),ra=typeof Tu.oninput=="function"),na=ra):na=!1,Jp=na&&(!document.documentMode||9<document.documentMode));var na,ra,Tu;function wm(){Jo&&(Jo.detachEvent("onpropertychange",Wp),os=Jo=null)}function Wp(t){if(t.propertyName==="value"&&Qa(os)){var e=[];Kp(e,os,t,Rc(t)),Ap(KC,e)}}function WC(t,e,n){t==="focusin"?(wm(),Jo=e,os=n,Jo.attachEvent("onpropertychange",Wp)):t==="focusout"&&wm()}function YC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qa(os)}function QC(t,e){if(t==="click")return Qa(e)}function ZC(t,e){if(t==="input"||t==="change")return Qa(e)}function XC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:XC;function ss(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lu.call(e,i)||!dn(t[i],e[i]))return!1}return!0}function km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Em(t,e){var n=km(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=km(n)}}function Yp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qp(){for(var t=window,e=wa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wa(t.document)}return e}function Oc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jC(t){var e=Qp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yp(n.ownerDocument.documentElement,n)){if(r!==null&&Oc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Em(n,o);var l=Em(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ex=Vn&&"documentMode"in document&&11>=document.documentMode,Si=null,ec=null,Wo=null,tc=!1;function Am(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tc||Si==null||Si!==wa(r)||(r=Si,"selectionStart"in r&&Oc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&ss(Wo,r)||(Wo=r,r=Pa(ec,"onSelect"),0<r.length&&(e=new $c("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Si)))}function ia(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionend:ia("Transition","TransitionEnd")},_u={},Zp={};Vn&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Za(t){if(_u[t])return _u[t];if(!wi[t])return t;var e=wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zp)return _u[t]=e[n];return t}var Xp=Za("animationend"),jp=Za("animationiteration"),eh=Za("animationstart"),th=Za("transitionend"),nh=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(t,e){nh.set(t,e),qr(e,[t])}for(oa=0;oa<Nm.length;oa++)sa=Nm[oa],Im=sa.toLowerCase(),bm=sa[0].toUpperCase()+sa.slice(1),xr(Im,"on"+bm);var sa,Im,bm,oa;xr(Xp,"onAnimationEnd");xr(jp,"onAnimationIteration");xr(eh,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(th,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function Pm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tC(r,e,void 0,t),t.currentTarget=null}function rh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var u=r[l],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;Pm(i,u,d),o=c}else for(l=0;l<r.length;l++){if(u=r[l],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;Pm(i,u,d),o=c}}}if(Ea)throw t=Qu,Ea=!1,Qu=null,t}function Re(t,e){var n=e[sc];n===void 0&&(n=e[sc]=new Set);var r=t+"__bubble";n.has(r)||(ih(e,t,2,!1),n.add(r))}function Su(t,e,n){var r=0;e&&(r|=4),ih(n,t,r,e)}var aa="_reactListening"+Math.random().toString(36).slice(2);function as(t){if(!t[aa]){t[aa]=!0,dp.forEach(function(n){n!=="selectionchange"&&(tx.has(n)||Su(n,!1,t),Su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[aa]||(e[aa]=!0,Su("selectionchange",!1,e))}}function ih(t,e,n,r){switch(Bp(e)){case 1:var i=yC;break;case 4:i=vC;break;default:i=Uc}n=i.bind(null,e,n,t),i=void 0,!Yu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;u!==null;){if(l=Lr(u),l===null)return;if(c=l.tag,c===5||c===6){r=o=l;continue e}u=u.parentNode}}r=r.return}Ap(function(){var d=o,f=Rc(n),m=[];e:{var p=nh.get(t);if(p!==void 0){var h=$c,g=t;switch(t){case"keypress":if(ga(n)===0)break e;case"keydown":case"keyup":h=RC;break;case"focusin":g="focus",h=xu;break;case"focusout":g="blur",h=xu;break;case"beforeblur":case"afterblur":h=xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=TC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=FC;break;case Xp:case jp:case eh:h=wC;break;case th:h=VC;break;case"scroll":h=CC;break;case"wheel":h=GC;break;case"copy":case"cut":case"paste":h=EC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=xm}var C=(e&4)!==0,T=!C&&t==="scroll",y=C?p!==null?p+"Capture":null:p;C=[];for(var v=d,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=ts(v,y),S!=null&&C.push(ls(v,S,x)))),T)break;v=v.return}0<C.length&&(p=new h(p,g,null,n,f),m.push({event:p,listeners:C}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==Ju&&(g=n.relatedTarget||n.fromElement)&&(Lr(g)||g[$n]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=d,g=g?Lr(g):null,g!==null&&(T=Kr(g),g!==T||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=d),h!==g)){if(C=vm,S="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(C=xm,S="onPointerLeave",y="onPointerEnter",v="pointer"),T=h==null?p:ki(h),x=g==null?p:ki(g),p=new C(S,v+"leave",h,n,f),p.target=T,p.relatedTarget=x,S=null,Lr(f)===d&&(C=new C(y,v+"enter",g,n,f),C.target=x,C.relatedTarget=T,S=C),T=S,h&&g)t:{for(C=h,y=g,v=0,x=C;x;x=Ci(x))v++;for(x=0,S=y;S;S=Ci(S))x++;for(;0<v-x;)C=Ci(C),v--;for(;0<x-v;)y=Ci(y),x--;for(;v--;){if(C===y||y!==null&&C===y.alternate)break t;C=Ci(C),y=Ci(y)}C=null}else C=null;h!==null&&Mm(m,p,h,C,!1),g!==null&&T!==null&&Mm(m,T,g,C,!0)}}e:{if(p=d?ki(d):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var w=JC;else if(Sm(p))if(Jp)w=ZC;else{w=YC;var E=WC}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=QC);if(w&&(w=w(t,d))){Kp(m,w,n,f);break e}E&&E(t,p,d),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&Ou(p,"number",p.value)}switch(E=d?ki(d):window,t){case"focusin":(Sm(E)||E.contentEditable==="true")&&(Si=E,ec=d,Wo=null);break;case"focusout":Wo=ec=Si=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,Am(m,n,f);break;case"selectionchange":if(ex)break;case"keydown":case"keyup":Am(m,n,f)}var k;if(Bc)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else _i?zp(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Hp&&n.locale!=="ko"&&(_i||A!=="onCompositionStart"?A==="onCompositionEnd"&&_i&&(k=Op()):(lr=f,Vc="value"in lr?lr.value:lr.textContent,_i=!0)),E=Pa(d,A),0<E.length&&(A=new Cm(A,t,null,n,f),m.push({event:A,listeners:E}),k?A.data=k:(k=qp(n),k!==null&&(A.data=k)))),(k=OC?HC(t,n):zC(t,n))&&(d=Pa(d,"onBeforeInput"),0<d.length&&(f=new Cm("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=k))}rh(m,e)})}function ls(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ts(t,n),o!=null&&r.unshift(ls(t,o,i)),o=ts(t,e),o!=null&&r.push(ls(t,o,i))),t=t.return}return r}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mm(t,e,n,r,i){for(var o=e._reactName,l=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=ts(n,o),c!=null&&l.unshift(ls(n,c,u))):i||(c=ts(n,o),c!=null&&l.push(ls(n,c,u)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var nx=/\r\n?/g,rx=/\u0000|\uFFFD/g;function Rm(t){return(typeof t=="string"?t:""+t).replace(nx,`
`).replace(rx,"")}function la(t,e,n){if(e=Rm(e),Rm(t)!==e&&n)throw Error(F(425))}function Ma(){}var nc=null,rc=null;function ic(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oc=typeof setTimeout=="function"?setTimeout:void 0,ix=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,ox=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(t){return Dm.resolve(null).then(t).catch(sx)}:oc;function sx(t){setTimeout(function(){throw t})}function ku(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),is(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);is(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),vn="__reactFiber$"+Ki,us="__reactProps$"+Ki,$n="__reactContainer$"+Ki,sc="__reactEvents$"+Ki,ax="__reactListeners$"+Ki,lx="__reactHandles$"+Ki;function Lr(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lm(t);t!==null;){if(n=t[vn])return n;t=Lm(t)}return e}t=n,n=t.parentNode}return null}function vs(t){return t=t[vn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Xa(t){return t[us]||null}var ac=[],Ei=-1;function Tr(t){return{current:t}}function De(t){0>Ei||(t.current=ac[Ei],ac[Ei]=null,Ei--)}function be(t,e){Ei++,ac[Ei]=t.current,t.current=e}var Cr={},gt=Tr(Cr),At=Tr(!1),Gr=Cr;function $i(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function Ra(){De(At),De(gt)}function Fm(t,e,n){if(gt.current!==Cr)throw Error(F(168));be(gt,e),be(At,n)}function oh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,W0(t)||"Unknown",i));return He({},n,r)}function Da(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,Gr=gt.current,be(gt,t),be(At,At.current),!0}function Um(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=oh(t,e,Gr),r.__reactInternalMemoizedMergedChildContext=t,De(At),De(gt),be(gt,t)):De(At),be(At,n)}var Dn=null,ja=!1,Eu=!1;function sh(t){Dn===null?Dn=[t]:Dn.push(t)}function ux(t){ja=!0,sh(t)}function _r(){if(!Eu&&Dn!==null){Eu=!0;var t=0,e=xe;try{var n=Dn;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,ja=!1}catch(i){throw Dn!==null&&(Dn=Dn.slice(t+1)),Pp(Dc,_r),i}finally{xe=e,Eu=!1}}return null}var Ai=[],Ni=0,La=null,Fa=0,Ot=[],Ht=0,Br=null,Ln=1,Fn="";function Rr(t,e){Ai[Ni++]=Fa,Ai[Ni++]=La,La=t,Fa=e}function ah(t,e,n){Ot[Ht++]=Ln,Ot[Ht++]=Fn,Ot[Ht++]=Br,Br=t;var r=Ln;t=Fn;var i=32-un(r)-1;r&=~(1<<i),n+=1;var o=32-un(e)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Ln=1<<32-un(e)+i|n<<i|r,Fn=o+t}else Ln=1<<o|n<<i|r,Fn=t}function Hc(t){t.return!==null&&(Rr(t,1),ah(t,1,0))}function zc(t){for(;t===La;)La=Ai[--Ni],Ai[Ni]=null,Fa=Ai[--Ni],Ai[Ni]=null;for(;t===Br;)Br=Ot[--Ht],Ot[Ht]=null,Fn=Ot[--Ht],Ot[Ht]=null,Ln=Ot[--Ht],Ot[Ht]=null}var Dt=null,Rt=null,Ve=!1,ln=null;function lh(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Br!==null?{id:Ln,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Rt=null,!0):!1;default:return!1}}function lc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uc(t){if(Ve){var e=Rt;if(e){var n=e;if(!Vm(t,e)){if(lc(t))throw Error(F(418));e=mr(n.nextSibling);var r=Dt;e&&Vm(t,e)?lh(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Dt=t)}}else{if(lc(t))throw Error(F(418));t.flags=t.flags&-4097|2,Ve=!1,Dt=t}}}function $m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function ua(t){if(t!==Dt)return!1;if(!Ve)return $m(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ic(t.type,t.memoizedProps)),e&&(e=Rt)){if(lc(t))throw uh(),Error(F(418));for(;e;)lh(t,e),e=mr(e.nextSibling)}if($m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Dt?mr(t.stateNode.nextSibling):null;return!0}function uh(){for(var t=Rt;t;)t=mr(t.nextSibling)}function Gi(){Rt=Dt=null,Ve=!1}function qc(t){ln===null?ln=[t]:ln.push(t)}var cx=On.ReactCurrentBatchConfig;function Fo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=i.refs;l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function ca(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gm(t){var e=t._init;return e(t._payload)}function ch(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=yr(y,v),y.index=0,y.sibling=null,y}function o(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function l(y){return t&&y.alternate===null&&(y.flags|=2),y}function u(y,v,x,S){return v===null||v.tag!==6?(v=Ru(x,y.mode,S),v.return=y,v):(v=i(v,x),v.return=y,v)}function c(y,v,x,S){var w=x.type;return w===Ti?f(y,v,x.props.children,S,x.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ir&&Gm(w)===v.type)?(S=i(v,x.props),S.ref=Fo(y,v,x),S.return=y,S):(S=Sa(x.type,x.key,x.props,null,y.mode,S),S.ref=Fo(y,v,x),S.return=y,S)}function d(y,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Du(x,y.mode,S),v.return=y,v):(v=i(v,x.children||[]),v.return=y,v)}function f(y,v,x,S,w){return v===null||v.tag!==7?(v=$r(x,y.mode,S,w),v.return=y,v):(v=i(v,x),v.return=y,v)}function m(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ru(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ys:return x=Sa(v.type,v.key,v.props,null,y.mode,x),x.ref=Fo(y,null,v),x.return=y,x;case xi:return v=Du(v,y.mode,x),v.return=y,v;case ir:var S=v._init;return m(y,S(v._payload),x)}if(Bo(v)||Mo(v))return v=$r(v,y.mode,x,null),v.return=y,v;ca(y,v)}return null}function p(y,v,x,S){var w=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:u(y,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ys:return x.key===w?c(y,v,x,S):null;case xi:return x.key===w?d(y,v,x,S):null;case ir:return w=x._init,p(y,v,w(x._payload),S)}if(Bo(x)||Mo(x))return w!==null?null:f(y,v,x,S,null);ca(y,x)}return null}function h(y,v,x,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,u(v,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ys:return y=y.get(S.key===null?x:S.key)||null,c(v,y,S,w);case xi:return y=y.get(S.key===null?x:S.key)||null,d(v,y,S,w);case ir:var E=S._init;return h(y,v,x,E(S._payload),w)}if(Bo(S)||Mo(S))return y=y.get(x)||null,f(v,y,S,w,null);ca(v,S)}return null}function g(y,v,x,S){for(var w=null,E=null,k=v,A=v=0,N=null;k!==null&&A<x.length;A++){k.index>A?(N=k,k=null):N=k.sibling;var U=p(y,k,x[A],S);if(U===null){k===null&&(k=N);break}t&&k&&U.alternate===null&&e(y,k),v=o(U,v,A),E===null?w=U:E.sibling=U,E=U,k=N}if(A===x.length)return n(y,k),Ve&&Rr(y,A),w;if(k===null){for(;A<x.length;A++)k=m(y,x[A],S),k!==null&&(v=o(k,v,A),E===null?w=k:E.sibling=k,E=k);return Ve&&Rr(y,A),w}for(k=r(y,k);A<x.length;A++)N=h(k,y,A,x[A],S),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?A:N.key),v=o(N,v,A),E===null?w=N:E.sibling=N,E=N);return t&&k.forEach(function(G){return e(y,G)}),Ve&&Rr(y,A),w}function C(y,v,x,S){var w=Mo(x);if(typeof w!="function")throw Error(F(150));if(x=w.call(x),x==null)throw Error(F(151));for(var E=w=null,k=v,A=v=0,N=null,U=x.next();k!==null&&!U.done;A++,U=x.next()){k.index>A?(N=k,k=null):N=k.sibling;var G=p(y,k,U.value,S);if(G===null){k===null&&(k=N);break}t&&k&&G.alternate===null&&e(y,k),v=o(G,v,A),E===null?w=G:E.sibling=G,E=G,k=N}if(U.done)return n(y,k),Ve&&Rr(y,A),w;if(k===null){for(;!U.done;A++,U=x.next())U=m(y,U.value,S),U!==null&&(v=o(U,v,A),E===null?w=U:E.sibling=U,E=U);return Ve&&Rr(y,A),w}for(k=r(y,k);!U.done;A++,U=x.next())U=h(k,y,A,U.value,S),U!==null&&(t&&U.alternate!==null&&k.delete(U.key===null?A:U.key),v=o(U,v,A),E===null?w=U:E.sibling=U,E=U);return t&&k.forEach(function(le){return e(y,le)}),Ve&&Rr(y,A),w}function T(y,v,x,S){if(typeof x=="object"&&x!==null&&x.type===Ti&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ys:e:{for(var w=x.key,E=v;E!==null;){if(E.key===w){if(w=x.type,w===Ti){if(E.tag===7){n(y,E.sibling),v=i(E,x.props.children),v.return=y,y=v;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ir&&Gm(w)===E.type){n(y,E.sibling),v=i(E,x.props),v.ref=Fo(y,E,x),v.return=y,y=v;break e}n(y,E);break}else e(y,E);E=E.sibling}x.type===Ti?(v=$r(x.props.children,y.mode,S,x.key),v.return=y,y=v):(S=Sa(x.type,x.key,x.props,null,y.mode,S),S.ref=Fo(y,v,x),S.return=y,y=S)}return l(y);case xi:e:{for(E=x.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=i(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Du(x,y.mode,S),v.return=y,y=v}return l(y);case ir:return E=x._init,T(y,v,E(x._payload),S)}if(Bo(x))return g(y,v,x,S);if(Mo(x))return C(y,v,x,S);ca(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,x),v.return=y,y=v):(n(y,v),v=Ru(x,y.mode,S),v.return=y,y=v),l(y)):n(y,v)}return T}var Bi=ch(!0),dh=ch(!1),Ua=Tr(null),Va=null,Ii=null,Kc=null;function Jc(){Kc=Ii=Va=null}function Wc(t){var e=Ua.current;De(Ua),t._currentValue=e}function cc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fi(t,e){Va=t,Kc=Ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(Kc!==t)if(t={context:t,memoizedValue:e,next:null},Ii===null){if(Va===null)throw Error(F(308));Ii=t,Va.dependencies={lanes:0,firstContext:t}}else Ii=Ii.next=t;return e}var Fr=null;function Yc(t){Fr===null?Fr=[t]:Fr.push(t)}function fh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Yc(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Qc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gn(t,n)}return i=r.interleaved,i===null?(e.next=e,Yc(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gn(t,n)}function ya(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lc(t,n)}}function Bm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $a(t,e,n,r){var i=t.updateQueue;or=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,l===null?o=d:l.next=d,l=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==l&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(o!==null){var m=i.baseState;l=0,f=d=c=null,u=o;do{var p=u.lane,h=u.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var g=t,C=u;switch(p=e,h=n,C.tag){case 1:if(g=C.payload,typeof g=="function"){m=g.call(h,m,p);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=C.payload,p=typeof g=="function"?g.call(h,m,p):g,p==null)break e;m=He({},m,p);break e;case 2:or=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[u]:p.push(u))}else h={eventTime:h,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=h,c=m):f=f.next=h,l|=p;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;p=u,u=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Hr|=l,t.lanes=l,t.memoizedState=m}}function Om(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var Cs={},xn=Tr(Cs),cs=Tr(Cs),ds=Tr(Cs);function Ur(t){if(t===Cs)throw Error(F(174));return t}function Zc(t,e){switch(be(ds,e),be(cs,t),be(xn,Cs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zu(e,t)}De(xn),be(xn,e)}function Oi(){De(xn),De(cs),De(ds)}function ph(t){Ur(ds.current);var e=Ur(xn.current),n=zu(e,t.type);e!==n&&(be(cs,t),be(xn,n))}function Xc(t){cs.current===t&&(De(xn),De(cs))}var Be=Tr(0);function Ga(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Au=[];function jc(){for(var t=0;t<Au.length;t++)Au[t]._workInProgressVersionPrimary=null;Au.length=0}var va=On.ReactCurrentDispatcher,Nu=On.ReactCurrentBatchConfig,Or=0,Oe=null,Ze=null,tt=null,Ba=!1,Yo=!1,fs=0,dx=0;function mt(){throw Error(F(321))}function ed(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function td(t,e,n,r,i,o){if(Or=o,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,va.current=t===null||t.memoizedState===null?hx:gx,t=n(r,i),Yo){o=0;do{if(Yo=!1,fs=0,25<=o)throw Error(F(301));o+=1,tt=Ze=null,e.updateQueue=null,va.current=yx,t=n(r,i)}while(Yo)}if(va.current=Oa,e=Ze!==null&&Ze.next!==null,Or=0,tt=Ze=Oe=null,Ba=!1,e)throw Error(F(300));return t}function nd(){var t=fs!==0;return fs=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Oe.memoizedState=tt=t:tt=tt.next=t,tt}function Jt(){if(Ze===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=tt===null?Oe.memoizedState:tt.next;if(e!==null)tt=e,Ze=t;else{if(t===null)throw Error(F(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},tt===null?Oe.memoizedState=tt=t:tt=tt.next=t}return tt}function ms(t,e){return typeof e=="function"?e(t):e}function Iu(t){var e=Jt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=l=null,c=null,d=o;do{var f=d.lane;if((Or&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,l=r):c=c.next=m,Oe.lanes|=f,Hr|=f}d=d.next}while(d!==null&&d!==o);c===null?l=r:c.next=u,dn(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Oe.lanes|=o,Hr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bu(t){var e=Jt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);dn(o,e.memoizedState)||(Et=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function hh(){}function gh(t,e){var n=Oe,r=Jt(),i=e(),o=!dn(r.memoizedState,i);if(o&&(r.memoizedState=i,Et=!0),r=r.queue,rd(Ch.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,ps(9,vh.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(F(349));Or&30||yh(n,e,i)}return i}function yh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vh(t,e,n,r){e.value=n,e.getSnapshot=r,xh(e)&&Th(t)}function Ch(t,e,n){return n(function(){xh(e)&&Th(t)})}function xh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function Th(t){var e=Gn(t,1);e!==null&&cn(e,t,1,-1)}function Hm(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},e.queue=t,t=t.dispatch=px.bind(null,Oe,t),[e.memoizedState,t]}function ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _h(){return Jt().memoizedState}function Ca(t,e,n,r){var i=yn();Oe.flags|=t,i.memoizedState=ps(1|e,n,void 0,r===void 0?null:r)}function el(t,e,n,r){var i=Jt();r=r===void 0?null:r;var o=void 0;if(Ze!==null){var l=Ze.memoizedState;if(o=l.destroy,r!==null&&ed(r,l.deps)){i.memoizedState=ps(e,n,o,r);return}}Oe.flags|=t,i.memoizedState=ps(1|e,n,o,r)}function zm(t,e){return Ca(8390656,8,t,e)}function rd(t,e){return el(2048,8,t,e)}function Sh(t,e){return el(4,2,t,e)}function wh(t,e){return el(4,4,t,e)}function kh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Eh(t,e,n){return n=n!=null?n.concat([t]):null,el(4,4,kh.bind(null,e,t),n)}function id(){}function Ah(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ed(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Nh(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ed(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ih(t,e,n){return Or&21?(dn(n,e)||(n=Dp(),Oe.lanes|=n,Hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function fx(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Nu.transition;Nu.transition={};try{t(!1),e()}finally{xe=n,Nu.transition=r}}function bh(){return Jt().memoizedState}function mx(t,e,n){var r=gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ph(t))Mh(e,n);else if(n=fh(t,e,n,r),n!==null){var i=Tt();cn(n,t,r,i),Rh(n,e,r)}}function px(t,e,n){var r=gr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ph(t))Mh(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,n);if(i.hasEagerState=!0,i.eagerState=u,dn(u,l)){var c=e.interleaved;c===null?(i.next=i,Yc(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=fh(t,e,i,r),n!==null&&(i=Tt(),cn(n,t,r,i),Rh(n,e,r))}}function Ph(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Mh(t,e){Yo=Ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lc(t,n)}}var Oa={readContext:Kt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},hx={readContext:Kt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:zm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ca(4194308,4,kh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ca(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ca(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mx.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:Hm,useDebugValue:id,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=Hm(!1),e=t[0];return t=fx.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=yn();if(Ve){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),nt===null)throw Error(F(349));Or&30||yh(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zm(Ch.bind(null,r,o,t),[t]),r.flags|=2048,ps(9,vh.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=yn(),e=nt.identifierPrefix;if(Ve){var n=Fn,r=Ln;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gx={readContext:Kt,useCallback:Ah,useContext:Kt,useEffect:rd,useImperativeHandle:Eh,useInsertionEffect:Sh,useLayoutEffect:wh,useMemo:Nh,useReducer:Iu,useRef:_h,useState:function(){return Iu(ms)},useDebugValue:id,useDeferredValue:function(t){var e=Jt();return Ih(e,Ze.memoizedState,t)},useTransition:function(){var t=Iu(ms)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:hh,useSyncExternalStore:gh,useId:bh,unstable_isNewReconciler:!1},yx={readContext:Kt,useCallback:Ah,useContext:Kt,useEffect:rd,useImperativeHandle:Eh,useInsertionEffect:Sh,useLayoutEffect:wh,useMemo:Nh,useReducer:bu,useRef:_h,useState:function(){return bu(ms)},useDebugValue:id,useDeferredValue:function(t){var e=Jt();return Ze===null?e.memoizedState=t:Ih(e,Ze.memoizedState,t)},useTransition:function(){var t=bu(ms)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:hh,useSyncExternalStore:gh,useId:bh,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tl={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=gr(t),o=Un(r,i);o.payload=e,n!=null&&(o.callback=n),e=pr(t,o,i),e!==null&&(cn(e,t,i,r),ya(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=gr(t),o=Un(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=pr(t,o,i),e!==null&&(cn(e,t,i,r),ya(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=gr(t),i=Un(n,r);i.tag=2,e!=null&&(i.callback=e),e=pr(t,i,r),e!==null&&(cn(e,t,r,n),ya(e,t,r))}};function qm(t,e,n,r,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!ss(n,r)||!ss(i,o):!0}function Dh(t,e,n){var r=!1,i=Cr,o=e.contextType;return typeof o=="object"&&o!==null?o=Kt(o):(i=Nt(e)?Gr:gt.current,r=e.contextTypes,o=(r=r!=null)?$i(t,i):Cr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&tl.enqueueReplaceState(e,e.state,null)}function fc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Qc(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Kt(o):(o=Nt(e)?Gr:gt.current,i.context=$i(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(dc(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&tl.enqueueReplaceState(i,i.state,null),$a(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hi(t,e){try{var n="",r=e;do n+=J0(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vx=typeof WeakMap=="function"?WeakMap:Map;function Lh(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){za||(za=!0,Sc=r),mc(t,e)},n}function Fh(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mc(t,e),typeof r!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Jm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Mx.bind(null,t,e,n),e.then(t,t))}function Wm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ym(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var Cx=On.ReactCurrentOwner,Et=!1;function xt(t,e,n,r){e.child=t===null?dh(e,null,n,r):Bi(e,t.child,n,r)}function Qm(t,e,n,r,i){n=n.render;var o=e.ref;return Fi(e,i),r=td(t,e,n,r,o,i),n=nd(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bn(t,e,i)):(Ve&&n&&Hc(e),e.flags|=1,xt(t,e,r,i),e.child)}function Zm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!fd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Uh(t,e,o,r,i)):(t=Sa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:ss,n(l,r)&&t.ref===e.ref)return Bn(t,e,i)}return e.flags|=1,t=yr(o,r),t.ref=e.ref,t.return=e,e.child=t}function Uh(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ss(o,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Bn(t,e,i)}return pc(t,e,n,r,i)}function Vh(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Pi,Mt),Mt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Pi,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,be(Pi,Mt),Mt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,be(Pi,Mt),Mt|=r;return xt(t,e,i,n),e.child}function $h(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pc(t,e,n,r,i){var o=Nt(n)?Gr:gt.current;return o=$i(e,o),Fi(e,i),n=td(t,e,n,r,o,i),r=nd(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bn(t,e,i)):(Ve&&r&&Hc(e),e.flags|=1,xt(t,e,n,i),e.child)}function Xm(t,e,n,r,i){if(Nt(n)){var o=!0;Da(e)}else o=!1;if(Fi(e,i),e.stateNode===null)xa(t,e),Dh(e,n,r),fc(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=Nt(n)?Gr:gt.current,d=$i(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Km(e,l,r,d),or=!1;var p=e.memoizedState;l.state=p,$a(e,r,l,i),c=e.memoizedState,u!==r||p!==c||At.current||or?(typeof f=="function"&&(dc(e,n,f,r),c=e.memoizedState),(u=or||qm(e,n,u,r,p,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=d,r=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,mh(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:sn(e.type,u),l.props=d,m=e.pendingProps,p=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=Nt(n)?Gr:gt.current,c=$i(e,c));var h=n.getDerivedStateFromProps;(f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==m||p!==c)&&Km(e,l,r,c),or=!1,p=e.memoizedState,l.state=p,$a(e,r,l,i);var g=e.memoizedState;u!==m||p!==g||At.current||or?(typeof h=="function"&&(dc(e,n,h,r),g=e.memoizedState),(d=or||qm(e,n,d,r,p,g,c)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,g,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),l.props=r,l.state=g,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return hc(t,e,n,r,o,i)}function hc(t,e,n,r,i,o){$h(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&Um(e,n,!1),Bn(t,e,o);r=e.stateNode,Cx.current=e;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Bi(e,t.child,null,o),e.child=Bi(e,null,u,o)):xt(t,e,u,o),e.memoizedState=r.state,i&&Um(e,n,!0),e.child}function Gh(t){var e=t.stateNode;e.pendingContext?Fm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fm(t,e.context,!1),Zc(t,e.containerInfo)}function jm(t,e,n,r,i){return Gi(),qc(i),e.flags|=256,xt(t,e,n,r),e.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bh(t,e,n){var r=e.pendingProps,i=Be.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(Be,i&1),t===null)return uc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=il(l,r,0,null),t=$r(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=yc(n),e.memoizedState=gc,t):od(e,l));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return xx(t,e,l,r,u,i,n);if(o){o=r.fallback,l=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=yr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=yr(u,o):(o=$r(o,l,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=t.child.memoizedState,l=l===null?yc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=gc,r}return o=t.child,t=o.sibling,r=yr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function od(t,e){return e=il({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function da(t,e,n,r){return r!==null&&qc(r),Bi(e,t.child,null,n),t=od(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xx(t,e,n,r,i,o,l){if(n)return e.flags&256?(e.flags&=-257,r=Pu(Error(F(422))),da(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=il({mode:"visible",children:r.children},i,0,null),o=$r(o,i,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Bi(e,t.child,null,l),e.child.memoizedState=yc(l),e.memoizedState=gc,o);if(!(e.mode&1))return da(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(F(419)),r=Pu(o,r,void 0),da(t,e,l,r)}if(u=(l&t.childLanes)!==0,Et||u){if(r=nt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Gn(t,i),cn(r,t,i,-1))}return dd(),r=Pu(Error(F(421))),da(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Rx.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Rt=mr(i.nextSibling),Dt=e,Ve=!0,ln=null,t!==null&&(Ot[Ht++]=Ln,Ot[Ht++]=Fn,Ot[Ht++]=Br,Ln=t.id,Fn=t.overflow,Br=e),e=od(e,r.children),e.flags|=4096,e)}function ep(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cc(t.return,e,n)}function Mu(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Oh(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xt(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ep(t,n,e);else if(t.tag===19)ep(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Be,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ga(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mu(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ga(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mu(e,!0,n,null,o);break;case"together":Mu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tx(t,e,n){switch(e.tag){case 3:Gh(e),Gi();break;case 5:ph(e);break;case 1:Nt(e.type)&&Da(e);break;case 4:Zc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(Ua,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?Bh(t,e,n):(be(Be,Be.current&1),t=Bn(t,e,n),t!==null?t.sibling:null);be(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Oh(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,Vh(t,e,n)}return Bn(t,e,n)}var Hh,vc,zh,qh;Hh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vc=function(){};zh=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ur(xn.current);var o=null;switch(n){case"input":i=Gu(t,i),r=Gu(t,r),o=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),o=[];break;case"textarea":i=Hu(t,i),r=Hu(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ma)}qu(n,r);var l;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=i?.[d],r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(jo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",t),o||u===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};qh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Uo(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _x(t,e,n){var r=e.pendingProps;switch(zc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Nt(e.type)&&Ra(),pt(e),null;case 3:return r=e.stateNode,Oi(),De(At),De(gt),jc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(Ec(ln),ln=null))),vc(t,e),pt(e),null;case 5:Xc(e);var i=Ur(ds.current);if(n=e.type,t!==null&&e.stateNode!=null)zh(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return pt(e),null}if(t=Ur(xn.current),ua(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[vn]=e,r[us]=o,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<Ho.length;i++)Re(Ho[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":lm(r,o),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Re("invalid",r);break;case"textarea":cm(r,o),Re("invalid",r)}qu(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&la(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&la(r.textContent,u,t),i=["children",""+u]):jo.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Re("scroll",r)}switch(n){case"input":Qs(r),um(r,o,!0);break;case"textarea":Qs(r),dm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ma)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[vn]=e,t[us]=r,Hh(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ku(n,r),n){case"dialog":Re("cancel",t),Re("close",t),i=r;break;case"iframe":case"object":case"embed":Re("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ho.length;i++)Re(Ho[i],t);i=r;break;case"source":Re("error",t),i=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),i=r;break;case"details":Re("toggle",t),i=r;break;case"input":lm(t,r),i=Gu(t,r),Re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Re("invalid",t);break;case"textarea":cm(t,r),i=Hu(t,r),Re("invalid",t);break;default:i=r}qu(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?_p(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xp(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&es(t,c):typeof c=="number"&&es(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(jo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Re("scroll",t):c!=null&&Ic(t,o,c,l))}switch(n){case"input":Qs(t),um(t,r,!1);break;case"textarea":Qs(t),dm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Mi(t,!!r.multiple,o,!1):r.defaultValue!=null&&Mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ma)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)qh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Ur(ds.current),Ur(xn.current),ua(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(o=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:la(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&la(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return pt(e),null;case 13:if(De(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Rt!==null&&e.mode&1&&!(e.flags&128))uh(),Gi(),e.flags|=98560,o=!1;else if(o=ua(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(F(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(F(317));o[vn]=e}else Gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),o=!1}else ln!==null&&(Ec(ln),ln=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?Xe===0&&(Xe=3):dd())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Oi(),vc(t,e),t===null&&as(e.stateNode.containerInfo),pt(e),null;case 10:return Wc(e.type._context),pt(e),null;case 17:return Nt(e.type)&&Ra(),pt(e),null;case 19:if(De(Be),o=e.memoizedState,o===null)return pt(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)Uo(o,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ga(t),l!==null){for(e.flags|=128,Uo(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Be,Be.current&1|2),e.child}t=t.sibling}o.tail!==null&&Je()>zi&&(e.flags|=128,r=!0,Uo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ga(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Uo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ve)return pt(e),null}else 2*Je()-o.renderingStartTime>zi&&n!==1073741824&&(e.flags|=128,r=!0,Uo(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Je(),e.sibling=null,n=Be.current,be(Be,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return cd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Sx(t,e){switch(zc(e),e.tag){case 1:return Nt(e.type)&&Ra(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),De(At),De(gt),jc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xc(e),null;case 13:if(De(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Be),null;case 4:return Oi(),null;case 10:return Wc(e.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var fa=!1,ht=!1,wx=typeof WeakSet=="function"?WeakSet:Set,J=null;function bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function Cc(t,e,n){try{n()}catch(r){qe(t,e,r)}}var tp=!1;function kx(t,e){if(nc=Ia,t=Qp(),Oc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,u=-1,c=-1,d=0,f=0,m=t,p=null;t:for(;;){for(var h;m!==n||i!==0&&m.nodeType!==3||(u=l+i),m!==o||r!==0&&m.nodeType!==3||(c=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(h=m.firstChild)!==null;)p=m,m=h;for(;;){if(m===t)break t;if(p===n&&++d===i&&(u=l),p===o&&++f===r&&(c=l),(h=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=h}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rc={focusedElem:t,selectionRange:n},Ia=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var C=g.memoizedProps,T=g.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?C:sn(e.type,C),T);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(S){qe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return g=tp,tp=!1,g}function Qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Cc(e,n,o)}i=i.next}while(i!==r)}}function nl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kh(t){var e=t.alternate;e!==null&&(t.alternate=null,Kh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[us],delete e[sc],delete e[ax],delete e[lx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jh(t){return t.tag===5||t.tag===3||t.tag===4}function np(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ma));else if(r!==4&&(t=t.child,t!==null))for(Tc(t,e,n),t=t.sibling;t!==null;)Tc(t,e,n),t=t.sibling}function _c(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_c(t,e,n),t=t.sibling;t!==null;)_c(t,e,n),t=t.sibling}var lt=null,an=!1;function rr(t,e,n){for(n=n.child;n!==null;)Wh(t,e,n),n=n.sibling}function Wh(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Wa,n)}catch{}switch(n.tag){case 5:ht||bi(n,e);case 6:var r=lt,i=an;lt=null,rr(t,e,n),lt=r,an=i,lt!==null&&(an?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(an?(t=lt,n=n.stateNode,t.nodeType===8?ku(t.parentNode,n):t.nodeType===1&&ku(t,n),is(t)):ku(lt,n.stateNode));break;case 4:r=lt,i=an,lt=n.stateNode.containerInfo,an=!0,rr(t,e,n),lt=r,an=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Cc(n,e,l),i=i.next}while(i!==r)}rr(t,e,n);break;case 1:if(!ht&&(bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){qe(n,e,u)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,rr(t,e,n),ht=r):rr(t,e,n);break;default:rr(t,e,n)}}function rp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wx),e.forEach(function(r){var i=Dx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:lt=u.stateNode,an=!1;break e;case 3:lt=u.stateNode.containerInfo,an=!0;break e;case 4:lt=u.stateNode.containerInfo,an=!0;break e}u=u.return}if(lt===null)throw Error(F(160));Wh(o,l,i),lt=null,an=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){qe(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yh(e,t),e=e.sibling}function Yh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),gn(t),r&4){try{Qo(3,t,t.return),nl(3,t)}catch(C){qe(t,t.return,C)}try{Qo(5,t,t.return)}catch(C){qe(t,t.return,C)}}break;case 1:on(e,t),gn(t),r&512&&n!==null&&bi(n,n.return);break;case 5:if(on(e,t),gn(t),r&512&&n!==null&&bi(n,n.return),t.flags&32){var i=t.stateNode;try{es(i,"")}catch(C){qe(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&yp(i,o),Ku(u,l);var d=Ku(u,o);for(l=0;l<c.length;l+=2){var f=c[l],m=c[l+1];f==="style"?_p(i,m):f==="dangerouslySetInnerHTML"?xp(i,m):f==="children"?es(i,m):Ic(i,f,m,d)}switch(u){case"input":Bu(i,o);break;case"textarea":vp(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Mi(i,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?Mi(i,!!o.multiple,o.defaultValue,!0):Mi(i,!!o.multiple,o.multiple?[]:"",!1))}i[us]=o}catch(C){qe(t,t.return,C)}}break;case 6:if(on(e,t),gn(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(C){qe(t,t.return,C)}}break;case 3:if(on(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(e.containerInfo)}catch(C){qe(t,t.return,C)}break;case 4:on(e,t),gn(t);break;case 13:on(e,t),gn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ld=Je())),r&4&&rp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,on(e,t),ht=d):on(e,t),gn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(J=t,f=t.child;f!==null;){for(m=J=f;J!==null;){switch(p=J,h=p.child,p.tag){case 0:case 11:case 14:case 15:Qo(4,p,p.return);break;case 1:bi(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(C){qe(r,n,C)}}break;case 5:bi(p,p.return);break;case 22:if(p.memoizedState!==null){op(m);continue}}h!==null?(h.return=p,J=h):op(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Tp("display",l))}catch(C){qe(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){qe(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:on(e,t),gn(t),r&4&&rp(t);break;case 21:break;default:on(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jh(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(es(i,""),r.flags&=-33);var o=np(t);_c(t,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=np(t);Tc(t,u,l);break;default:throw Error(F(161))}}catch(c){qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ex(t,e,n){J=t,Qh(t,e,n)}function Qh(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||fa;if(!l){var u=i.alternate,c=u!==null&&u.memoizedState!==null||ht;u=fa;var d=ht;if(fa=l,(ht=c)&&!d)for(J=i;J!==null;)l=J,c=l.child,l.tag===22&&l.memoizedState!==null?sp(i):c!==null?(c.return=l,J=c):sp(i);for(;o!==null;)J=o,Qh(o,e,n),o=o.sibling;J=i,fa=u,ht=d}ip(t,e,n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,J=o):ip(t,e,n)}}function ip(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||nl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Om(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Om(e,l,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&is(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ht||e.flags&512&&xc(e)}catch(p){qe(e,e.return,p)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function op(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function sp(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nl(4,e)}catch(c){qe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){qe(e,i,c)}}var o=e.return;try{xc(e)}catch(c){qe(e,o,c)}break;case 5:var l=e.return;try{xc(e)}catch(c){qe(e,l,c)}}}catch(c){qe(e,e.return,c)}if(e===t){J=null;break}var u=e.sibling;if(u!==null){u.return=e.return,J=u;break}J=e.return}}var Ax=Math.ceil,Ha=On.ReactCurrentDispatcher,sd=On.ReactCurrentOwner,qt=On.ReactCurrentBatchConfig,pe=0,nt=null,Ye=null,ut=0,Mt=0,Pi=Tr(0),Xe=0,hs=null,Hr=0,rl=0,ad=0,Zo=null,kt=null,ld=0,zi=1/0,Rn=null,za=!1,Sc=null,hr=null,ma=!1,ur=null,qa=0,Xo=0,wc=null,Ta=-1,_a=0;function Tt(){return pe&6?Je():Ta!==-1?Ta:Ta=Je()}function gr(t){return t.mode&1?pe&2&&ut!==0?ut&-ut:cx.transition!==null?(_a===0&&(_a=Dp()),_a):(t=xe,t!==0||(t=window.event,t=t===void 0?16:Bp(t.type)),t):1}function cn(t,e,n,r){if(50<Xo)throw Xo=0,wc=null,Error(F(185));gs(t,n,r),(!(pe&2)||t!==nt)&&(t===nt&&(!(pe&2)&&(rl|=n),Xe===4&&ar(t,ut)),It(t,r),n===1&&pe===0&&!(e.mode&1)&&(zi=Je()+500,ja&&_r()))}function It(t,e){var n=t.callbackNode;fC(t,e);var r=Na(t,t===nt?ut:0);if(r===0)n!==null&&pm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pm(n),e===1)t.tag===0?ux(ap.bind(null,t)):sh(ap.bind(null,t)),ox(function(){!(pe&6)&&_r()}),n=null;else{switch(Lp(r)){case 1:n=Dc;break;case 4:n=Mp;break;case 16:n=Aa;break;case 536870912:n=Rp;break;default:n=Aa}n=ig(n,Zh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zh(t,e){if(Ta=-1,_a=0,pe&6)throw Error(F(327));var n=t.callbackNode;if(Ui()&&t.callbackNode!==n)return null;var r=Na(t,t===nt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ka(t,r);else{e=r;var i=pe;pe|=2;var o=jh();(nt!==t||ut!==e)&&(Rn=null,zi=Je()+500,Vr(t,e));do try{bx();break}catch(u){Xh(t,u)}while(!0);Jc(),Ha.current=o,pe=i,Ye!==null?e=0:(nt=null,ut=0,e=Xe)}if(e!==0){if(e===2&&(i=Zu(t),i!==0&&(r=i,e=kc(t,i))),e===1)throw n=hs,Vr(t,0),ar(t,r),It(t,Je()),n;if(e===6)ar(t,r);else{if(i=t.current.alternate,!(r&30)&&!Nx(i)&&(e=Ka(t,r),e===2&&(o=Zu(t),o!==0&&(r=o,e=kc(t,o))),e===1))throw n=hs,Vr(t,0),ar(t,r),It(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Dr(t,kt,Rn);break;case 3:if(ar(t,r),(r&130023424)===r&&(e=ld+500-Je(),10<e)){if(Na(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oc(Dr.bind(null,t,kt,Rn),e);break}Dr(t,kt,Rn);break;case 4:if(ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-un(r);o=1<<l,l=e[l],l>i&&(i=l),r&=~o}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ax(r/1960))-r,10<r){t.timeoutHandle=oc(Dr.bind(null,t,kt,Rn),r);break}Dr(t,kt,Rn);break;case 5:Dr(t,kt,Rn);break;default:throw Error(F(329))}}}return It(t,Je()),t.callbackNode===n?Zh.bind(null,t):null}function kc(t,e){var n=Zo;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=Ka(t,e),t!==2&&(e=kt,kt=n,e!==null&&Ec(e)),t}function Ec(t){kt===null?kt=t:kt.push.apply(kt,t)}function Nx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!dn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ar(t,e){for(e&=~ad,e&=~rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function ap(t){if(pe&6)throw Error(F(327));Ui();var e=Na(t,0);if(!(e&1))return It(t,Je()),null;var n=Ka(t,e);if(t.tag!==0&&n===2){var r=Zu(t);r!==0&&(e=r,n=kc(t,r))}if(n===1)throw n=hs,Vr(t,0),ar(t,e),It(t,Je()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dr(t,kt,Rn),It(t,Je()),null}function ud(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(zi=Je()+500,ja&&_r())}}function zr(t){ur!==null&&ur.tag===0&&!(pe&6)&&Ui();var e=pe;pe|=1;var n=qt.transition,r=xe;try{if(qt.transition=null,xe=1,t)return t()}finally{xe=r,qt.transition=n,pe=e,!(pe&6)&&_r()}}function cd(){Mt=Pi.current,De(Pi)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ix(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(zc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ra();break;case 3:Oi(),De(At),De(gt),jc();break;case 5:Xc(r);break;case 4:Oi();break;case 13:De(Be);break;case 19:De(Be);break;case 10:Wc(r.type._context);break;case 22:case 23:cd()}n=n.return}if(nt=t,Ye=t=yr(t.current,null),ut=Mt=e,Xe=0,hs=null,ad=rl=Hr=0,kt=Zo=null,Fr!==null){for(e=0;e<Fr.length;e++)if(n=Fr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}Fr=null}return t}function Xh(t,e){do{var n=Ye;try{if(Jc(),va.current=Oa,Ba){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ba=!1}if(Or=0,tt=Ze=Oe=null,Yo=!1,fs=0,sd.current=null,n===null||n.return===null){Xe=1,hs=e,Ye=null;break}e:{var o=t,l=n.return,u=n,c=e;if(e=ut,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=Wm(l);if(h!==null){h.flags&=-257,Ym(h,l,u,o,e),h.mode&1&&Jm(o,d,e),e=h,c=d;var g=e.updateQueue;if(g===null){var C=new Set;C.add(c),e.updateQueue=C}else g.add(c);break e}else{if(!(e&1)){Jm(o,d,e),dd();break e}c=Error(F(426))}}else if(Ve&&u.mode&1){var T=Wm(l);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Ym(T,l,u,o,e),qc(Hi(c,u));break e}}o=c=Hi(c,u),Xe!==4&&(Xe=2),Zo===null?Zo=[o]:Zo.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=Lh(o,c,e);Bm(o,y);break e;case 1:u=c;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(hr===null||!hr.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=Fh(o,u,e);Bm(o,S);break e}}o=o.return}while(o!==null)}tg(n)}catch(w){e=w,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function jh(){var t=Ha.current;return Ha.current=Oa,t===null?Oa:t}function dd(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),nt===null||!(Hr&268435455)&&!(rl&268435455)||ar(nt,ut)}function Ka(t,e){var n=pe;pe|=2;var r=jh();(nt!==t||ut!==e)&&(Rn=null,Vr(t,e));do try{Ix();break}catch(i){Xh(t,i)}while(!0);if(Jc(),pe=n,Ha.current=r,Ye!==null)throw Error(F(261));return nt=null,ut=0,Xe}function Ix(){for(;Ye!==null;)eg(Ye)}function bx(){for(;Ye!==null&&!rC();)eg(Ye)}function eg(t){var e=rg(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?tg(t):Ye=e,sd.current=null}function tg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Sx(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Ye=null;return}}else if(n=_x(n,e,Mt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);Xe===0&&(Xe=5)}function Dr(t,e,n){var r=xe,i=qt.transition;try{qt.transition=null,xe=1,Px(t,e,n,r)}finally{qt.transition=i,xe=r}return null}function Px(t,e,n,r){do Ui();while(ur!==null);if(pe&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(mC(t,o),t===nt&&(Ye=nt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ma||(ma=!0,ig(Aa,function(){return Ui(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=qt.transition,qt.transition=null;var l=xe;xe=1;var u=pe;pe|=4,sd.current=null,kx(t,n),Yh(n,t),jC(rc),Ia=!!nc,rc=nc=null,t.current=n,Ex(n,t,i),iC(),pe=u,xe=l,qt.transition=o}else t.current=n;if(ma&&(ma=!1,ur=t,qa=i),o=t.pendingLanes,o===0&&(hr=null),aC(n.stateNode,r),It(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(za)throw za=!1,t=Sc,Sc=null,t;return qa&1&&t.tag!==0&&Ui(),o=t.pendingLanes,o&1?t===wc?Xo++:(Xo=0,wc=t):Xo=0,_r(),null}function Ui(){if(ur!==null){var t=Lp(qa),e=qt.transition,n=xe;try{if(qt.transition=null,xe=16>t?16:t,ur===null)var r=!1;else{if(t=ur,ur=null,qa=0,pe&6)throw Error(F(331));var i=pe;for(pe|=4,J=t.current;J!==null;){var o=J,l=o.child;if(J.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(J=d;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:Qo(8,f,o)}var m=f.child;if(m!==null)m.return=f,J=m;else for(;J!==null;){f=J;var p=f.sibling,h=f.return;if(Kh(f),f===d){J=null;break}if(p!==null){p.return=h,J=p;break}J=h}}}var g=o.alternate;if(g!==null){var C=g.child;if(C!==null){g.child=null;do{var T=C.sibling;C.sibling=null,C=T}while(C!==null)}}J=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,J=l;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qo(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,J=y;break e}J=o.return}}var v=t.current;for(J=v;J!==null;){l=J;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,J=x;else e:for(l=v;J!==null;){if(u=J,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:nl(9,u)}}catch(w){qe(u,u.return,w)}if(u===l){J=null;break e}var S=u.sibling;if(S!==null){S.return=u.return,J=S;break e}J=u.return}}if(pe=i,_r(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Wa,t)}catch{}r=!0}return r}finally{xe=n,qt.transition=e}}return!1}function lp(t,e,n){e=Hi(n,e),e=Lh(t,e,1),t=pr(t,e,1),e=Tt(),t!==null&&(gs(t,1,e),It(t,e))}function qe(t,e,n){if(t.tag===3)lp(t,t,n);else for(;e!==null;){if(e.tag===3){lp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hr===null||!hr.has(r))){t=Hi(n,t),t=Fh(e,t,1),e=pr(e,t,1),t=Tt(),e!==null&&(gs(e,1,t),It(e,t));break}}e=e.return}}function Mx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ut&n)===n&&(Xe===4||Xe===3&&(ut&130023424)===ut&&500>Je()-ld?Vr(t,0):ad|=n),It(t,e)}function ng(t,e){e===0&&(t.mode&1?(e=js,js<<=1,!(js&130023424)&&(js=4194304)):e=1);var n=Tt();t=Gn(t,e),t!==null&&(gs(t,e,n),It(t,n))}function Rx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ng(t,n)}function Dx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),ng(t,n)}var rg;rg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,Tx(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Ve&&e.flags&1048576&&ah(e,Fa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xa(t,e),t=e.pendingProps;var i=$i(e,gt.current);Fi(e,n),i=td(null,e,r,t,i,n);var o=nd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(o=!0,Da(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qc(e),i.updater=tl,e.stateNode=i,i._reactInternals=e,fc(e,r,t,n),e=hc(null,e,r,!0,o,n)):(e.tag=0,Ve&&o&&Hc(e),xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Fx(r),t=sn(r,t),i){case 0:e=pc(null,e,r,t,n);break e;case 1:e=Xm(null,e,r,t,n);break e;case 11:e=Qm(null,e,r,t,n);break e;case 14:e=Zm(null,e,r,sn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),pc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Xm(t,e,r,i,n);case 3:e:{if(Gh(e),t===null)throw Error(F(387));r=e.pendingProps,o=e.memoizedState,i=o.element,mh(t,e),$a(e,r,null,n);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Hi(Error(F(423)),e),e=jm(t,e,r,n,i);break e}else if(r!==i){i=Hi(Error(F(424)),e),e=jm(t,e,r,n,i);break e}else for(Rt=mr(e.stateNode.containerInfo.firstChild),Dt=e,Ve=!0,ln=null,n=dh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===i){e=Bn(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return ph(e),t===null&&uc(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,ic(r,i)?l=null:o!==null&&ic(r,o)&&(e.flags|=32),$h(t,e),xt(t,e,l,n),e.child;case 6:return t===null&&uc(e),null;case 13:return Bh(t,e,n);case 4:return Zc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bi(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),Qm(t,e,r,i,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,l=i.value,be(Ua,r._currentValue),r._currentValue=l,o!==null)if(dn(o.value,l)){if(o.children===i.children&&!At.current){e=Bn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Un(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),cc(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(F(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),cc(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fi(e,n),i=Kt(i),r=r(i),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,i=sn(r,e.pendingProps),i=sn(r.type,i),Zm(t,e,r,i,n);case 15:return Uh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:sn(r,i),xa(t,e),e.tag=1,Nt(r)?(t=!0,Da(e)):t=!1,Fi(e,n),Dh(e,r,i),fc(e,r,i,n),hc(null,e,r,!0,t,n);case 19:return Oh(t,e,n);case 22:return Vh(t,e,n)}throw Error(F(156,e.tag))};function ig(t,e){return Pp(t,e)}function Lx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,r){return new Lx(t,e,n,r)}function fd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fx(t){if(typeof t=="function")return fd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pc)return 11;if(t===Mc)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sa(t,e,n,r,i,o){var l=2;if(r=t,typeof t=="function")fd(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ti:return $r(n.children,i,o,e);case bc:l=8,i|=8;break;case Fu:return t=zt(12,n,e,i|2),t.elementType=Fu,t.lanes=o,t;case Uu:return t=zt(13,n,e,i),t.elementType=Uu,t.lanes=o,t;case Vu:return t=zt(19,n,e,i),t.elementType=Vu,t.lanes=o,t;case pp:return il(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fp:l=10;break e;case mp:l=9;break e;case Pc:l=11;break e;case Mc:l=14;break e;case ir:l=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=zt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function $r(t,e,n,r){return t=zt(7,t,r,e),t.lanes=n,t}function il(t,e,n,r){return t=zt(22,t,r,e),t.elementType=pp,t.lanes=n,t.stateNode={isHidden:!1},t}function Ru(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function Du(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ux(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yu(0),this.expirationTimes=yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function md(t,e,n,r,i,o,l,u,c){return t=new Ux(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=zt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qc(o),t}function Vx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function og(t){if(!t)return Cr;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Nt(n))return oh(t,n,e)}return e}function sg(t,e,n,r,i,o,l,u,c){return t=md(n,r,!0,t,i,o,l,u,c),t.context=og(null),n=t.current,r=Tt(),i=gr(n),o=Un(r,i),o.callback=e??null,pr(n,o,i),t.current.lanes=i,gs(t,i,r),It(t,r),t}function ol(t,e,n,r){var i=e.current,o=Tt(),l=gr(i);return n=og(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(o,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pr(i,e,l),t!==null&&(cn(t,i,l,o),ya(t,i,l)),l}function Ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function up(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pd(t,e){up(t,e),(t=t.alternate)&&up(t,e)}function $x(){return null}var ag=typeof reportError=="function"?reportError:function(t){console.error(t)};function hd(t){this._internalRoot=t}sl.prototype.render=hd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));ol(t,e,null,null)};sl.prototype.unmount=hd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zr(function(){ol(null,t,null,null)}),e[$n]=null}};function sl(t){this._internalRoot=t}sl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&Gp(t)}};function gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cp(){}function Gx(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Ja(l);o.call(d)}}var l=sg(e,r,t,0,null,!1,!1,"",cp);return t._reactRootContainer=l,t[$n]=l.current,as(t.nodeType===8?t.parentNode:t),zr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=Ja(c);u.call(d)}}var c=md(t,0,!1,null,null,!1,!1,"",cp);return t._reactRootContainer=c,t[$n]=c.current,as(t.nodeType===8?t.parentNode:t),zr(function(){ol(e,c,n,r)}),c}function ll(t,e,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var u=i;i=function(){var c=Ja(l);u.call(c)}}ol(e,l,t,i)}else l=Gx(n,e,t,i,r);return Ja(l)}Fp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oo(e.pendingLanes);n!==0&&(Lc(e,n|1),It(e,Je()),!(pe&6)&&(zi=Je()+500,_r()))}break;case 13:zr(function(){var r=Gn(t,1);if(r!==null){var i=Tt();cn(r,t,1,i)}}),pd(t,1)}};Fc=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=Tt();cn(e,t,134217728,n)}pd(t,134217728)}};Up=function(t){if(t.tag===13){var e=gr(t),n=Gn(t,e);if(n!==null){var r=Tt();cn(n,t,e,r)}pd(t,e)}};Vp=function(){return xe};$p=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};Wu=function(t,e,n){switch(e){case"input":if(Bu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xa(r);if(!i)throw Error(F(90));gp(r),Bu(r,i)}}}break;case"textarea":vp(t,n);break;case"select":e=n.value,e!=null&&Mi(t,!!n.multiple,e,!1)}};kp=ud;Ep=zr;var Bx={usingClientEntryPoint:!1,Events:[vs,ki,Xa,Sp,wp,ud]},Vo={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ox={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ip(t),t===null?null:t.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||$x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&($o=__REACT_DEVTOOLS_GLOBAL_HOOK__,!$o.isDisabled&&$o.supportsFiber))try{Wa=$o.inject(Ox),Cn=$o}catch{}var $o;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bx;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(e))throw Error(F(200));return Vx(t,e,null,n)};Ut.createRoot=function(t,e){if(!gd(t))throw Error(F(299));var n=!1,r="",i=ag;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=md(t,1,!1,null,null,n,!1,r,i),t[$n]=e.current,as(t.nodeType===8?t.parentNode:t),new hd(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Ip(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return zr(t)};Ut.hydrate=function(t,e,n){if(!al(e))throw Error(F(200));return ll(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!gd(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=ag;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=sg(e,null,t,1,n??null,i,!1,o,l),t[$n]=e.current,as(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new sl(e)};Ut.render=function(t,e,n){if(!al(e))throw Error(F(200));return ll(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!al(t))throw Error(F(40));return t._reactRootContainer?(zr(function(){ll(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ut.unstable_batchedUpdates=ud;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!al(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return ll(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426"});var dg=Mn((GP,cg)=>{"use strict";function ug(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ug)}catch(t){console.error(t)}}ug(),cg.exports=lg()});var mg=Mn(yd=>{"use strict";var fg=dg();yd.createRoot=fg.createRoot,yd.hydrateRoot=fg.hydrateRoot;var BP});var yg=Mn(cl=>{"use strict";var Hx=Ce(),zx=Symbol.for("react.element"),qx=Symbol.for("react.fragment"),Kx=Object.prototype.hasOwnProperty,Jx=Hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wx={key:!0,ref:!0,__self:!0,__source:!0};function gg(t,e,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Kx.call(e,r)&&!Wx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zx,type:t,key:o,ref:l,props:i,_owner:Jx.current}}cl.Fragment=qx;cl.jsx=gg;cl.jsxs=gg});var z=Mn((KP,vg)=>{"use strict";vg.exports=yg()});var Co,Ds,lP,uP,cP,Gt,br,Nn,qv,Kv,Ef,OR,dP,fP,mP,Nf,Af,HR,Xn=Ao(()=>{(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Co||(Co={}));Ds=class extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}},lP=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},uP=t=>{let e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:lP(t),o=()=>i()!=="web",l=m=>{let p=d.get(m);return!!(p?.platforms.has(i())||u(m))},u=m=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(h=>h.name===m)},c=m=>t.console.error(m),d=new Map,f=(m,p={})=>{let h=d.get(m);if(h)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),h.proxy;let g=i(),C=u(m),T,y=async()=>(!T&&g in p?T=typeof p[g]=="function"?T=await p[g]():T=p[g]:e!==null&&!T&&"web"in p&&(T=typeof p.web=="function"?T=await p.web():T=p.web),T),v=(A,N)=>{var U,G;if(C){let le=C?.methods.find(Ne=>N===Ne.name);if(le)return le.rtype==="promise"?Ne=>n.nativePromise(m,N.toString(),Ne):(Ne,Ke)=>n.nativeCallback(m,N.toString(),Ne,Ke);if(A)return(U=A[N])===null||U===void 0?void 0:U.bind(A)}else{if(A)return(G=A[N])===null||G===void 0?void 0:G.bind(A);throw new Ds(`"${m}" plugin is not implemented on ${g}`,Co.Unimplemented)}},x=A=>{let N,U=(...G)=>{let le=y().then(Ne=>{let Ke=v(Ne,A);if(Ke){let me=Ke(...G);return N=me?.remove,me}else throw new Ds(`"${m}.${A}()" is not implemented on ${g}`,Co.Unimplemented)});return A==="addListener"&&(le.remove=async()=>N()),le};return U.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(U,"name",{value:A,writable:!1,configurable:!1}),U},S=x("addListener"),w=x("removeListener"),E=(A,N)=>{let U=S({eventName:A},N),G=async()=>{let Ne=await U;w({eventName:A,callbackId:Ne},N)},le=new Promise(Ne=>U.then(()=>Ne({remove:G})));return le.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await G()},le},k=new Proxy({},{get(A,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?E:S;case"removeListener":return w;default:return x(N)}}});return r[m]=k,d.set(m,{name:m,proxy:k,platforms:new Set([...Object.keys(p),...C?[g]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=m=>m),n.getPlatform=i,n.handleError=c,n.isNativePlatform=o,n.isPluginAvailable=l,n.registerPlugin=f,n.Exception=Ds,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},cP=t=>t.Capacitor=uP(t),Gt=cP(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),br=Gt.registerPlugin,Nn=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);let o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);let l=async()=>this.removeListener(e,n);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(let e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){let i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(n),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Gt.Exception(e,Co.Unimplemented)}unavailable(e="not available"){return new Gt.Exception(e,Co.Unavailable)}async removeListener(e,n){let r=this.listeners[e];if(!r)return;let i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}},qv=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Kv=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),Ef=class extends Nn{async getCookies(){let e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Kv(i).trim(),o=Kv(o).trim(),n[i]=o}),n}async setCookie(e){try{let n=qv(e.key),r=qv(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${o}; ${l};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{let e=document.cookie.split(";")||[];for(let n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}},OR=br("CapacitorCookies",{web:()=>new Ef}),dP=async t=>new Promise((e,n)=>{let r=new FileReader;r.onload=()=>{let i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),fP=(t={})=>{let e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,o,l)=>(i[o]=t[e[l]],i),{})},mP=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{let[o,l]=i,u,c;return Array.isArray(l)?(c="",l.forEach(d=>{u=e?encodeURIComponent(d):d,c+=`${o}=${u}&`}),c.slice(0,-1)):(u=e?encodeURIComponent(l):l,c=`${o}=${u}`),`${r}&${c}`},"").substr(1):null,Nf=(t,e={})=>{let n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=fP(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){let o=new URLSearchParams;for(let[l,u]of Object.entries(t.data||{}))o.set(l,u);n.body=o.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){let o=new FormData;if(t.data instanceof FormData)t.data.forEach((u,c)=>{o.append(c,u)});else for(let u of Object.keys(t.data))o.append(u,t.data[u]);n.body=o;let l=new Headers(n.headers);l.delete("content-type"),n.headers=l}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n},Af=class extends Nn{async request(e){let n=Nf(e,e.webFetchExtra),r=mP(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,n),l=o.headers.get("content-type")||"",{responseType:u="text"}=o.ok?e:{};l.includes("application/json")&&(u="json");let c,d;switch(u){case"arraybuffer":case"blob":d=await o.blob(),c=await dP(d);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}let f={};return o.headers.forEach((m,p)=>{f[p]=m}),{data:c,headers:f,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}},HR=br("CapacitorHttp",{web:()=>new Af})});var Wv={};Gs(Wv,{LocalNotificationsWeb:()=>If});var If,Yv=Ao(()=>{Xn();If=class extends Nn{constructor(){super(...arguments),this.pending=[],this.deliveredNotifications=[],this.hasNotificationSupport=()=>{if(!("Notification"in window)||!Notification.requestPermission)return!1;if(Notification.permission!=="granted")try{new Notification("")}catch(e){if(e.name=="TypeError")return!1}return!0}}async getDeliveredNotifications(){let e=[];for(let n of this.deliveredNotifications){let r={title:n.title,id:parseInt(n.tag),body:n.body};e.push(r)}return{notifications:e}}async removeDeliveredNotifications(e){for(let n of e.notifications){let r=this.deliveredNotifications.find(i=>i.tag===String(n.id));r?.close(),this.deliveredNotifications=this.deliveredNotifications.filter(()=>!r)}}async removeAllDeliveredNotifications(){for(let e of this.deliveredNotifications)e.close();this.deliveredNotifications=[]}async createChannel(){throw this.unimplemented("Not implemented on web.")}async deleteChannel(){throw this.unimplemented("Not implemented on web.")}async listChannels(){throw this.unimplemented("Not implemented on web.")}async schedule(e){if(!this.hasNotificationSupport())throw this.unavailable("Notifications not supported in this browser.");for(let n of e.notifications)this.sendNotification(n);return{notifications:e.notifications.map(n=>({id:n.id}))}}async getPending(){return{notifications:this.pending}}async registerActionTypes(){throw this.unimplemented("Not implemented on web.")}async cancel(e){this.pending=this.pending.filter(n=>!e.notifications.find(r=>r.id===n.id))}async areEnabled(){let{display:e}=await this.checkPermissions();return{value:e==="granted"}}async changeExactNotificationSetting(){throw this.unimplemented("Not implemented on web.")}async checkExactNotificationSetting(){throw this.unimplemented("Not implemented on web.")}async requestPermissions(){if(!this.hasNotificationSupport())throw this.unavailable("Notifications not supported in this browser.");return{display:this.transformNotificationPermission(await Notification.requestPermission())}}async checkPermissions(){if(!this.hasNotificationSupport())throw this.unavailable("Notifications not supported in this browser.");return{display:this.transformNotificationPermission(Notification.permission)}}transformNotificationPermission(e){switch(e){case"granted":return"granted";case"denied":return"denied";default:return"prompt"}}sendPending(){var e;let n=[],r=new Date().getTime();for(let i of this.pending)!((e=i.schedule)===null||e===void 0)&&e.at&&i.schedule.at.getTime()<=r&&(this.buildNotification(i),n.push(i));this.pending=this.pending.filter(i=>!n.find(o=>o===i))}sendNotification(e){var n;if(!((n=e.schedule)===null||n===void 0)&&n.at){let r=e.schedule.at.getTime()-new Date().getTime();this.pending.push(e),setTimeout(()=>{this.sendPending()},r);return}this.buildNotification(e)}buildNotification(e){let n=new Notification(e.title,{body:e.body,tag:String(e.id)});return n.addEventListener("click",this.onClick.bind(this,e),!1),n.addEventListener("show",this.onShow.bind(this,e),!1),n.addEventListener("close",()=>{this.deliveredNotifications=this.deliveredNotifications.filter(()=>!this)},!1),this.deliveredNotifications.push(n),n}onClick(e){let n={actionId:"tap",notification:e};this.notifyListeners("localNotificationActionPerformed",n)}onShow(e){this.notifyListeners("localNotificationReceived",e)}}});var l0={};Gs(l0,{AppWeb:()=>Mf});var Mf,u0=Ao(()=>{Xn();Mf=class extends Nn{constructor(){super(),this.handleVisibilityChange=()=>{let e={isActive:document.hidden!==!0};this.notifyListeners("appStateChange",e),document.hidden?this.notifyListeners("pause",null):this.notifyListeners("resume",null)},document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}exitApp(){throw this.unimplemented("Not implemented on web.")}async getInfo(){throw this.unimplemented("Not implemented on web.")}async getLaunchUrl(){return{url:""}}async getState(){return{isActive:document.hidden!==!0}}async minimizeApp(){throw this.unimplemented("Not implemented on web.")}}});var _o,tr,Rf=Ao(()=>{(function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Library="LIBRARY",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE",t.ExternalCache="EXTERNAL_CACHE",t.LibraryNoCloud="LIBRARY_NO_CLOUD",t.Temporary="TEMPORARY"})(_o||(_o={}));(function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"})(tr||(tr={}))});var f0={};Gs(f0,{FilesystemWeb:()=>Jl});function d0(t){let e=t.split("/").filter(r=>r!=="."),n=[];return e.forEach(r=>{r===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():n.push(r)}),n.join("/")}function PP(t,e){t=d0(t),e=d0(e);let n=t.split("/"),r=e.split("/");return t!==e&&n.every((i,o)=>i===r[o])}var Jl,m0=Ao(()=>{Xn();Rf();Jl=class t extends Nn{constructor(){super(...arguments),this.DB_VERSION=1,this.DB_NAME="Disc",this._writeCmds=["add","put","delete"],this.downloadFile=async e=>{var n,r;let i=Nf(e,e.webFetchExtra),o=await fetch(e.url,i),l;if(!e.progress)l=await o.blob();else if(!o?.body)l=new Blob;else{let c=o.body.getReader(),d=0,f=[],m=o.headers.get("content-type"),p=parseInt(o.headers.get("content-length")||"0",10);for(;;){let{done:C,value:T}=await c.read();if(C)break;f.push(T),d+=T?.length||0;let y={url:e.url,bytes:d,contentLength:p};this.notifyListeners("progress",y)}let h=new Uint8Array(d),g=0;for(let C of f)typeof C>"u"||(h.set(C,g),g+=C.length);l=new Blob([h.buffer],{type:m||void 0})}return{path:(await this.writeFile({path:e.path,directory:(n=e.directory)!==null&&n!==void 0?n:void 0,recursive:(r=e.recursive)!==null&&r!==void 0?r:!1,data:l})).uri,blob:l}}}readFileInChunks(e,n){throw this.unavailable("Method not implemented.")}async initDb(){if(this._db!==void 0)return this._db;if(!("indexedDB"in window))throw this.unavailable("This browser doesn't support IndexedDB");return new Promise((e,n)=>{let r=indexedDB.open(this.DB_NAME,this.DB_VERSION);r.onupgradeneeded=t.doUpgrade,r.onsuccess=()=>{this._db=r.result,e(r.result)},r.onerror=()=>n(r.error),r.onblocked=()=>{console.warn("db blocked")}})}static doUpgrade(e){let r=e.target.result;switch(e.oldVersion){case 0:case 1:default:r.objectStoreNames.contains("FileStorage")&&r.deleteObjectStore("FileStorage"),r.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}}async dbRequest(e,n){let r=this._writeCmds.indexOf(e)!==-1?"readwrite":"readonly";return this.initDb().then(i=>new Promise((o,l)=>{let d=i.transaction(["FileStorage"],r).objectStore("FileStorage")[e](...n);d.onsuccess=()=>o(d.result),d.onerror=()=>l(d.error)}))}async dbIndexRequest(e,n,r){let i=this._writeCmds.indexOf(n)!==-1?"readwrite":"readonly";return this.initDb().then(o=>new Promise((l,u)=>{let m=o.transaction(["FileStorage"],i).objectStore("FileStorage").index(e)[n](...r);m.onsuccess=()=>l(m.result),m.onerror=()=>u(m.error)}))}getPath(e,n){let r=n!==void 0?n.replace(/^[/]+|[/]+$/g,""):"",i="";return e!==void 0&&(i+="/"+e),n!==""&&(i+="/"+r),i}async clear(){(await this.initDb()).transaction(["FileStorage"],"readwrite").objectStore("FileStorage").clear()}async readFile(e){let n=this.getPath(e.directory,e.path),r=await this.dbRequest("get",[n]);if(r===void 0)throw Error("File does not exist.");return{data:r.content?r.content:""}}async writeFile(e){let n=this.getPath(e.directory,e.path),r=e.data,i=e.encoding,o=e.recursive,l=await this.dbRequest("get",[n]);if(l&&l.type==="directory")throw Error("The supplied path is a directory.");let u=n.substr(0,n.lastIndexOf("/"));if(await this.dbRequest("get",[u])===void 0){let m=u.indexOf("/",1);if(m!==-1){let p=u.substr(m);await this.mkdir({path:p,directory:e.directory,recursive:o})}}if(!i&&!(r instanceof Blob)&&(r=r.indexOf(",")>=0?r.split(",")[1]:r,!this.isBase64String(r)))throw Error("The supplied data is not valid base64 content.");let d=Date.now(),f={path:n,folder:u,type:"file",size:r instanceof Blob?r.size:r.length,ctime:d,mtime:d,content:r};return await this.dbRequest("put",[f]),{uri:f.path}}async appendFile(e){let n=this.getPath(e.directory,e.path),r=e.data,i=e.encoding,o=n.substr(0,n.lastIndexOf("/")),l=Date.now(),u=l,c=await this.dbRequest("get",[n]);if(c&&c.type==="directory")throw Error("The supplied path is a directory.");if(await this.dbRequest("get",[o])===void 0){let m=o.indexOf("/",1);if(m!==-1){let p=o.substr(m);await this.mkdir({path:p,directory:e.directory,recursive:!0})}}if(!i&&!this.isBase64String(r))throw Error("The supplied data is not valid base64 content.");if(c!==void 0){if(c.content instanceof Blob)throw Error("The occupied entry contains a Blob object which cannot be appended to.");c.content!==void 0&&!i?r=btoa(atob(c.content)+atob(r)):r=c.content+r,u=c.ctime}let f={path:n,folder:o,type:"file",size:r.length,ctime:u,mtime:l,content:r};await this.dbRequest("put",[f])}async deleteFile(e){let n=this.getPath(e.directory,e.path);if(await this.dbRequest("get",[n])===void 0)throw Error("File does not exist.");if((await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(n)])).length!==0)throw Error("Folder is not empty.");await this.dbRequest("delete",[n])}async mkdir(e){let n=this.getPath(e.directory,e.path),r=e.recursive,i=n.substr(0,n.lastIndexOf("/")),o=(n.match(/\//g)||[]).length,l=await this.dbRequest("get",[i]),u=await this.dbRequest("get",[n]);if(o===1)throw Error("Cannot create Root directory");if(u!==void 0)throw Error("Current directory does already exist.");if(!r&&o!==2&&l===void 0)throw Error("Parent directory must exist");if(r&&o!==2&&l===void 0){let f=i.substr(i.indexOf("/",1));await this.mkdir({path:f,directory:e.directory,recursive:r})}let c=Date.now(),d={path:n,folder:i,type:"directory",size:0,ctime:c,mtime:c};await this.dbRequest("put",[d])}async rmdir(e){let{path:n,directory:r,recursive:i}=e,o=this.getPath(r,n),l=await this.dbRequest("get",[o]);if(l===void 0)throw Error("Folder does not exist.");if(l.type!=="directory")throw Error("Requested path is not a directory");let u=await this.readdir({path:n,directory:r});if(u.files.length!==0&&!i)throw Error("Folder is not empty");for(let c of u.files){let d=`${n}/${c.name}`;(await this.stat({path:d,directory:r})).type==="file"?await this.deleteFile({path:d,directory:r}):await this.rmdir({path:d,directory:r,recursive:i})}await this.dbRequest("delete",[o])}async readdir(e){let n=this.getPath(e.directory,e.path),r=await this.dbRequest("get",[n]);if(e.path!==""&&r===void 0)throw Error("Folder does not exist.");let i=await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(n)]);return{files:await Promise.all(i.map(async l=>{let u=await this.dbRequest("get",[l]);return u===void 0&&(u=await this.dbRequest("get",[l+"/"])),{name:l.substring(n.length+1),type:u.type,size:u.size,ctime:u.ctime,mtime:u.mtime,uri:u.path}}))}}async getUri(e){let n=this.getPath(e.directory,e.path),r=await this.dbRequest("get",[n]);return r===void 0&&(r=await this.dbRequest("get",[n+"/"])),{uri:r?.path||n}}async stat(e){let n=this.getPath(e.directory,e.path),r=await this.dbRequest("get",[n]);if(r===void 0&&(r=await this.dbRequest("get",[n+"/"])),r===void 0)throw Error("Entry does not exist.");return{name:r.path.substring(n.length+1),type:r.type,size:r.size,ctime:r.ctime,mtime:r.mtime,uri:r.path}}async rename(e){await this._copy(e,!0)}async copy(e){return this._copy(e,!1)}async requestPermissions(){return{publicStorage:"granted"}}async checkPermissions(){return{publicStorage:"granted"}}async _copy(e,n=!1){let{toDirectory:r}=e,{to:i,from:o,directory:l}=e;if(!i||!o)throw Error("Both to and from must be provided");r||(r=l);let u=this.getPath(l,o),c=this.getPath(r,i);if(u===c)return{uri:c};if(PP(u,c))throw Error("To path cannot contain the from path");let d;try{d=await this.stat({path:i,directory:r})}catch{let g=i.split("/");g.pop();let C=g.join("/");if(g.length>0&&(await this.stat({path:C,directory:r})).type!=="directory")throw new Error("Parent directory of the to path is a file")}if(d&&d.type==="directory")throw new Error("Cannot overwrite a directory with a file");let f=await this.stat({path:o,directory:l}),m=async(h,g,C)=>{let T=this.getPath(r,h),y=await this.dbRequest("get",[T]);y.ctime=g,y.mtime=C,await this.dbRequest("put",[y])},p=f.ctime?f.ctime:Date.now();switch(f.type){case"file":{let h=await this.readFile({path:o,directory:l});n&&await this.deleteFile({path:o,directory:l});let g;!(h.data instanceof Blob)&&!this.isBase64String(h.data)&&(g=tr.UTF8);let C=await this.writeFile({path:i,directory:r,data:h.data,encoding:g});return n&&await m(i,p,f.mtime),C}case"directory":{if(d)throw Error("Cannot move a directory over an existing object");try{await this.mkdir({path:i,directory:r,recursive:!1}),n&&await m(i,p,f.mtime)}catch{}let h=(await this.readdir({path:o,directory:l})).files;for(let g of h)await this._copy({from:`${o}/${g.name}`,to:`${i}/${g.name}`,directory:l,toDirectory:r},n);n&&await this.rmdir({path:o,directory:l})}}return{uri:c}}isBase64String(e){try{return btoa(atob(e))==e}catch{return!1}}};Jl._debug=!0});var g0=P(Ce(),1),y0=P(mg(),1);var ne=P(Ce(),1);var xs="Character AI";var Ts="https://aistudio.google.com/app/apikey",Vt="gemini-2.5-flash-preview-04-17",vd="aiChatAppSimulatorSettings",Cd="aiChatAppSimulatorNSFW",xd="aiChatAppSimulatorGeminiCustomApiKeys",Td="aiChatAppUserProfile",_d="aiChatApp_characters",Sd="aiChatApp_groups",St="aiChatApp_chatHistory_",_s="aiChatApp_characterSlot_",ul="./assets/default_avatar.png",$e="B\u1EA1n",wt="M\u1ED9t ng\u01B0\u1EDDi d\xF9ng th\xFA v\u1ECB.",pg=`
You are an AI character in a chat application.
Your goal is to convincingly portray the character defined below and engage in a natural, entertaining conversation with the user.
You must adhere to the persona, personality, and response style provided.
Do NOT break character. Do NOT mention you are an AI or a language model.
Focus on providing an immersive chat experience.
Keep your responses concise and conversational, suitable for a chat interface, unless the character's personality dictates otherwise.
`,Ji={enabled:!1,imageUrl:"",blur:0,opacity:.25},Wi={blue:{name:"Vibrant Blue",primary:"#3b82f6",secondary:"#818cf8"},orange:{name:"Sunset Orange",primary:"#f97316",secondary:"#f59e0b"},green:{name:"Minty Green",primary:"#10b981",secondary:"#14b8a6"},rose:{name:"Crimson Rose",primary:"#f43f5e",secondary:"#ec4899"},purple:{name:"Royal Purple",primary:"#8b5cf6",secondary:"#a78bfa"},yellow:{name:"Golden Yellow",primary:"#facc15",secondary:"#fbbf24"}},hg={primary:"#3b82f6",secondary:"#818cf8"};var Nr=P(Ce(),1);var Yi=P(Ce(),1),Tn=P(z(),1),Yx=Yi.default.memo(({isOpen:t,onClose:e,title:n,children:r,size:i="md",footer:o,containerClass:l=""})=>{let[u,c]=(0,Yi.useState)(!1);if((0,Yi.useEffect)(()=>{let g=null;if(t)c(!0),g=document.body.style.overflow,document.body.style.overflow="hidden";else{let C=setTimeout(()=>{c(!1),document.querySelectorAll(".fixed.inset-0.z-\\[100\\].opacity-100").length>1||(document.body.style.overflow=g||"")},300);return()=>clearTimeout(C)}return()=>{document.querySelectorAll(".fixed.inset-0.z-\\[100\\].opacity-100").length>0||(document.body.style.overflow=g||"")}},[t]),!u&&!t)return null;let d="",f="max-h-[85vh]";switch(i){case"sm":d="max-w-sm";break;case"md":d="max-w-md";break;case"lg":d="max-w-lg";break;case"xl":d="max-w-xl";break;case"2xl":d="max-w-2xl";break;case"3xl":d="max-w-3xl";break;case"full":d="w-full h-full",f="h-full max-h-full rounded-none sm:rounded-xl sm:h-[90vh] sm:max-h-[90vh]";break;default:d="max-w-md"}let m=t?"animate-fadeIn":"animate-fadeOut",p=i==="full"?"p-0 sm:p-3":"p-3",h=n&&n.trim()!=="";return(0,Tn.jsx)("div",{className:`fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm ${p} transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":h?"modal-title":void 0,children:(0,Tn.jsxs)("div",{className:`bg-card-light dark:bg-card-dark rounded-xl shadow-xl w-full ${d} ${f} flex flex-col overflow-hidden ${m} ${l}`,onClick:g=>g.stopPropagation(),children:[h&&(0,Tn.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-border-light dark:border-border-dark flex-shrink-0",children:[" ",(0,Tn.jsx)("h3",{id:"modal-title",className:"text-lg sm:text-xl font-semibold text-text-light dark:text-text-dark",children:n})," ",(0,Tn.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors rounded-full p-1.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary","aria-label":"Close modal",children:(0,Tn.jsx)("i",{className:"fas fa-times fa-lg"})})]}),(0,Tn.jsxs)("div",{className:`overflow-y-auto flex-grow custom-scrollbar ${h?"p-3 sm:p-4":l?"":"p-3 sm:p-4"}`,children:[" ",r]}),o&&(0,Tn.jsxs)("div",{className:"border-t border-border-light dark:border-border-dark flex-shrink-0 p-3 sm:p-4",children:[" ",o]})]})})}),Te=Yx;var Cg=P(Ce(),1),Sr=P(z(),1),Qx=Cg.default.memo(({children:t,variant:e="primary",size:n="md",leftIcon:r,rightIcon:i,isLoading:o=!1,fullWidth:l=!1,className:u="",...c})=>{let d=`font-semibold rounded-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 
                     dark:focus-visible:ring-offset-background-dark
                     transition-all duration-200 ease-in-out flex items-center justify-center
                     disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none disabled:transform-none`,f="";switch(e){case"primary":f=`bg-primary hover:bg-primary-dark text-white
                     dark:bg-primary-dark dark:hover:bg-primary
                     shadow-lg hover:shadow-primary/40 dark:hover:shadow-primary-light/30
                     focus-visible:ring-primary dark:focus-visible:ring-primary-light`;break;case"secondary":f=`bg-secondary hover:bg-secondary-dark text-white
                     dark:bg-secondary-dark dark:hover:bg-secondary
                     shadow-lg hover:shadow-secondary/40 dark:hover:shadow-secondary-light/30
                     focus-visible:ring-secondary dark:focus-visible:ring-secondary-light`;break;case"danger":f=`bg-error-DEFAULT hover:bg-error-dark text-white 
                     shadow-lg hover:shadow-error-DEFAULT/40
                     focus-visible:ring-error-DEFAULT`;break;case"success":f=`bg-success-DEFAULT hover:bg-success-dark text-white
                      shadow-lg hover:shadow-success-DEFAULT/40
                      focus-visible:ring-success-DEFAULT`;break;case"ghost":f=`bg-transparent hover:bg-primary/10 dark:hover:bg-primary-light/10 
                     text-primary dark:text-primary-light focus-visible:ring-primary`;break;case"outline":f=`border-2 border-primary text-primary hover:bg-primary hover:text-white 
                     dark:border-primary-light dark:text-primary-light 
                     dark:hover:bg-primary-light dark:hover:text-card-dark 
                     focus-visible:ring-primary shadow-sm hover:shadow-md`;break}let m="",p="text-base";switch(n){case"xs":m="px-2.5 py-1 text-xs",p="text-xs";break;case"sm":m="px-3 py-1.5 text-sm",p="text-sm";break;case"md":m="px-5 py-2.5 text-base",p="text-base";break;case"lg":m="px-6 py-3 text-lg",p="text-lg";break}return(0,Sr.jsxs)("button",{className:`${d} ${f} ${m} ${l?"w-full":""} ${u} transform hover:scale-[1.03] active:scale-[0.98]`,disabled:o||c.disabled,...c,children:[o&&(0,Sr.jsxs)("svg",{className:`animate-spin h-5 w-5 ${e==="primary"||e==="secondary"||e==="danger"||e==="success"?"text-white":"text-primary dark:text-primary-light"}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Sr.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Sr.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r&&!o&&(0,Sr.jsx)("span",{className:`mr-2 ${p}`,children:r}),!o&&t,i&&!o&&(0,Sr.jsx)("span",{className:`ml-2 ${p}`,children:i})]})}),H=Qx;var xg=P(Ce(),1),Hn=P(z(),1),Zx=xg.default.memo(({label:t,id:e,error:n,className:r="",wrapperClass:i="",leftIcon:o,rightIcon:l,...u})=>{let c=`block w-full px-3 py-2.5 border rounded-lg shadow-sm focus:outline-none sm:text-sm 
                     transition-colors duration-200 ease-in-out bg-transparent`,d=`border-gray-300 dark:border-gray-600 
                       text-gray-900 dark:text-gray-100 
                       focus:ring-2 focus:ring-primary/60 focus:border-primary 
                       dark:focus:ring-primary-light/60 dark:focus:border-primary-light 
                       placeholder-gray-400 dark:placeholder-gray-500`,f=`border-red-500 text-red-600 focus:ring-2 focus:ring-red-500/50 focus:border-red-500
                      placeholder-red-400 dark:placeholder-red-500`,m=!!o,p=!!l;return(0,Hn.jsxs)("div",{className:`mb-4 ${i}`,children:[t&&(0,Hn.jsx)("label",{htmlFor:e,className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:t}),(0,Hn.jsxs)("div",{className:"relative",children:[m&&(0,Hn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 dark:text-gray-500",children:o}),(0,Hn.jsx)("input",{id:e,className:`${c} ${n?f:d} ${m?"pl-10":""} ${p?"pr-10":""} ${r}`,...u}),p&&(0,Hn.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 dark:text-gray-500",children:l})]}),n&&(0,Hn.jsx)("p",{className:"mt-1.5 text-xs text-red-500 dark:text-red-400",children:n})]})}),je=Zx;var wd=P(Ce(),1),Wt=P(z(),1),Xx=wd.default.memo(({name:t,options:e,selectedValue:n,onChange:r,label:i,inline:o=!1,wrapperClass:l=""})=>{let u=wd.default.useId();return(0,Wt.jsxs)("div",{className:`mb-4 ${l}`,children:[i&&(0,Wt.jsx)("legend",{className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:i}),(0,Wt.jsx)("div",{className:`${o?"flex flex-wrap items-center gap-x-4 gap-y-2":"space-y-2"}`,children:e.map(c=>(0,Wt.jsxs)("label",{htmlFor:`${u}-${c.value}`,className:"flex items-start group cursor-pointer ",children:[(0,Wt.jsx)("input",{id:`${u}-${c.value}`,name:t,type:"radio",value:c.value,checked:n===c.value,onChange:d=>r(d.target.value),className:"sr-only peer"}),(0,Wt.jsx)("div",{className:`relative flex-shrink-0 flex items-center justify-center w-5 h-5 mt-0.5 rounded-full border-2 border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-700
                           transition-all duration-200 ease-in-out
                           group-hover:border-primary/70 dark:group-hover:border-primary-light/70
                           peer-focus-visible:ring-2 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-card-light dark:peer-focus-visible:ring-offset-card-dark peer-focus-visible:ring-primary
                           peer-checked:border-primary dark:peer-checked:border-primary-light`,children:(0,Wt.jsx)("div",{className:`w-2.5 h-2.5 rounded-full bg-primary dark:bg-primary-light
                                transition-transform duration-200 ease-in-out
                                ${n===c.value?"scale-100":"scale-0"}`})}),(0,Wt.jsxs)("div",{className:"ml-2.5 text-sm",children:[(0,Wt.jsx)("span",{className:"font-medium text-text-light dark:text-text-dark",children:c.label}),c.description&&(0,Wt.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:c.description})]})]},c.value))})]})}),Qi=Xx;var it=P(Ce(),1);var ye={};Gs(ye,{BRAND:()=>wT,DIRTY:()=>Jr,EMPTY_PATH:()=>nT,INVALID:()=>te,NEVER:()=>l_,OK:()=>yt,ParseStatus:()=>dt,Schema:()=>ue,ZodAny:()=>Er,ZodArray:()=>Jn,ZodBigInt:()=>Yr,ZodBoolean:()=>Qr,ZodBranded:()=>ws,ZodCatch:()=>ai,ZodDate:()=>Zr,ZodDefault:()=>si,ZodDiscriminatedUnion:()=>ml,ZodEffects:()=>Zt,ZodEnum:()=>ii,ZodError:()=>bt,ZodFirstPartyTypeKind:()=>re,ZodFunction:()=>hl,ZodIntersection:()=>ti,ZodIssueCode:()=>R,ZodLazy:()=>ni,ZodLiteral:()=>ri,ZodMap:()=>no,ZodNaN:()=>io,ZodNativeEnum:()=>oi,ZodNever:()=>fn,ZodNull:()=>jr,ZodNullable:()=>wn,ZodNumber:()=>Wr,ZodObject:()=>Pt,ZodOptional:()=>Yt,ZodParsedType:()=>q,ZodPipeline:()=>ks,ZodPromise:()=>Ar,ZodReadonly:()=>li,ZodRecord:()=>pl,ZodSchema:()=>ue,ZodSet:()=>ro,ZodString:()=>kr,ZodSymbol:()=>eo,ZodTransformer:()=>Zt,ZodTuple:()=>Sn,ZodType:()=>ue,ZodUndefined:()=>Xr,ZodUnion:()=>ei,ZodUnknown:()=>Kn,ZodVoid:()=>to,addIssueToContext:()=>O,any:()=>RT,array:()=>UT,bigint:()=>NT,boolean:()=>Pg,coerce:()=>a_,custom:()=>Ng,date:()=>IT,datetimeRegex:()=>Eg,defaultErrorMap:()=>zn,discriminatedUnion:()=>BT,effect:()=>jT,enum:()=>QT,function:()=>JT,getErrorMap:()=>Zi,getParsedType:()=>_n,instanceof:()=>ET,intersection:()=>OT,isAborted:()=>dl,isAsync:()=>Xi,isDirty:()=>fl,isValid:()=>wr,late:()=>kT,lazy:()=>WT,literal:()=>YT,makeIssue:()=>Ss,map:()=>qT,nan:()=>AT,nativeEnum:()=>ZT,never:()=>LT,null:()=>MT,nullable:()=>t_,number:()=>bg,object:()=>VT,objectUtil:()=>kd,oboolean:()=>s_,onumber:()=>o_,optional:()=>e_,ostring:()=>i_,pipeline:()=>r_,preprocess:()=>n_,promise:()=>XT,quotelessJson:()=>jx,record:()=>zT,set:()=>KT,setErrorMap:()=>tT,strictObject:()=>$T,string:()=>Ig,symbol:()=>bT,transformer:()=>jT,tuple:()=>HT,undefined:()=>PT,union:()=>GT,unknown:()=>DT,util:()=>de,void:()=>FT});var de;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{let o={};for(let l of i)o[l]=l;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(let u of o)l[u]=i[u];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.push(l);return o},t.find=(i,o)=>{for(let l of i)if(o(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(de||(de={}));var kd;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(kd||(kd={}));var q=de.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_n=t=>{switch(typeof t){case"undefined":return q.undefined;case"string":return q.string;case"number":return Number.isNaN(t)?q.nan:q.number;case"boolean":return q.boolean;case"function":return q.function;case"bigint":return q.bigint;case"symbol":return q.symbol;case"object":return Array.isArray(t)?q.array:t===null?q.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?q.promise:typeof Map<"u"&&t instanceof Map?q.map:typeof Set<"u"&&t instanceof Set?q.set:typeof Date<"u"&&t instanceof Date?q.date:q.object;default:return q.unknown}};var R=de.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jx=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),bt=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(o){return o.message},r={_errors:[]},i=o=>{for(let l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,c=0;for(;c<l.path.length;){let d=l.path[c];c===l.path.length-1?(u[d]=u[d]||{_errors:[]},u[d]._errors.push(n(l))):u[d]=u[d]||{_errors:[]},u=u[d],c++}}};return i(this),r}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,de.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},r=[];for(let i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};bt.create=t=>new bt(t);var eT=(t,e)=>{let n;switch(t.code){case R.invalid_type:t.received===q.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case R.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,de.jsonStringifyReplacer)}`;break;case R.unrecognized_keys:n=`Unrecognized key(s) in object: ${de.joinValues(t.keys,", ")}`;break;case R.invalid_union:n="Invalid input";break;case R.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${de.joinValues(t.options)}`;break;case R.invalid_enum_value:n=`Invalid enum value. Expected ${de.joinValues(t.options)}, received '${t.received}'`;break;case R.invalid_arguments:n="Invalid function arguments";break;case R.invalid_return_type:n="Invalid function return type";break;case R.invalid_date:n="Invalid date";break;case R.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:de.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case R.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case R.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case R.custom:n="Invalid input";break;case R.invalid_intersection_types:n="Intersection results could not be merged";break;case R.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case R.not_finite:n="Number must be finite";break;default:n=e.defaultError,de.assertNever(t)}return{message:n}},zn=eT;var Tg=zn;function tT(t){Tg=t}function Zi(){return Tg}var Ss=t=>{let{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],l={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let u="",c=r.filter(d=>!!d).slice().reverse();for(let d of c)u=d(l,{data:e,defaultError:u}).message;return{...i,path:o,message:u}},nT=[];function O(t,e){let n=Zi(),r=Ss({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===zn?void 0:zn].filter(i=>!!i)});t.common.issues.push(r)}var dt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let i of n){if(i.status==="aborted")return te;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let i of n){let o=await i.key,l=await i.value;r.push({key:o,value:l})}return t.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let i of n){let{key:o,value:l}=i;if(o.status==="aborted"||l.status==="aborted")return te;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[o.value]=l.value)}return{status:e.value,value:r}}},te=Object.freeze({status:"aborted"}),Jr=t=>({status:"dirty",value:t}),yt=t=>({status:"valid",value:t}),dl=t=>t.status==="aborted",fl=t=>t.status==="dirty",wr=t=>t.status==="valid",Xi=t=>typeof Promise<"u"&&t instanceof Promise;var Z;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Z||(Z={}));var Qt=class{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},_g=(t,e)=>{if(wr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new bt(t.common.issues);return this._error=n,this._error}}};function se(t){if(!t)return{};let{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{let{message:c}=t;return l.code==="invalid_enum_value"?{message:c??u.defaultError}:typeof u.data>"u"?{message:c??r??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:c??n??u.defaultError}},description:i}}var ue=class{get description(){return this._def.description}_getType(e){return _n(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:_n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dt,ctx:{common:e.parent.common,data:e.data,parsedType:_n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if(Xi(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){let n=this._parse(e);return Promise.resolve(n)}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){let r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_n(e)},i=this._parseSync({data:e,path:r.path,parent:r});return _g(r,i)}"~validate"(e){let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_n(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:n});return wr(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>wr(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_n(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(Xi(i)?i:Promise.resolve(i));return _g(r,o)}refine(e,n){let r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{let l=e(i),u=()=>o.addIssue({code:R.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Zt({schema:this,typeName:re.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Yt.create(this,this._def)}nullable(){return wn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jn.create(this)}promise(){return Ar.create(this,this._def)}or(e){return ei.create([this,e],this._def)}and(e){return ti.create(this,e,this._def)}transform(e){return new Zt({...se(this._def),schema:this,typeName:re.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let n=typeof e=="function"?e:()=>e;return new si({...se(this._def),innerType:this,defaultValue:n,typeName:re.ZodDefault})}brand(){return new ws({typeName:re.ZodBranded,type:this,...se(this._def)})}catch(e){let n=typeof e=="function"?e:()=>e;return new ai({...se(this._def),innerType:this,catchValue:n,typeName:re.ZodCatch})}describe(e){let n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ks.create(this,e)}readonly(){return li.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},rT=/^c[^\s-]{8,}$/i,iT=/^[0-9a-z]+$/,oT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,sT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aT=/^[a-z0-9_-]{21}$/i,lT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,uT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ed,fT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,pT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,wg="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vT=new RegExp(`^${wg}$`);function kg(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function CT(t){return new RegExp(`^${kg(t)}$`)}function Eg(t){let e=`${wg}T${kg(t)}`,n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function xT(t,e){return!!((e==="v4"||!e)&&fT.test(t)||(e==="v6"||!e)&&pT.test(t))}function TT(t,e){if(!lT.test(t))return!1;try{let[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function _T(t,e){return!!((e==="v4"||!e)&&mT.test(t)||(e==="v6"||!e)&&hT.test(t))}var kr=class t extends ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==q.string){let o=this._getOrReturnCtx(e);return O(o,{code:R.invalid_type,expected:q.string,received:o.parsedType}),te}let r=new dt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),O(i,{code:R.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),O(i,{code:R.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){let l=e.data.length>o.value,u=e.data.length<o.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?O(i,{code:R.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&O(i,{code:R.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")cT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"email",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Ed||(Ed=new RegExp(dT,"u")),Ed.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"emoji",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")sT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"uuid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")aT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"nanoid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")rT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"cuid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")iT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"cuid2",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")oT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"ulid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),O(i,{validation:"url",code:R.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"regex",code:R.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),O(i,{code:R.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),O(i,{code:R.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),O(i,{code:R.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Eg(o).test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{code:R.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?vT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{code:R.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?CT(o).test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{code:R.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?uT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"duration",code:R.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?xT(e.data,o.version)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"ip",code:R.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?TT(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"jwt",code:R.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?_T(e.data,o.version)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"cidr",code:R.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?gT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"base64",code:R.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?yT.test(e.data)||(i=this._getOrReturnCtx(e,i),O(i,{validation:"base64url",code:R.invalid_string,message:o.message}),r.dirty()):de.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:R.invalid_string,...Z.errToObj(r)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Z.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Z.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Z.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Z.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Z.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Z.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Z.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Z.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Z.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Z.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Z.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Z.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Z.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Z.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Z.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Z.errToObj(n)})}nonempty(e){return this.min(1,Z.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};kr.create=t=>new kr({checks:[],typeName:re.ZodString,coerce:t?.coerce??!1,...se(t)});function ST(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return o%l/10**i}var Wr=class t extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==q.number){let o=this._getOrReturnCtx(e);return O(o,{code:R.invalid_type,expected:q.number,received:o.parsedType}),te}let r,i=new dt;for(let o of this._def.checks)o.kind==="int"?de.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),O(r,{code:R.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),O(r,{code:R.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),O(r,{code:R.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?ST(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),O(r,{code:R.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),O(r,{code:R.not_finite,message:o.message}),i.dirty()):de.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Z.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Z.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Z.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Z.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Z.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Z.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Z.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&de.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};Wr.create=t=>new Wr({checks:[],typeName:re.ZodNumber,coerce:t?.coerce||!1,...se(t)});var Yr=class t extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==q.bigint)return this._getInvalidInput(e);let r,i=new dt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),O(r,{code:R.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),O(r,{code:R.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),O(r,{code:R.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):de.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return O(n,{code:R.invalid_type,expected:q.bigint,received:n.parsedType}),te}gte(e,n){return this.setLimit("min",e,!0,Z.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Z.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Z.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Z.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Z.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Z.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Z.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};Yr.create=t=>new Yr({checks:[],typeName:re.ZodBigInt,coerce:t?.coerce??!1,...se(t)});var Qr=class extends ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==q.boolean){let r=this._getOrReturnCtx(e);return O(r,{code:R.invalid_type,expected:q.boolean,received:r.parsedType}),te}return yt(e.data)}};Qr.create=t=>new Qr({typeName:re.ZodBoolean,coerce:t?.coerce||!1,...se(t)});var Zr=class t extends ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==q.date){let o=this._getOrReturnCtx(e);return O(o,{code:R.invalid_type,expected:q.date,received:o.parsedType}),te}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return O(o,{code:R.invalid_date}),te}let r=new dt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),O(i,{code:R.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),O(i,{code:R.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):de.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Z.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Z.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};Zr.create=t=>new Zr({checks:[],coerce:t?.coerce||!1,typeName:re.ZodDate,...se(t)});var eo=class extends ue{_parse(e){if(this._getType(e)!==q.symbol){let r=this._getOrReturnCtx(e);return O(r,{code:R.invalid_type,expected:q.symbol,received:r.parsedType}),te}return yt(e.data)}};eo.create=t=>new eo({typeName:re.ZodSymbol,...se(t)});var Xr=class extends ue{_parse(e){if(this._getType(e)!==q.undefined){let r=this._getOrReturnCtx(e);return O(r,{code:R.invalid_type,expected:q.undefined,received:r.parsedType}),te}return yt(e.data)}};Xr.create=t=>new Xr({typeName:re.ZodUndefined,...se(t)});var jr=class extends ue{_parse(e){if(this._getType(e)!==q.null){let r=this._getOrReturnCtx(e);return O(r,{code:R.invalid_type,expected:q.null,received:r.parsedType}),te}return yt(e.data)}};jr.create=t=>new jr({typeName:re.ZodNull,...se(t)});var Er=class extends ue{constructor(){super(...arguments),this._any=!0}_parse(e){return yt(e.data)}};Er.create=t=>new Er({typeName:re.ZodAny,...se(t)});var Kn=class extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return yt(e.data)}};Kn.create=t=>new Kn({typeName:re.ZodUnknown,...se(t)});var fn=class extends ue{_parse(e){let n=this._getOrReturnCtx(e);return O(n,{code:R.invalid_type,expected:q.never,received:n.parsedType}),te}};fn.create=t=>new fn({typeName:re.ZodNever,...se(t)});var to=class extends ue{_parse(e){if(this._getType(e)!==q.undefined){let r=this._getOrReturnCtx(e);return O(r,{code:R.invalid_type,expected:q.void,received:r.parsedType}),te}return yt(e.data)}};to.create=t=>new to({typeName:re.ZodVoid,...se(t)});var Jn=class t extends ue{_parse(e){let{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==q.array)return O(n,{code:R.invalid_type,expected:q.array,received:n.parsedType}),te;if(i.exactLength!==null){let l=n.data.length>i.exactLength.value,u=n.data.length<i.exactLength.value;(l||u)&&(O(n,{code:l?R.too_big:R.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(O(n,{code:R.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(O(n,{code:R.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>i.type._parseAsync(new Qt(n,l,n.path,u)))).then(l=>dt.mergeArray(r,l));let o=[...n.data].map((l,u)=>i.type._parseSync(new Qt(n,l,n.path,u)));return dt.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new t({...this._def,minLength:{value:e,message:Z.toString(n)}})}max(e,n){return new t({...this._def,maxLength:{value:e,message:Z.toString(n)}})}length(e,n){return new t({...this._def,exactLength:{value:e,message:Z.toString(n)}})}nonempty(e){return this.min(1,e)}};Jn.create=(t,e)=>new Jn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:re.ZodArray,...se(e)});function ji(t){if(t instanceof Pt){let e={};for(let n in t.shape){let r=t.shape[n];e[n]=Yt.create(ji(r))}return new Pt({...t._def,shape:()=>e})}else return t instanceof Jn?new Jn({...t._def,type:ji(t.element)}):t instanceof Yt?Yt.create(ji(t.unwrap())):t instanceof wn?wn.create(ji(t.unwrap())):t instanceof Sn?Sn.create(t.items.map(e=>ji(e))):t}var Pt=class t extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=de.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==q.object){let d=this._getOrReturnCtx(e);return O(d,{code:R.invalid_type,expected:q.object,received:d.parsedType}),te}let{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof fn&&this._def.unknownKeys==="strip"))for(let d in i.data)l.includes(d)||u.push(d);let c=[];for(let d of l){let f=o[d],m=i.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Qt(i,m,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof fn){let d=this._def.unknownKeys;if(d==="passthrough")for(let f of u)c.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(d==="strict")u.length>0&&(O(i,{code:R.unrecognized_keys,keys:u}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let f of u){let m=i.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Qt(i,m,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let d=[];for(let f of c){let m=await f.key,p=await f.value;d.push({key:m,value:p,alwaysSet:f.alwaysSet})}return d}).then(d=>dt.mergeObjectSync(r,d)):dt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Z.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{let i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:Z.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:re.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let n={};for(let r of de.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new t({...this._def,shape:()=>n})}omit(e){let n={};for(let r of de.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new t({...this._def,shape:()=>n})}deepPartial(){return ji(this)}partial(e){let n={};for(let r of de.objectKeys(this.shape)){let i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new t({...this._def,shape:()=>n})}required(e){let n={};for(let r of de.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Yt;)o=o._def.innerType;n[r]=o}return new t({...this._def,shape:()=>n})}keyof(){return Ag(de.objectKeys(this.shape))}};Pt.create=(t,e)=>new Pt({shape:()=>t,unknownKeys:"strip",catchall:fn.create(),typeName:re.ZodObject,...se(e)});Pt.strictCreate=(t,e)=>new Pt({shape:()=>t,unknownKeys:"strict",catchall:fn.create(),typeName:re.ZodObject,...se(e)});Pt.lazycreate=(t,e)=>new Pt({shape:t,unknownKeys:"strip",catchall:fn.create(),typeName:re.ZodObject,...se(e)});var ei=class extends ue{_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(let u of o)if(u.result.status==="valid")return u.result;for(let u of o)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;let l=o.map(u=>new bt(u.ctx.common.issues));return O(n,{code:R.invalid_union,unionErrors:l}),te}if(n.common.async)return Promise.all(r.map(async o=>{let l={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(i);{let o,l=[];for(let c of r){let d={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;let u=l.map(c=>new bt(c));return O(n,{code:R.invalid_union,unionErrors:u}),te}}get options(){return this._def.options}};ei.create=(t,e)=>new ei({options:t,typeName:re.ZodUnion,...se(e)});var qn=t=>t instanceof ni?qn(t.schema):t instanceof Zt?qn(t.innerType()):t instanceof ri?[t.value]:t instanceof ii?t.options:t instanceof oi?de.objectValues(t.enum):t instanceof si?qn(t._def.innerType):t instanceof Xr?[void 0]:t instanceof jr?[null]:t instanceof Yt?[void 0,...qn(t.unwrap())]:t instanceof wn?[null,...qn(t.unwrap())]:t instanceof ws||t instanceof li?qn(t.unwrap()):t instanceof ai?qn(t._def.innerType):[],ml=class t extends ue{_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==q.object)return O(n,{code:R.invalid_type,expected:q.object,received:n.parsedType}),te;let r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(O(n,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),te)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let i=new Map;for(let o of n){let l=qn(o.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of l){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,o)}}return new t({typeName:re.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...se(r)})}};function Ad(t,e){let n=_n(t),r=_n(e);if(t===e)return{valid:!0,data:t};if(n===q.object&&r===q.object){let i=de.objectKeys(e),o=de.objectKeys(t).filter(u=>i.indexOf(u)!==-1),l={...t,...e};for(let u of o){let c=Ad(t[u],e[u]);if(!c.valid)return{valid:!1};l[u]=c.data}return{valid:!0,data:l}}else if(n===q.array&&r===q.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let l=t[o],u=e[o],c=Ad(l,u);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===q.date&&r===q.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ti=class extends ue{_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=(o,l)=>{if(dl(o)||dl(l))return te;let u=Ad(o.value,l.value);return u.valid?((fl(o)||fl(l))&&n.dirty(),{status:n.value,value:u.data}):(O(r,{code:R.invalid_intersection_types}),te)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,l])=>i(o,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};ti.create=(t,e,n)=>new ti({left:t,right:e,typeName:re.ZodIntersection,...se(n)});var Sn=class t extends ue{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.array)return O(r,{code:R.invalid_type,expected:q.array,received:r.parsedType}),te;if(r.data.length<this._def.items.length)return O(r,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),te;!this._def.rest&&r.data.length>this._def.items.length&&(O(r,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let o=[...r.data].map((l,u)=>{let c=this._def.items[u]||this._def.rest;return c?c._parse(new Qt(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(o).then(l=>dt.mergeArray(n,l)):dt.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Sn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sn({items:t,typeName:re.ZodTuple,rest:null,...se(e)})};var pl=class t extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.object)return O(r,{code:R.invalid_type,expected:q.object,received:r.parsedType}),te;let i=[],o=this._def.keyType,l=this._def.valueType;for(let u in r.data)i.push({key:o._parse(new Qt(r,u,r.path,u)),value:l._parse(new Qt(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?dt.mergeObjectAsync(n,i):dt.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ue?new t({keyType:e,valueType:n,typeName:re.ZodRecord,...se(r)}):new t({keyType:kr.create(),valueType:e,typeName:re.ZodRecord,...se(n)})}},no=class extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.map)return O(r,{code:R.invalid_type,expected:q.map,received:r.parsedType}),te;let i=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([u,c],d)=>({key:i._parse(new Qt(r,u,r.path,[d,"key"])),value:o._parse(new Qt(r,c,r.path,[d,"value"]))}));if(r.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let c of l){let d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return te;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(d.value,f.value)}return{status:n.value,value:u}})}else{let u=new Map;for(let c of l){let d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return te;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(d.value,f.value)}return{status:n.value,value:u}}}};no.create=(t,e,n)=>new no({valueType:e,keyType:t,typeName:re.ZodMap,...se(n)});var ro=class t extends ue{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==q.set)return O(r,{code:R.invalid_type,expected:q.set,received:r.parsedType}),te;let i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(O(r,{code:R.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(O(r,{code:R.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let o=this._def.valueType;function l(c){let d=new Set;for(let f of c){if(f.status==="aborted")return te;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}let u=[...r.data.values()].map((c,d)=>o._parse(new Qt(r,c,r.path,d)));return r.common.async?Promise.all(u).then(c=>l(c)):l(u)}min(e,n){return new t({...this._def,minSize:{value:e,message:Z.toString(n)}})}max(e,n){return new t({...this._def,maxSize:{value:e,message:Z.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};ro.create=(t,e)=>new ro({valueType:t,minSize:null,maxSize:null,typeName:re.ZodSet,...se(e)});var hl=class t extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==q.function)return O(n,{code:R.invalid_type,expected:q.function,received:n.parsedType}),te;function r(u,c){return Ss({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Zi(),zn].filter(d=>!!d),issueData:{code:R.invalid_arguments,argumentsError:c}})}function i(u,c){return Ss({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Zi(),zn].filter(d=>!!d),issueData:{code:R.invalid_return_type,returnTypeError:c}})}let o={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof Ar){let u=this;return yt(async function(...c){let d=new bt([]),f=await u._def.args.parseAsync(c,o).catch(h=>{throw d.addIssue(r(c,h)),d}),m=await Reflect.apply(l,this,f);return await u._def.returns._def.type.parseAsync(m,o).catch(h=>{throw d.addIssue(i(m,h)),d})})}else{let u=this;return yt(function(...c){let d=u._def.args.safeParse(c,o);if(!d.success)throw new bt([r(c,d.error)]);let f=Reflect.apply(l,this,d.data),m=u._def.returns.safeParse(f,o);if(!m.success)throw new bt([i(f,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Sn.create(e).rest(Kn.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new t({args:e||Sn.create([]).rest(Kn.create()),returns:n||Kn.create(),typeName:re.ZodFunction,...se(r)})}},ni=class extends ue{get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};ni.create=(t,e)=>new ni({getter:t,typeName:re.ZodLazy,...se(e)});var ri=class extends ue{_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return O(n,{received:n.data,code:R.invalid_literal,expected:this._def.value}),te}return{status:"valid",value:e.data}}get value(){return this._def.value}};ri.create=(t,e)=>new ri({value:t,typeName:re.ZodLiteral,...se(e)});function Ag(t,e){return new ii({values:t,typeName:re.ZodEnum,...se(e)})}var ii=class t extends ue{_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),r=this._def.values;return O(n,{expected:de.joinValues(r),received:n.parsedType,code:R.invalid_type}),te}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return O(n,{received:n.data,code:R.invalid_enum_value,options:r}),te}return yt(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return t.create(e,{...this._def,...n})}exclude(e,n=this._def){return t.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};ii.create=Ag;var oi=class extends ue{_parse(e){let n=de.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==q.string&&r.parsedType!==q.number){let i=de.objectValues(n);return O(r,{expected:de.joinValues(i),received:r.parsedType,code:R.invalid_type}),te}if(this._cache||(this._cache=new Set(de.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=de.objectValues(n);return O(r,{received:r.data,code:R.invalid_enum_value,options:i}),te}return yt(e.data)}get enum(){return this._def.values}};oi.create=(t,e)=>new oi({values:t,typeName:re.ZodNativeEnum,...se(e)});var Ar=class extends ue{unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==q.promise&&n.common.async===!1)return O(n,{code:R.invalid_type,expected:q.promise,received:n.parsedType}),te;let r=n.parsedType===q.promise?n.data:Promise.resolve(n.data);return yt(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}};Ar.create=(t,e)=>new Ar({type:t,typeName:re.ZodPromise,...se(e)});var Zt=class extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===re.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:l=>{O(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let l=i.transform(r.data,o);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return te;let c=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return c.status==="aborted"?te:c.status==="dirty"?Jr(c.value):n.value==="dirty"?Jr(c.value):c});{if(n.value==="aborted")return te;let u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?te:u.status==="dirty"?Jr(u.value):n.value==="dirty"?Jr(u.value):u}}if(i.type==="refinement"){let l=u=>{let c=i.refinement(u,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){let u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?te:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?te:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(r.common.async===!1){let l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!wr(l))return te;let u=i.transform(l.value,o);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>wr(l)?Promise.resolve(i.transform(l.value,o)).then(u=>({status:n.value,value:u})):te);de.assertNever(i)}};Zt.create=(t,e,n)=>new Zt({schema:t,typeName:re.ZodEffects,effect:e,...se(n)});Zt.createWithPreprocess=(t,e,n)=>new Zt({schema:e,effect:{type:"preprocess",transform:t},typeName:re.ZodEffects,...se(n)});var Yt=class extends ue{_parse(e){return this._getType(e)===q.undefined?yt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Yt.create=(t,e)=>new Yt({innerType:t,typeName:re.ZodOptional,...se(e)});var wn=class extends ue{_parse(e){return this._getType(e)===q.null?yt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};wn.create=(t,e)=>new wn({innerType:t,typeName:re.ZodNullable,...se(e)});var si=class extends ue{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===q.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};si.create=(t,e)=>new si({innerType:t,typeName:re.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...se(e)});var ai=class extends ue{_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Xi(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new bt(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};ai.create=(t,e)=>new ai({innerType:t,typeName:re.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...se(e)});var io=class extends ue{_parse(e){if(this._getType(e)!==q.nan){let r=this._getOrReturnCtx(e);return O(r,{code:R.invalid_type,expected:q.nan,received:r.parsedType}),te}return{status:"valid",value:e.data}}};io.create=t=>new io({typeName:re.ZodNaN,...se(t)});var wT=Symbol("zod_brand"),ws=class extends ue{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},ks=class t extends ue{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?te:o.status==="dirty"?(n.dirty(),Jr(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{let i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?te:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new t({in:e,out:n,typeName:re.ZodPipeline})}},li=class extends ue{_parse(e){let n=this._def.innerType._parse(e),r=i=>(wr(i)&&(i.value=Object.freeze(i.value)),i);return Xi(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};li.create=(t,e)=>new li({innerType:t,typeName:re.ZodReadonly,...se(e)});function Sg(t,e){let n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function Ng(t,e={},n){return t?Er.create().superRefine((r,i)=>{let o=t(r);if(o instanceof Promise)return o.then(l=>{if(!l){let u=Sg(e,r),c=u.fatal??n??!0;i.addIssue({code:"custom",...u,fatal:c})}});if(!o){let l=Sg(e,r),u=l.fatal??n??!0;i.addIssue({code:"custom",...l,fatal:u})}}):Er.create()}var kT={object:Pt.lazycreate},re;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(re||(re={}));var ET=(t,e={message:`Input not instance of ${t.name}`})=>Ng(n=>n instanceof t,e),Ig=kr.create,bg=Wr.create,AT=io.create,NT=Yr.create,Pg=Qr.create,IT=Zr.create,bT=eo.create,PT=Xr.create,MT=jr.create,RT=Er.create,DT=Kn.create,LT=fn.create,FT=to.create,UT=Jn.create,VT=Pt.create,$T=Pt.strictCreate,GT=ei.create,BT=ml.create,OT=ti.create,HT=Sn.create,zT=pl.create,qT=no.create,KT=ro.create,JT=hl.create,WT=ni.create,YT=ri.create,QT=ii.create,ZT=oi.create,XT=Ar.create,jT=Zt.create,e_=Yt.create,t_=wn.create,n_=Zt.createWithPreprocess,r_=ks.create,i_=()=>Ig().optional(),o_=()=>bg().optional(),s_=()=>Pg().optional(),a_={string:t=>kr.create({...t,coerce:!0}),number:t=>Wr.create({...t,coerce:!0}),boolean:t=>Qr.create({...t,coerce:!0}),bigint:t=>Yr.create({...t,coerce:!0}),date:t=>Zr.create({...t,coerce:!0})};var l_=te;var u_,c_;function d_(){return{geminiUrl:u_,vertexUrl:c_}}function f_(t,e,n){var r,i,o;if(!(!((r=t.httpOptions)===null||r===void 0)&&r.baseUrl)){let l=d_();return t.vertexai?(i=l.vertexUrl)!==null&&i!==void 0?i:e:(o=l.geminiUrl)!==null&&o!==void 0?o:n}return t.httpOptions.baseUrl}var Wn=class{};function ee(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function a(t,e,n){for(let o=0;o<e.length-1;o++){let l=e[o];if(l.endsWith("[]")){let u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){let c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){let f=c[d];a(f,e.slice(o+1),n[d])}else for(let d of c)a(d,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){let u=l.slice(0,-3);u in t||(t[u]=[{}]);let c=t[u];a(c[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}let r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function s(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;let r=e[n];if(r.endsWith("[]")){let i=r.slice(0,-2);if(i in t){let o=t[i];return Array.isArray(o)?o.map(l=>s(l,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}var Mg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Mg||(Mg={}));var Rg;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Rg||(Rg={}));var kn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(kn||(kn={}));var Dg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Dg||(Dg={}));var Lg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Lg||(Lg={}));var Fg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Fg||(Fg={}));var Ug;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ug||(Ug={}));var Vg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Vg||(Vg={}));var $g;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})($g||($g={}));var Gg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Gg||(Gg={}));var Bg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Bg||(Bg={}));var Og;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Og||(Og={}));var Hg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Hg||(Hg={}));var Tl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Tl||(Tl={}));var zg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(zg||(zg={}));var Id;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Id||(Id={}));var qg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qg||(qg={}));var Kg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Kg||(Kg={}));var Jg;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Jg||(Jg={}));var Wg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Wg||(Wg={}));var Yg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Yg||(Yg={}));var Qg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Qg||(Qg={}));var Zg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Zg||(Zg={}));var Xg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Xg||(Xg={}));var jg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(jg||(jg={}));var ey;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ey||(ey={}));var ty;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ty||(ty={}));var ny;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ny||(ny={}));var ry;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ry||(ry={}));var iy;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(iy||(iy={}));var oy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(oy||(oy={}));var sy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(sy||(sy={}));var ay;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ay||(ay={}));var ly;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ly||(ly={}));var uy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(uy||(uy={}));var cy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(cy||(cy={}));var dy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(dy||(dy={}));var fy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(fy||(fy={}));var my;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(my||(my={}));var oo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(oo||(oo={}));var As=class{constructor(e){let n={};for(let r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var ui=class{get text(){var e,n,r,i,o,l,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1,m=[];for(let p of(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(let[h,g]of Object.entries(p))h!=="text"&&h!=="thought"&&(g!==null||g!==void 0)&&m.push(h);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,i,o,l,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="",f=[];for(let m of(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(let[p,h]of Object.entries(m))p!=="inlineData"&&(h!==null||h!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,l,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let d=(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,r,i,o,l,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,l,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(c=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}},_l=class{},Sl=class{},bd=class{},Pd=class{},wl=class{},kl=class{},El=class{},Md=class{};var Al=class{},Nl=class{},Il=class{},Rd=class{},Dd=class{},Ld=class{};var bl=class{};var Fd=class{get text(){var e,n,r;let i="",o=!1,l=[];for(let u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&l.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="",o=[];for(let l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[u,c]of Object.entries(l))u!=="inlineData"&&c!==null&&o.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}};var Ud=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};function _e(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Vy(t,e){let n=_e(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function $y(t){return Array.isArray(t)?t.map(e=>Pl(e)):[Pl(t)]}function Pl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function m_(t){let e=Pl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function p_(t){let e=Pl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function py(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Gy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>py(e)):[py(t)]}function Vd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function hy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function gy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vt(t){if(t==null)throw new Error("ContentUnion is required");return Vd(t)?t:{role:"user",parts:Gy(t)}}function By(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let r=vt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){let n=vt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>vt(n)):[vt(e)]}function Xt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(hy(t)||gy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vt(t)]}let e=[],n=[],r=Vd(t[0]);for(let i of t){let o=Vd(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(hy(i)||gy(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Gy(n)}),e}var h_=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),yy=ye.enum(["string","number","integer","object","array","boolean","null"]),g_=ye.union([yy,ye.array(yy)]);function y_(t=!0){let e=ye.lazy(()=>{let n=ye.object({type:g_.optional(),format:ye.string().optional(),title:ye.string().optional(),description:ye.string().optional(),default:ye.unknown().optional(),items:e.optional(),minItems:ye.coerce.string().optional(),maxItems:ye.coerce.string().optional(),enum:ye.array(ye.unknown()).optional(),properties:ye.record(ye.string(),e).optional(),required:ye.array(ye.string()).optional(),minProperties:ye.coerce.string().optional(),maxProperties:ye.coerce.string().optional(),propertyOrdering:ye.array(ye.string()).optional(),minimum:ye.number().optional(),maximum:ye.number().optional(),minLength:ye.coerce.string().optional(),maxLength:ye.coerce.string().optional(),pattern:ye.string().optional(),anyOf:ye.array(e).optional(),additionalProperties:ye.boolean().optional()});return t?n.strict():n});return e}function v_(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(kn).includes(n[0].toUpperCase())?n[0].toUpperCase():kn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let r of n)e.anyOf.push({type:Object.values(kn).includes(r.toUpperCase())?r.toUpperCase():kn.TYPE_UNSPECIFIED})}}function so(t){let e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&v_(t.type,e);for(let[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(kn).includes(u.toUpperCase())?u.toUpperCase():kn.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=so(u);else if(r.includes(l)){let c=[];for(let d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(so(d))}e[l]=c}else if(i.includes(l)){let c={};for(let[d,f]of Object.entries(u))c[d]=so(f);e[l]=c}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Ns(t){if(Object.keys(t).includes("$schema")){delete t.$schema;let e=y_().parse(t);return so(e)}else return so(t)}function pf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function hf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function lo(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(e.parameters=Ns(e.parameters)),e.response&&(e.response=Ns(e.response));return t}function uo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function C_(t,e,n,r=1){let i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Yn(t,e){if(typeof e!="string")throw new Error("name must be a string");return C_(t,e,"cachedContents")}function Oy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Qn(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function x_(t){return t!=null&&typeof t=="object"&&"name"in t}function T_(t){return t!=null&&typeof t=="object"&&"video"in t}function __(t){return t!=null&&typeof t=="object"&&"uri"in t}function Hy(t){var e;let n;if(x_(t)&&(n=t.name),!(__(t)&&(n=t.uri,n===void 0))&&!(T_(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function zy(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function qy(t){for(let e of["models","tunedModels","publisherModels"])if(S_(t,e))return t[e];return[]}function S_(t,e){return t!==null&&typeof t=="object"&&e in t}function w_(t,e={}){let n=t,r={name:n.name,description:n.description,parameters:so(Rl(n.inputSchema))};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function k_(t,e={}){let n=[],r=new Set;for(let i of t){let o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);let l=w_(i,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function E_(t){let e=[];for(let n of t)e.push(Rl(n));return e}function A_(t){let e={};for(let[n,r]of Object.entries(t)){let i=r;e[n]=Rl(i)}return e}function Rl(t){let e=new Set(["items"]),n=new Set(["anyOf"]),r=new Set(["properties"]),i={};for(let[o,l]of Object.entries(t))if(e.has(o))i[o]=Rl(l);else if(n.has(o))i[o]=E_(l);else if(r.has(o))i[o]=A_(l);else if(o==="type"){let u=l.toUpperCase();i[o]=Object.values(kn).includes(u)?u:kn.TYPE_UNSPECIFIED}else h_.has(o)&&(i[o]=l);return i}function Ky(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function N_(t){let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Dl(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Jy(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}function I_(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function b_(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function P_(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function M_(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],I_(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],b_(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],P_(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function Wy(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>M_(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function R_(t){let e={},n=s(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);let r=s(t,["default"]);r!=null&&a(e,["default"],r);let i=s(t,["description"]);i!=null&&a(e,["description"],i);let o=s(t,["enum"]);o!=null&&a(e,["enum"],o);let l=s(t,["example"]);l!=null&&a(e,["example"],l);let u=s(t,["format"]);u!=null&&a(e,["format"],u);let c=s(t,["items"]);c!=null&&a(e,["items"],c);let d=s(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);let f=s(t,["maxLength"]);f!=null&&a(e,["maxLength"],f);let m=s(t,["maxProperties"]);m!=null&&a(e,["maxProperties"],m);let p=s(t,["maximum"]);p!=null&&a(e,["maximum"],p);let h=s(t,["minItems"]);h!=null&&a(e,["minItems"],h);let g=s(t,["minLength"]);g!=null&&a(e,["minLength"],g);let C=s(t,["minProperties"]);C!=null&&a(e,["minProperties"],C);let T=s(t,["minimum"]);T!=null&&a(e,["minimum"],T);let y=s(t,["nullable"]);y!=null&&a(e,["nullable"],y);let v=s(t,["pattern"]);v!=null&&a(e,["pattern"],v);let x=s(t,["properties"]);x!=null&&a(e,["properties"],x);let S=s(t,["propertyOrdering"]);S!=null&&a(e,["propertyOrdering"],S);let w=s(t,["required"]);w!=null&&a(e,["required"],w);let E=s(t,["title"]);E!=null&&a(e,["title"],E);let k=s(t,["type"]);return k!=null&&a(e,["type"],k),e}function D_(t){let e={};if(s(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=s(t,["category"]);n!=null&&a(e,["category"],n);let r=s(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function L_(t){let e={},n=s(t,["behavior"]);n!=null&&a(e,["behavior"],n);let r=s(t,["description"]);r!=null&&a(e,["description"],r);let i=s(t,["name"]);i!=null&&a(e,["name"],i);let o=s(t,["parameters"]);o!=null&&a(e,["parameters"],o);let l=s(t,["parametersJsonSchema"]);l!=null&&a(e,["parametersJsonSchema"],l);let u=s(t,["response"]);u!=null&&a(e,["response"],u);let c=s(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function F_(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function U_(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],F_(n)),e}function V_(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function $_(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],V_(n)),e}function G_(){return{}}function B_(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>L_(c))),a(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=s(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],U_(r));let i=s(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],$_(i)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&a(e,["urlContext"],G_());let l=s(t,["codeExecution"]);return l!=null&&a(e,["codeExecution"],l),e}function O_(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function H_(t){let e={},n=s(t,["latitude"]);n!=null&&a(e,["latitude"],n);let r=s(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function z_(t){let e={},n=s(t,["latLng"]);n!=null&&a(e,["latLng"],H_(n));let r=s(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function q_(t){let e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],O_(n));let r=s(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],z_(r)),e}function K_(t){let e={},n=s(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function Yy(t){let e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],K_(n)),e}function J_(t){let e={},n=s(t,["speaker"]);n!=null&&a(e,["speaker"],n);let r=s(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],Yy(r)),e}function W_(t){let e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>J_(i))),a(e,["speakerVoiceConfigs"],r)}return e}function Y_(t){let e={},n=s(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],Yy(n));let r=s(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],W_(r));let i=s(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function Q_(t){let e={},n=s(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);let r=s(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function Z_(t,e,n){let r={},i=s(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],Wy(vt(i)));let o=s(e,["temperature"]);o!=null&&a(r,["temperature"],o);let l=s(e,["topP"]);l!=null&&a(r,["topP"],l);let u=s(e,["topK"]);u!=null&&a(r,["topK"],u);let c=s(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);let d=s(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);let f=s(e,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);let m=s(e,["responseLogprobs"]);m!=null&&a(r,["responseLogprobs"],m);let p=s(e,["logprobs"]);p!=null&&a(r,["logprobs"],p);let h=s(e,["presencePenalty"]);h!=null&&a(r,["presencePenalty"],h);let g=s(e,["frequencyPenalty"]);g!=null&&a(r,["frequencyPenalty"],g);let C=s(e,["seed"]);C!=null&&a(r,["seed"],C);let T=s(e,["responseMimeType"]);T!=null&&a(r,["responseMimeType"],T);let y=s(e,["responseSchema"]);y!=null&&a(r,["responseSchema"],R_(Ns(y)));let v=s(e,["responseJsonSchema"]);if(v!=null&&a(r,["responseJsonSchema"],v),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let x=s(e,["safetySettings"]);if(n!==void 0&&x!=null){let G=x;Array.isArray(G)&&(G=G.map(le=>D_(le))),a(n,["safetySettings"],G)}let S=s(e,["tools"]);if(n!==void 0&&S!=null){let G=uo(S);Array.isArray(G)&&(G=G.map(le=>B_(lo(le)))),a(n,["tools"],G)}let w=s(e,["toolConfig"]);if(n!==void 0&&w!=null&&a(n,["toolConfig"],q_(w)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let E=s(e,["cachedContent"]);n!==void 0&&E!=null&&a(n,["cachedContent"],Yn(t,E));let k=s(e,["responseModalities"]);k!=null&&a(r,["responseModalities"],k);let A=s(e,["mediaResolution"]);A!=null&&a(r,["mediaResolution"],A);let N=s(e,["speechConfig"]);if(N!=null&&a(r,["speechConfig"],Y_(pf(N))),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let U=s(e,["thinkingConfig"]);return U!=null&&a(r,["thinkingConfig"],Q_(U)),r}function X_(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["request","model"],_e(t,r));let i=s(e,["contents"]);if(i!=null){let l=Xt(i);Array.isArray(l)&&(l=l.map(u=>Wy(u))),a(n,["request","contents"],l)}let o=s(e,["config"]);return o!=null&&a(n,["request","generationConfig"],Z_(t,o,n)),n}function j_(t,e){let n={};if(s(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let r=s(e,["fileName"]);r!=null&&a(n,["fileName"],r);let i=s(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>X_(t,l))),a(n,["requests","requests"],o)}return n}function eS(t,e){let n={},r=s(t,["displayName"]);if(e!==void 0&&r!=null&&a(e,["batch","displayName"],r),s(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function tS(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["src"]);i!=null&&a(n,["batch","inputConfig"],j_(t,Ky(t,i)));let o=s(e,["config"]);return o!=null&&a(n,["config"],eS(o,n)),n}function nS(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Dl(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function rS(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Dl(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function iS(t,e){let n={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);let i=s(t,["pageToken"]);if(e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),s(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function oS(t){let e={},n=s(t,["config"]);return n!=null&&a(e,["config"],iS(n,e)),e}function sS(t){let e={},n=s(t,["format"]);n!=null&&a(e,["instancesFormat"],n);let r=s(t,["gcsUri"]);r!=null&&a(e,["gcsSource","uris"],r);let i=s(t,["bigqueryUri"]);if(i!=null&&a(e,["bigquerySource","inputUri"],i),s(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function aS(t){let e={},n=s(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);let r=s(t,["gcsUri"]);r!=null&&a(e,["gcsDestination","outputUriPrefix"],r);let i=s(t,["bigqueryUri"]);if(i!=null&&a(e,["bigqueryDestination","outputUri"],i),s(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function lS(t,e){let n={},r=s(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);let i=s(t,["dest"]);return e!==void 0&&i!=null&&a(e,["outputConfig"],aS(N_(i))),n}function uS(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["model"],_e(t,r));let i=s(e,["src"]);i!=null&&a(n,["inputConfig"],sS(Ky(t,i)));let o=s(e,["config"]);return o!=null&&a(n,["config"],lS(o,n)),n}function cS(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Dl(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function dS(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Dl(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function fS(t,e){let n={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);let i=s(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);let o=s(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function mS(t){let e={},n=s(t,["config"]);return n!=null&&a(e,["config"],fS(n,e)),e}function pS(){return{}}function hS(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function gS(t){let e={},n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function yS(t){let e={},n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function vS(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],hS(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],gS(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],yS(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function CS(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vS(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function xS(t){let e={},n=s(t,["citationSources"]);return n!=null&&a(e,["citations"],n),e}function TS(t){let e={},n=s(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);let r=s(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function _S(t){let e={},n=s(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>TS(i))),a(e,["urlMetadata"],r)}return e}function SS(t){let e={},n=s(t,["content"]);n!=null&&a(e,["content"],CS(n));let r=s(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],xS(r));let i=s(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);let o=s(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);let l=s(t,["urlContextMetadata"]);l!=null&&a(e,["urlContextMetadata"],_S(l));let u=s(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);let c=s(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);let d=s(t,["index"]);d!=null&&a(e,["index"],d);let f=s(t,["logprobsResult"]);f!=null&&a(e,["logprobsResult"],f);let m=s(t,["safetyRatings"]);return m!=null&&a(e,["safetyRatings"],m),e}function wS(t){let e={},n=s(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>SS(u))),a(e,["candidates"],l)}let r=s(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);let i=s(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);let o=s(t,["usageMetadata"]);return o!=null&&a(e,["usageMetadata"],o),e}function kS(t){let e={},n=s(t,["response"]);return n!=null&&a(e,["response"],wS(n)),s(t,["error"])!=null&&a(e,["error"],pS()),e}function ES(t){let e={},n=s(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);let r=s(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>kS(o))),a(e,["inlinedResponses"],i)}return e}function $d(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["metadata","displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["metadata","state"]);i!=null&&a(e,["state"],Jy(i));let o=s(t,["metadata","createTime"]);o!=null&&a(e,["createTime"],o);let l=s(t,["metadata","endTime"]);l!=null&&a(e,["endTime"],l);let u=s(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);let c=s(t,["metadata","model"]);c!=null&&a(e,["model"],c);let d=s(t,["metadata","output"]);return d!=null&&a(e,["dest"],ES(d)),e}function AS(t){let e={},n=s(t,["nextPageToken"]);n!=null&&a(e,["nextPageToken"],n);let r=s(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>$d(o))),a(e,["batchJobs"],i)}return e}function NS(t){let e={},n=s(t,["details"]);n!=null&&a(e,["details"],n);let r=s(t,["code"]);r!=null&&a(e,["code"],r);let i=s(t,["message"]);return i!=null&&a(e,["message"],i),e}function IS(t){let e={},n=s(t,["instancesFormat"]);n!=null&&a(e,["format"],n);let r=s(t,["gcsSource","uris"]);r!=null&&a(e,["gcsUri"],r);let i=s(t,["bigquerySource","inputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function bS(t){let e={},n=s(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);let r=s(t,["gcsDestination","outputUriPrefix"]);r!=null&&a(e,["gcsUri"],r);let i=s(t,["bigqueryDestination","outputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function Gd(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["state"]);i!=null&&a(e,["state"],Jy(i));let o=s(t,["error"]);o!=null&&a(e,["error"],NS(o));let l=s(t,["createTime"]);l!=null&&a(e,["createTime"],l);let u=s(t,["startTime"]);u!=null&&a(e,["startTime"],u);let c=s(t,["endTime"]);c!=null&&a(e,["endTime"],c);let d=s(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);let f=s(t,["model"]);f!=null&&a(e,["model"],f);let m=s(t,["inputConfig"]);m!=null&&a(e,["src"],IS(m));let p=s(t,["outputConfig"]);return p!=null&&a(e,["dest"],bS(p)),e}function PS(t){let e={},n=s(t,["nextPageToken"]);n!=null&&a(e,["nextPageToken"],n);let r=s(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Gd(o))),a(e,["batchJobs"],i)}return e}var ci;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ci||(ci={}));var di=class{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};r?typeof r=="object"?l=Object.assign({},r):l=r:l={config:{}},l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Bd=class extends Wn{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new di(ci.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=uS(this.apiClient,e);return u=ee("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Gd(f))}else{let d=tS(this.apiClient,e);return u=ee("{model}:batchGenerateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>$d(f))}}async get(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=cS(this.apiClient,e);return u=ee("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Gd(f))}else{let d=nS(this.apiClient,e);return u=ee("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>$d(f))}}async cancel(e){var n,r,i,o;let l="",u={};if(this.apiClient.isVertexAI()){let c=dS(this.apiClient,e);l=ee("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{let c=rS(this.apiClient,e);l=ee("batches/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=mS(e);return u=ee("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=PS(f),p=new bl;return Object.assign(p,m),p})}else{let d=oS(e);return u=ee("batches",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=AS(f),p=new bl;return Object.assign(p,m),p})}}};function MS(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function RS(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function DS(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function LS(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],MS(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],RS(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],DS(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function vy(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>LS(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function FS(t){let e={},n=s(t,["behavior"]);n!=null&&a(e,["behavior"],n);let r=s(t,["description"]);r!=null&&a(e,["description"],r);let i=s(t,["name"]);i!=null&&a(e,["name"],i);let o=s(t,["parameters"]);o!=null&&a(e,["parameters"],o);let l=s(t,["parametersJsonSchema"]);l!=null&&a(e,["parametersJsonSchema"],l);let u=s(t,["response"]);u!=null&&a(e,["response"],u);let c=s(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function US(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function VS(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],US(n)),e}function $S(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function GS(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],$S(n)),e}function BS(){return{}}function OS(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>FS(c))),a(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=s(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],VS(r));let i=s(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],GS(i)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&a(e,["urlContext"],BS());let l=s(t,["codeExecution"]);return l!=null&&a(e,["codeExecution"],l),e}function HS(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function zS(t){let e={},n=s(t,["latitude"]);n!=null&&a(e,["latitude"],n);let r=s(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function qS(t){let e={},n=s(t,["latLng"]);n!=null&&a(e,["latLng"],zS(n));let r=s(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function KS(t){let e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],HS(n));let r=s(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],qS(r)),e}function JS(t,e){let n={},r=s(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);let i=s(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);let o=s(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);let l=s(t,["contents"]);if(e!==void 0&&l!=null){let f=Xt(l);Array.isArray(f)&&(f=f.map(m=>vy(m))),a(e,["contents"],f)}let u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],vy(vt(u)));let c=s(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>OS(m))),a(e,["tools"],f)}let d=s(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],KS(d)),s(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function WS(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["model"],Vy(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],JS(i,n)),n}function YS(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Yn(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function QS(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Yn(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function ZS(t,e){let n={},r=s(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);let i=s(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function XS(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Yn(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],ZS(i,n)),n}function jS(t,e){let n={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);let i=s(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function ew(t){let e={},n=s(t,["config"]);return n!=null&&a(e,["config"],jS(n,e)),e}function tw(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function nw(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["data"]);r!=null&&a(e,["data"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function rw(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function iw(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],tw(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],nw(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],rw(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function Cy(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>iw(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function ow(t){let e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=s(t,["description"]);n!=null&&a(e,["description"],n);let r=s(t,["name"]);r!=null&&a(e,["name"],r);let i=s(t,["parameters"]);i!=null&&a(e,["parameters"],i);let o=s(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);let l=s(t,["response"]);l!=null&&a(e,["response"],l);let u=s(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function sw(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function aw(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],sw(n)),e}function lw(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function uw(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],lw(n)),e}function cw(){return{}}function dw(t){let e={},n=s(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function fw(t){let e={},n=s(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],dw(n));let r=s(t,["authType"]);r!=null&&a(e,["authType"],r);let i=s(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);let o=s(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);let l=s(t,["oauthConfig"]);l!=null&&a(e,["oauthConfig"],l);let u=s(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function mw(t){let e={},n=s(t,["authConfig"]);return n!=null&&a(e,["authConfig"],fw(n)),e}function pw(){return{}}function hw(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>ow(m))),a(e,["functionDeclarations"],f)}let r=s(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);let i=s(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],aw(i));let o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],uw(o)),s(t,["enterpriseWebSearch"])!=null&&a(e,["enterpriseWebSearch"],cw());let u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],mw(u)),s(t,["urlContext"])!=null&&a(e,["urlContext"],pw());let d=s(t,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}function gw(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function yw(t){let e={},n=s(t,["latitude"]);n!=null&&a(e,["latitude"],n);let r=s(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function vw(t){let e={},n=s(t,["latLng"]);n!=null&&a(e,["latLng"],yw(n));let r=s(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function Cw(t){let e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],gw(n));let r=s(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],vw(r)),e}function xw(t,e){let n={},r=s(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);let i=s(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);let o=s(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);let l=s(t,["contents"]);if(e!==void 0&&l!=null){let m=Xt(l);Array.isArray(m)&&(m=m.map(p=>Cy(p))),a(e,["contents"],m)}let u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Cy(vt(u)));let c=s(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>hw(p))),a(e,["tools"],m)}let d=s(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],Cw(d));let f=s(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function Tw(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["model"],Vy(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],xw(i,n)),n}function _w(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Yn(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function Sw(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Yn(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function ww(t,e){let n={},r=s(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);let i=s(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function kw(t,e){let n={},r=s(e,["name"]);r!=null&&a(n,["_url","name"],Yn(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],ww(i,n)),n}function Ew(t,e){let n={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);let i=s(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function Aw(t){let e={},n=s(t,["config"]);return n!=null&&a(e,["config"],Ew(n,e)),e}function vl(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["model"]);i!=null&&a(e,["model"],i);let o=s(t,["createTime"]);o!=null&&a(e,["createTime"],o);let l=s(t,["updateTime"]);l!=null&&a(e,["updateTime"],l);let u=s(t,["expireTime"]);u!=null&&a(e,["expireTime"],u);let c=s(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function Nw(){return{}}function Iw(t){let e={},n=s(t,["nextPageToken"]);n!=null&&a(e,["nextPageToken"],n);let r=s(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>vl(o))),a(e,["cachedContents"],i)}return e}function Cl(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["model"]);i!=null&&a(e,["model"],i);let o=s(t,["createTime"]);o!=null&&a(e,["createTime"],o);let l=s(t,["updateTime"]);l!=null&&a(e,["updateTime"],l);let u=s(t,["expireTime"]);u!=null&&a(e,["expireTime"],u);let c=s(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function bw(){return{}}function Pw(t){let e={},n=s(t,["nextPageToken"]);n!=null&&a(e,["nextPageToken"],n);let r=s(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Cl(o))),a(e,["cachedContents"],i)}return e}var Od=class extends Wn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new di(ci.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=Tw(this.apiClient,e);return u=ee("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Cl(f))}else{let d=WS(this.apiClient,e);return u=ee("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>vl(f))}}async get(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=_w(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Cl(f))}else{let d=YS(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>vl(f))}}async delete(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=Sw(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(()=>{let f=bw(),m=new Nl;return Object.assign(m,f),m})}else{let d=QS(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(()=>{let f=Nw(),m=new Nl;return Object.assign(m,f),m})}}async update(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=kw(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Cl(f))}else{let d=XS(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>vl(f))}}async listInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=Aw(e);return u=ee("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=Pw(f),p=new Il;return Object.assign(p,m),p})}else{let d=ew(e);return u=ee("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=Iw(f),p=new Il;return Object.assign(p,m),p})}}};function xy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Le(t){return this instanceof Le?(this.v=t,this):new Le(t)}function ao(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(h){return function(g){return Promise.resolve(g).then(h,m)}}function u(h,g){r[h]&&(i[h]=function(C){return new Promise(function(T,y){o.push([h,C,T,y])>1||c(h,C)})},g&&(i[h]=g(i[h])))}function c(h,g){try{d(r[h](g))}catch(C){p(o[0][3],C)}}function d(h){h.value instanceof Le?Promise.resolve(h.value.v).then(f,m):p(o[0][2],h)}function f(h){c("next",h)}function m(h){c("throw",h)}function p(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Es(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xy=="function"?xy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(l){return new Promise(function(u,c){l=t[o](l),i(u,c,l.done,l.value)})}}function i(o,l,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},l)}}function Mw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Qy(n)}function Qy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Rw(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ty(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{let i=[],o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!Qy(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}var Hd=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new zd(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},zd=class{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Rw(o)}async sendMessage(e){var n;await this.sendPromise;let r=vt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,u;let c=await i,d=(l=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length,p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);let h=d?[d]:[];this.recordHistory(r,h,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;let r=vt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){let n=e?Ty(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return ao(this,arguments,function*(){var l,u,c,d;let f=[];try{for(var m=!0,p=Es(e),h;h=yield Le(p.next()),l=h.done,!l;m=!0){d=h.value,m=!1;let g=d;if(Mw(g)){let C=(i=(r=g.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;C!==void 0&&f.push(C)}yield yield Le(g)}}catch(g){u={error:g}}finally{try{!m&&!l&&(c=p.return)&&(yield Le(c.call(p)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Ty(r)):this.history.push(e),this.history.push(...i)}};var Ml=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function Dw(t,e){let n={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);let i=s(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function Lw(t){let e={},n=s(t,["config"]);return n!=null&&a(e,["config"],Dw(n,e)),e}function Fw(t){let e={},n=s(t,["details"]);n!=null&&a(e,["details"],n);let r=s(t,["message"]);r!=null&&a(e,["message"],r);let i=s(t,["code"]);return i!=null&&a(e,["code"],i),e}function Uw(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["mimeType"]);i!=null&&a(e,["mimeType"],i);let o=s(t,["sizeBytes"]);o!=null&&a(e,["sizeBytes"],o);let l=s(t,["createTime"]);l!=null&&a(e,["createTime"],l);let u=s(t,["expirationTime"]);u!=null&&a(e,["expirationTime"],u);let c=s(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);let d=s(t,["sha256Hash"]);d!=null&&a(e,["sha256Hash"],d);let f=s(t,["uri"]);f!=null&&a(e,["uri"],f);let m=s(t,["downloadUri"]);m!=null&&a(e,["downloadUri"],m);let p=s(t,["state"]);p!=null&&a(e,["state"],p);let h=s(t,["source"]);h!=null&&a(e,["source"],h);let g=s(t,["videoMetadata"]);g!=null&&a(e,["videoMetadata"],g);let C=s(t,["error"]);return C!=null&&a(e,["error"],Fw(C)),e}function Vw(t){let e={},n=s(t,["file"]);n!=null&&a(e,["file"],Uw(n));let r=s(t,["config"]);return r!=null&&a(e,["config"],r),e}function $w(t){let e={},n=s(t,["name"]);n!=null&&a(e,["_url","file"],Hy(n));let r=s(t,["config"]);return r!=null&&a(e,["config"],r),e}function Gw(t){let e={},n=s(t,["name"]);n!=null&&a(e,["_url","file"],Hy(n));let r=s(t,["config"]);return r!=null&&a(e,["config"],r),e}function Bw(t){let e={},n=s(t,["details"]);n!=null&&a(e,["details"],n);let r=s(t,["message"]);r!=null&&a(e,["message"],r);let i=s(t,["code"]);return i!=null&&a(e,["code"],i),e}function qd(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["mimeType"]);i!=null&&a(e,["mimeType"],i);let o=s(t,["sizeBytes"]);o!=null&&a(e,["sizeBytes"],o);let l=s(t,["createTime"]);l!=null&&a(e,["createTime"],l);let u=s(t,["expirationTime"]);u!=null&&a(e,["expirationTime"],u);let c=s(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);let d=s(t,["sha256Hash"]);d!=null&&a(e,["sha256Hash"],d);let f=s(t,["uri"]);f!=null&&a(e,["uri"],f);let m=s(t,["downloadUri"]);m!=null&&a(e,["downloadUri"],m);let p=s(t,["state"]);p!=null&&a(e,["state"],p);let h=s(t,["source"]);h!=null&&a(e,["source"],h);let g=s(t,["videoMetadata"]);g!=null&&a(e,["videoMetadata"],g);let C=s(t,["error"]);return C!=null&&a(e,["error"],Bw(C)),e}function Ow(t){let e={},n=s(t,["nextPageToken"]);n!=null&&a(e,["nextPageToken"],n);let r=s(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>qd(o))),a(e,["files"],i)}return e}function Hw(){return{}}function zw(){return{}}var Kd=class extends Wn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new di(ci.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>qd(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Lw(e);return o=ee("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{let d=Ow(c),f=new Rd;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Vw(e);return o=ee("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{let c=Hw(),d=new Dd;return Object.assign(d,c),d})}}async get(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=$w(e);return o=ee("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>qd(c))}}async delete(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Gw(e);return o=ee("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{let c=zw(),d=new Ld;return Object.assign(d,c),d})}}};function qw(t){let e={},n=s(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function Kw(t){let e={},n=s(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function Zy(t){let e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],qw(n)),e}function Jw(t){let e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],Kw(n)),e}function Ww(t){let e={},n=s(t,["speaker"]);n!=null&&a(e,["speaker"],n);let r=s(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],Zy(r)),e}function Yw(t){let e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ww(i))),a(e,["speakerVoiceConfigs"],r)}return e}function Qw(t){let e={},n=s(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],Zy(n));let r=s(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],Yw(r));let i=s(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function Zw(t){let e={},n=s(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],Jw(n)),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let r=s(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function Xw(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function jw(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function ek(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function tk(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["data"]);r!=null&&a(e,["data"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function nk(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function rk(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function ik(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],Xw(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],ek(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],nk(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function ok(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],jw(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],tk(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],rk(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function sk(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ik(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function ak(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ok(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function lk(t){let e={},n=s(t,["behavior"]);n!=null&&a(e,["behavior"],n);let r=s(t,["description"]);r!=null&&a(e,["description"],r);let i=s(t,["name"]);i!=null&&a(e,["name"],i);let o=s(t,["parameters"]);o!=null&&a(e,["parameters"],o);let l=s(t,["parametersJsonSchema"]);l!=null&&a(e,["parametersJsonSchema"],l);let u=s(t,["response"]);u!=null&&a(e,["response"],u);let c=s(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function uk(t){let e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=s(t,["description"]);n!=null&&a(e,["description"],n);let r=s(t,["name"]);r!=null&&a(e,["name"],r);let i=s(t,["parameters"]);i!=null&&a(e,["parameters"],i);let o=s(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);let l=s(t,["response"]);l!=null&&a(e,["response"],l);let u=s(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function ck(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function dk(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function fk(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],ck(n)),e}function mk(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],dk(n)),e}function pk(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function hk(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function gk(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],pk(n)),e}function yk(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],hk(n)),e}function vk(){return{}}function Ck(t){let e={},n=s(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function xk(t){let e={},n=s(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],Ck(n));let r=s(t,["authType"]);r!=null&&a(e,["authType"],r);let i=s(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);let o=s(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);let l=s(t,["oauthConfig"]);l!=null&&a(e,["oauthConfig"],l);let u=s(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function Tk(t){let e={},n=s(t,["authConfig"]);return n!=null&&a(e,["authConfig"],xk(n)),e}function _k(){return{}}function Sk(){return{}}function wk(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>lk(c))),a(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=s(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],fk(r));let i=s(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],gk(i)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&a(e,["urlContext"],_k());let l=s(t,["codeExecution"]);return l!=null&&a(e,["codeExecution"],l),e}function kk(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>uk(m))),a(e,["functionDeclarations"],f)}let r=s(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);let i=s(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],mk(i));let o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],yk(o)),s(t,["enterpriseWebSearch"])!=null&&a(e,["enterpriseWebSearch"],vk());let u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Tk(u)),s(t,["urlContext"])!=null&&a(e,["urlContext"],Sk());let d=s(t,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}function Ek(t){let e={},n=s(t,["handle"]);if(n!=null&&a(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ak(t){let e={},n=s(t,["handle"]);n!=null&&a(e,["handle"],n);let r=s(t,["transparent"]);return r!=null&&a(e,["transparent"],r),e}function _y(){return{}}function Sy(){return{}}function Nk(t){let e={},n=s(t,["disabled"]);n!=null&&a(e,["disabled"],n);let r=s(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);let i=s(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);let o=s(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);let l=s(t,["silenceDurationMs"]);return l!=null&&a(e,["silenceDurationMs"],l),e}function Ik(t){let e={},n=s(t,["disabled"]);n!=null&&a(e,["disabled"],n);let r=s(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);let i=s(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);let o=s(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);let l=s(t,["silenceDurationMs"]);return l!=null&&a(e,["silenceDurationMs"],l),e}function bk(t){let e={},n=s(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],Nk(n));let r=s(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);let i=s(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function Pk(t){let e={},n=s(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],Ik(n));let r=s(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);let i=s(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function Mk(t){let e={},n=s(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function Rk(t){let e={},n=s(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function Dk(t){let e={},n=s(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);let r=s(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],Mk(r)),e}function Lk(t){let e={},n=s(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);let r=s(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],Rk(r)),e}function Fk(t){let e={},n=s(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function Uk(t){let e={},n=s(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function Vk(t,e){let n={},r=s(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);let i=s(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);let o=s(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);let l=s(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);let u=s(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);let c=s(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);let d=s(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);let f=s(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);let m=s(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],Qw(hf(m)));let p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],p);let h=s(t,["systemInstruction"]);e!==void 0&&h!=null&&a(e,["setup","systemInstruction"],sk(vt(h)));let g=s(t,["tools"]);if(e!==void 0&&g!=null){let w=uo(g);Array.isArray(w)&&(w=w.map(E=>wk(lo(E)))),a(e,["setup","tools"],w)}let C=s(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],Ek(C));let T=s(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&a(e,["setup","inputAudioTranscription"],_y());let y=s(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],_y());let v=s(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&a(e,["setup","realtimeInputConfig"],bk(v));let x=s(t,["contextWindowCompression"]);e!==void 0&&x!=null&&a(e,["setup","contextWindowCompression"],Dk(x));let S=s(t,["proactivity"]);return e!==void 0&&S!=null&&a(e,["setup","proactivity"],Fk(S)),n}function $k(t,e){let n={},r=s(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);let i=s(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);let o=s(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);let l=s(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);let u=s(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);let c=s(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);let d=s(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);let f=s(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);let m=s(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],Zw(hf(m)));let p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],p);let h=s(t,["systemInstruction"]);e!==void 0&&h!=null&&a(e,["setup","systemInstruction"],ak(vt(h)));let g=s(t,["tools"]);if(e!==void 0&&g!=null){let w=uo(g);Array.isArray(w)&&(w=w.map(E=>kk(lo(E)))),a(e,["setup","tools"],w)}let C=s(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],Ak(C));let T=s(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&a(e,["setup","inputAudioTranscription"],Sy());let y=s(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],Sy());let v=s(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&a(e,["setup","realtimeInputConfig"],Pk(v));let x=s(t,["contextWindowCompression"]);e!==void 0&&x!=null&&a(e,["setup","contextWindowCompression"],Lk(x));let S=s(t,["proactivity"]);return e!==void 0&&S!=null&&a(e,["setup","proactivity"],Uk(S)),n}function Gk(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["setup","model"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],Vk(i,n)),n}function Bk(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["setup","model"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],$k(i,n)),n}function Ok(){return{}}function Hk(){return{}}function zk(){return{}}function qk(){return{}}function Kk(t){let e={},n=s(t,["media"]);n!=null&&a(e,["mediaChunks"],$y(n));let r=s(t,["audio"]);r!=null&&a(e,["audio"],p_(r));let i=s(t,["audioStreamEnd"]);i!=null&&a(e,["audioStreamEnd"],i);let o=s(t,["video"]);o!=null&&a(e,["video"],m_(o));let l=s(t,["text"]);return l!=null&&a(e,["text"],l),s(t,["activityStart"])!=null&&a(e,["activityStart"],Ok()),s(t,["activityEnd"])!=null&&a(e,["activityEnd"],zk()),e}function Jk(t){let e={},n=s(t,["media"]);if(n!=null&&a(e,["mediaChunks"],$y(n)),s(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");let r=s(t,["audioStreamEnd"]);if(r!=null&&a(e,["audioStreamEnd"],r),s(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(s(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return s(t,["activityStart"])!=null&&a(e,["activityStart"],Hk()),s(t,["activityEnd"])!=null&&a(e,["activityEnd"],qk()),e}function Xy(t){let e={},n=s(t,["text"]);n!=null&&a(e,["text"],n);let r=s(t,["weight"]);return r!=null&&a(e,["weight"],r),e}function Wk(t){let e={},n=s(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Xy(i))),a(e,["weightedPrompts"],r)}return e}function jy(t){let e={},n=s(t,["temperature"]);n!=null&&a(e,["temperature"],n);let r=s(t,["topK"]);r!=null&&a(e,["topK"],r);let i=s(t,["seed"]);i!=null&&a(e,["seed"],i);let o=s(t,["guidance"]);o!=null&&a(e,["guidance"],o);let l=s(t,["bpm"]);l!=null&&a(e,["bpm"],l);let u=s(t,["density"]);u!=null&&a(e,["density"],u);let c=s(t,["brightness"]);c!=null&&a(e,["brightness"],c);let d=s(t,["scale"]);d!=null&&a(e,["scale"],d);let f=s(t,["muteBass"]);f!=null&&a(e,["muteBass"],f);let m=s(t,["muteDrums"]);m!=null&&a(e,["muteDrums"],m);let p=s(t,["onlyBassAndDrums"]);return p!=null&&a(e,["onlyBassAndDrums"],p),e}function Yk(t){let e={},n=s(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],jy(n)),e}function ev(t){let e={},n=s(t,["model"]);return n!=null&&a(e,["model"],n),e}function tv(t){let e={},n=s(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Xy(i))),a(e,["weightedPrompts"],r)}return e}function Jd(t){let e={},n=s(t,["setup"]);n!=null&&a(e,["setup"],ev(n));let r=s(t,["clientContent"]);r!=null&&a(e,["clientContent"],tv(r));let i=s(t,["musicGenerationConfig"]);i!=null&&a(e,["musicGenerationConfig"],jy(i));let o=s(t,["playbackControl"]);return o!=null&&a(e,["playbackControl"],o),e}function Qk(){return{}}function Zk(){return{}}function Xk(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function jk(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function eE(t){let e={},n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function tE(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["data"]);r!=null&&a(e,["data"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function nE(t){let e={},n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function rE(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function iE(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],Xk(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],eE(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],nE(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function oE(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],jk(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],tE(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],rE(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function sE(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>iE(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function aE(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>oE(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function wy(t){let e={},n=s(t,["text"]);n!=null&&a(e,["text"],n);let r=s(t,["finished"]);return r!=null&&a(e,["finished"],r),e}function ky(t){let e={},n=s(t,["text"]);n!=null&&a(e,["text"],n);let r=s(t,["finished"]);return r!=null&&a(e,["finished"],r),e}function lE(t){let e={},n=s(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);let r=s(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function uE(t){let e={},n=s(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>lE(i))),a(e,["urlMetadata"],r)}return e}function cE(t){let e={},n=s(t,["modelTurn"]);n!=null&&a(e,["modelTurn"],sE(n));let r=s(t,["turnComplete"]);r!=null&&a(e,["turnComplete"],r);let i=s(t,["interrupted"]);i!=null&&a(e,["interrupted"],i);let o=s(t,["groundingMetadata"]);o!=null&&a(e,["groundingMetadata"],o);let l=s(t,["generationComplete"]);l!=null&&a(e,["generationComplete"],l);let u=s(t,["inputTranscription"]);u!=null&&a(e,["inputTranscription"],wy(u));let c=s(t,["outputTranscription"]);c!=null&&a(e,["outputTranscription"],wy(c));let d=s(t,["urlContextMetadata"]);return d!=null&&a(e,["urlContextMetadata"],uE(d)),e}function dE(t){let e={},n=s(t,["modelTurn"]);n!=null&&a(e,["modelTurn"],aE(n));let r=s(t,["turnComplete"]);r!=null&&a(e,["turnComplete"],r);let i=s(t,["interrupted"]);i!=null&&a(e,["interrupted"],i);let o=s(t,["groundingMetadata"]);o!=null&&a(e,["groundingMetadata"],o);let l=s(t,["generationComplete"]);l!=null&&a(e,["generationComplete"],l);let u=s(t,["inputTranscription"]);u!=null&&a(e,["inputTranscription"],ky(u));let c=s(t,["outputTranscription"]);return c!=null&&a(e,["outputTranscription"],ky(c)),e}function fE(t){let e={},n=s(t,["id"]);n!=null&&a(e,["id"],n);let r=s(t,["args"]);r!=null&&a(e,["args"],r);let i=s(t,["name"]);return i!=null&&a(e,["name"],i),e}function mE(t){let e={},n=s(t,["args"]);n!=null&&a(e,["args"],n);let r=s(t,["name"]);return r!=null&&a(e,["name"],r),e}function pE(t){let e={},n=s(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fE(i))),a(e,["functionCalls"],r)}return e}function hE(t){let e={},n=s(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>mE(i))),a(e,["functionCalls"],r)}return e}function gE(t){let e={},n=s(t,["ids"]);return n!=null&&a(e,["ids"],n),e}function yE(t){let e={},n=s(t,["ids"]);return n!=null&&a(e,["ids"],n),e}function gl(t){let e={},n=s(t,["modality"]);n!=null&&a(e,["modality"],n);let r=s(t,["tokenCount"]);return r!=null&&a(e,["tokenCount"],r),e}function yl(t){let e={},n=s(t,["modality"]);n!=null&&a(e,["modality"],n);let r=s(t,["tokenCount"]);return r!=null&&a(e,["tokenCount"],r),e}function vE(t){let e={},n=s(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);let r=s(t,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);let i=s(t,["responseTokenCount"]);i!=null&&a(e,["responseTokenCount"],i);let o=s(t,["toolUsePromptTokenCount"]);o!=null&&a(e,["toolUsePromptTokenCount"],o);let l=s(t,["thoughtsTokenCount"]);l!=null&&a(e,["thoughtsTokenCount"],l);let u=s(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);let c=s(t,["promptTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>gl(h))),a(e,["promptTokensDetails"],p)}let d=s(t,["cacheTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>gl(h))),a(e,["cacheTokensDetails"],p)}let f=s(t,["responseTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>gl(h))),a(e,["responseTokensDetails"],p)}let m=s(t,["toolUsePromptTokensDetails"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(h=>gl(h))),a(e,["toolUsePromptTokensDetails"],p)}return e}function CE(t){let e={},n=s(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);let r=s(t,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);let i=s(t,["candidatesTokenCount"]);i!=null&&a(e,["responseTokenCount"],i);let o=s(t,["toolUsePromptTokenCount"]);o!=null&&a(e,["toolUsePromptTokenCount"],o);let l=s(t,["thoughtsTokenCount"]);l!=null&&a(e,["thoughtsTokenCount"],l);let u=s(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);let c=s(t,["promptTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>yl(g))),a(e,["promptTokensDetails"],h)}let d=s(t,["cacheTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>yl(g))),a(e,["cacheTokensDetails"],h)}let f=s(t,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>yl(g))),a(e,["responseTokensDetails"],h)}let m=s(t,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>yl(g))),a(e,["toolUsePromptTokensDetails"],h)}let p=s(t,["trafficType"]);return p!=null&&a(e,["trafficType"],p),e}function xE(t){let e={},n=s(t,["timeLeft"]);return n!=null&&a(e,["timeLeft"],n),e}function TE(t){let e={},n=s(t,["timeLeft"]);return n!=null&&a(e,["timeLeft"],n),e}function _E(t){let e={},n=s(t,["newHandle"]);n!=null&&a(e,["newHandle"],n);let r=s(t,["resumable"]);r!=null&&a(e,["resumable"],r);let i=s(t,["lastConsumedClientMessageIndex"]);return i!=null&&a(e,["lastConsumedClientMessageIndex"],i),e}function SE(t){let e={},n=s(t,["newHandle"]);n!=null&&a(e,["newHandle"],n);let r=s(t,["resumable"]);r!=null&&a(e,["resumable"],r);let i=s(t,["lastConsumedClientMessageIndex"]);return i!=null&&a(e,["lastConsumedClientMessageIndex"],i),e}function wE(t){let e={};s(t,["setupComplete"])!=null&&a(e,["setupComplete"],Qk());let r=s(t,["serverContent"]);r!=null&&a(e,["serverContent"],cE(r));let i=s(t,["toolCall"]);i!=null&&a(e,["toolCall"],pE(i));let o=s(t,["toolCallCancellation"]);o!=null&&a(e,["toolCallCancellation"],gE(o));let l=s(t,["usageMetadata"]);l!=null&&a(e,["usageMetadata"],vE(l));let u=s(t,["goAway"]);u!=null&&a(e,["goAway"],xE(u));let c=s(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],_E(c)),e}function kE(t){let e={};s(t,["setupComplete"])!=null&&a(e,["setupComplete"],Zk());let r=s(t,["serverContent"]);r!=null&&a(e,["serverContent"],dE(r));let i=s(t,["toolCall"]);i!=null&&a(e,["toolCall"],hE(i));let o=s(t,["toolCallCancellation"]);o!=null&&a(e,["toolCallCancellation"],yE(o));let l=s(t,["usageMetadata"]);l!=null&&a(e,["usageMetadata"],CE(l));let u=s(t,["goAway"]);u!=null&&a(e,["goAway"],TE(u));let c=s(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],SE(c)),e}function EE(){return{}}function AE(t){let e={},n=s(t,["text"]);n!=null&&a(e,["text"],n);let r=s(t,["weight"]);return r!=null&&a(e,["weight"],r),e}function NE(t){let e={},n=s(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>AE(i))),a(e,["weightedPrompts"],r)}return e}function IE(t){let e={},n=s(t,["temperature"]);n!=null&&a(e,["temperature"],n);let r=s(t,["topK"]);r!=null&&a(e,["topK"],r);let i=s(t,["seed"]);i!=null&&a(e,["seed"],i);let o=s(t,["guidance"]);o!=null&&a(e,["guidance"],o);let l=s(t,["bpm"]);l!=null&&a(e,["bpm"],l);let u=s(t,["density"]);u!=null&&a(e,["density"],u);let c=s(t,["brightness"]);c!=null&&a(e,["brightness"],c);let d=s(t,["scale"]);d!=null&&a(e,["scale"],d);let f=s(t,["muteBass"]);f!=null&&a(e,["muteBass"],f);let m=s(t,["muteDrums"]);m!=null&&a(e,["muteDrums"],m);let p=s(t,["onlyBassAndDrums"]);return p!=null&&a(e,["onlyBassAndDrums"],p),e}function bE(t){let e={},n=s(t,["clientContent"]);n!=null&&a(e,["clientContent"],NE(n));let r=s(t,["musicGenerationConfig"]);return r!=null&&a(e,["musicGenerationConfig"],IE(r)),e}function PE(t){let e={},n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);r!=null&&a(e,["mimeType"],r);let i=s(t,["sourceMetadata"]);return i!=null&&a(e,["sourceMetadata"],bE(i)),e}function ME(t){let e={},n=s(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>PE(i))),a(e,["audioChunks"],r)}return e}function RE(t){let e={},n=s(t,["text"]);n!=null&&a(e,["text"],n);let r=s(t,["filteredReason"]);return r!=null&&a(e,["filteredReason"],r),e}function DE(t){let e={};s(t,["setupComplete"])!=null&&a(e,["setupComplete"],EE());let r=s(t,["serverContent"]);r!=null&&a(e,["serverContent"],ME(r));let i=s(t,["filteredPrompt"]);return i!=null&&a(e,["filteredPrompt"],RE(i)),e}function LE(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function FE(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function UE(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function VE(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],LE(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],FE(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],UE(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function Ll(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>VE(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function $E(t){let e={},n=s(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);let r=s(t,["default"]);r!=null&&a(e,["default"],r);let i=s(t,["description"]);i!=null&&a(e,["description"],i);let o=s(t,["enum"]);o!=null&&a(e,["enum"],o);let l=s(t,["example"]);l!=null&&a(e,["example"],l);let u=s(t,["format"]);u!=null&&a(e,["format"],u);let c=s(t,["items"]);c!=null&&a(e,["items"],c);let d=s(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);let f=s(t,["maxLength"]);f!=null&&a(e,["maxLength"],f);let m=s(t,["maxProperties"]);m!=null&&a(e,["maxProperties"],m);let p=s(t,["maximum"]);p!=null&&a(e,["maximum"],p);let h=s(t,["minItems"]);h!=null&&a(e,["minItems"],h);let g=s(t,["minLength"]);g!=null&&a(e,["minLength"],g);let C=s(t,["minProperties"]);C!=null&&a(e,["minProperties"],C);let T=s(t,["minimum"]);T!=null&&a(e,["minimum"],T);let y=s(t,["nullable"]);y!=null&&a(e,["nullable"],y);let v=s(t,["pattern"]);v!=null&&a(e,["pattern"],v);let x=s(t,["properties"]);x!=null&&a(e,["properties"],x);let S=s(t,["propertyOrdering"]);S!=null&&a(e,["propertyOrdering"],S);let w=s(t,["required"]);w!=null&&a(e,["required"],w);let E=s(t,["title"]);E!=null&&a(e,["title"],E);let k=s(t,["type"]);return k!=null&&a(e,["type"],k),e}function GE(t){let e={};if(s(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=s(t,["category"]);n!=null&&a(e,["category"],n);let r=s(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function BE(t){let e={},n=s(t,["behavior"]);n!=null&&a(e,["behavior"],n);let r=s(t,["description"]);r!=null&&a(e,["description"],r);let i=s(t,["name"]);i!=null&&a(e,["name"],i);let o=s(t,["parameters"]);o!=null&&a(e,["parameters"],o);let l=s(t,["parametersJsonSchema"]);l!=null&&a(e,["parametersJsonSchema"],l);let u=s(t,["response"]);u!=null&&a(e,["response"],u);let c=s(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function OE(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function HE(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],OE(n)),e}function zE(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function qE(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],zE(n)),e}function KE(){return{}}function JE(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>BE(c))),a(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=s(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],HE(r));let i=s(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],qE(i)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&a(e,["urlContext"],KE());let l=s(t,["codeExecution"]);return l!=null&&a(e,["codeExecution"],l),e}function WE(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function YE(t){let e={},n=s(t,["latitude"]);n!=null&&a(e,["latitude"],n);let r=s(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function QE(t){let e={},n=s(t,["latLng"]);n!=null&&a(e,["latLng"],YE(n));let r=s(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function ZE(t){let e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],WE(n));let r=s(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],QE(r)),e}function XE(t){let e={},n=s(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function nv(t){let e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],XE(n)),e}function jE(t){let e={},n=s(t,["speaker"]);n!=null&&a(e,["speaker"],n);let r=s(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],nv(r)),e}function eA(t){let e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jE(i))),a(e,["speakerVoiceConfigs"],r)}return e}function tA(t){let e={},n=s(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],nv(n));let r=s(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],eA(r));let i=s(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function nA(t){let e={},n=s(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);let r=s(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function rA(t,e,n){let r={},i=s(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],Ll(vt(i)));let o=s(e,["temperature"]);o!=null&&a(r,["temperature"],o);let l=s(e,["topP"]);l!=null&&a(r,["topP"],l);let u=s(e,["topK"]);u!=null&&a(r,["topK"],u);let c=s(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);let d=s(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);let f=s(e,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);let m=s(e,["responseLogprobs"]);m!=null&&a(r,["responseLogprobs"],m);let p=s(e,["logprobs"]);p!=null&&a(r,["logprobs"],p);let h=s(e,["presencePenalty"]);h!=null&&a(r,["presencePenalty"],h);let g=s(e,["frequencyPenalty"]);g!=null&&a(r,["frequencyPenalty"],g);let C=s(e,["seed"]);C!=null&&a(r,["seed"],C);let T=s(e,["responseMimeType"]);T!=null&&a(r,["responseMimeType"],T);let y=s(e,["responseSchema"]);y!=null&&a(r,["responseSchema"],$E(Ns(y)));let v=s(e,["responseJsonSchema"]);if(v!=null&&a(r,["responseJsonSchema"],v),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let x=s(e,["safetySettings"]);if(n!==void 0&&x!=null){let G=x;Array.isArray(G)&&(G=G.map(le=>GE(le))),a(n,["safetySettings"],G)}let S=s(e,["tools"]);if(n!==void 0&&S!=null){let G=uo(S);Array.isArray(G)&&(G=G.map(le=>JE(lo(le)))),a(n,["tools"],G)}let w=s(e,["toolConfig"]);if(n!==void 0&&w!=null&&a(n,["toolConfig"],ZE(w)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let E=s(e,["cachedContent"]);n!==void 0&&E!=null&&a(n,["cachedContent"],Yn(t,E));let k=s(e,["responseModalities"]);k!=null&&a(r,["responseModalities"],k);let A=s(e,["mediaResolution"]);A!=null&&a(r,["mediaResolution"],A);let N=s(e,["speechConfig"]);if(N!=null&&a(r,["speechConfig"],tA(pf(N))),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let U=s(e,["thinkingConfig"]);return U!=null&&a(r,["thinkingConfig"],nA(U)),r}function Ey(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["contents"]);if(i!=null){let l=Xt(i);Array.isArray(l)&&(l=l.map(u=>Ll(u))),a(n,["contents"],l)}let o=s(e,["config"]);return o!=null&&a(n,["generationConfig"],rA(t,o,n)),n}function iA(t,e){let n={},r=s(t,["taskType"]);e!==void 0&&r!=null&&a(e,["requests[]","taskType"],r);let i=s(t,["title"]);e!==void 0&&i!=null&&a(e,["requests[]","title"],i);let o=s(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&a(e,["requests[]","outputDimensionality"],o),s(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function oA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["contents"]);i!=null&&a(n,["requests[]","content"],By(t,i));let o=s(e,["config"]);o!=null&&a(n,["config"],iA(o,n));let l=s(e,["model"]);return l!==void 0&&a(n,["requests[]","model"],_e(t,l)),n}function sA(t,e){let n={};if(s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let r=s(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);let i=s(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);let o=s(t,["guidanceScale"]);if(e!==void 0&&o!=null&&a(e,["parameters","guidanceScale"],o),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let l=s(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&a(e,["parameters","safetySetting"],l);let u=s(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);let c=s(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);let d=s(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);let f=s(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);let m=s(t,["outputMimeType"]);e!==void 0&&m!=null&&a(e,["parameters","outputOptions","mimeType"],m);let p=s(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p),s(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function aA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);let o=s(e,["config"]);return o!=null&&a(n,["config"],sA(o,n)),n}function lA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","name"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function uA(t,e,n){let r={},i=s(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);let o=s(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);let l=s(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);let u=s(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],zy(t,u)),r}function cA(t,e){let n={},r=s(e,["config"]);return r!=null&&a(n,["config"],uA(t,r,n)),n}function dA(t,e){let n={},r=s(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);let i=s(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);let o=s(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function fA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","name"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],dA(i,n)),n}function mA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","name"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function pA(t){let e={};if(s(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function hA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["contents"]);if(i!=null){let l=Xt(i);Array.isArray(l)&&(l=l.map(u=>Ll(u))),a(n,["contents"],l)}let o=s(e,["config"]);return o!=null&&a(n,["config"],pA(o)),n}function gA(t){let e={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=s(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],Qn(n));let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function yA(t,e){let n={},r=s(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r),s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=s(t,["durationSeconds"]);if(e!==void 0&&i!=null&&a(e,["parameters","durationSeconds"],i),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=s(t,["aspectRatio"]);if(e!==void 0&&o!=null&&a(e,["parameters","aspectRatio"],o),s(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");let l=s(t,["personGeneration"]);if(e!==void 0&&l!=null&&a(e,["parameters","personGeneration"],l),s(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=s(t,["negativePrompt"]);e!==void 0&&u!=null&&a(e,["parameters","negativePrompt"],u);let c=s(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&a(e,["parameters","enhancePrompt"],c),s(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(s(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(s(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function vA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);let o=s(e,["image"]);if(o!=null&&a(n,["instances[0]","image"],gA(o)),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");let l=s(e,["config"]);return l!=null&&a(n,["config"],yA(l,n)),n}function CA(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function xA(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["data"]);r!=null&&a(e,["data"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function TA(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function _A(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],CA(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],xA(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],TA(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function co(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_A(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function SA(t){let e={},n=s(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);let r=s(t,["default"]);r!=null&&a(e,["default"],r);let i=s(t,["description"]);i!=null&&a(e,["description"],i);let o=s(t,["enum"]);o!=null&&a(e,["enum"],o);let l=s(t,["example"]);l!=null&&a(e,["example"],l);let u=s(t,["format"]);u!=null&&a(e,["format"],u);let c=s(t,["items"]);c!=null&&a(e,["items"],c);let d=s(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);let f=s(t,["maxLength"]);f!=null&&a(e,["maxLength"],f);let m=s(t,["maxProperties"]);m!=null&&a(e,["maxProperties"],m);let p=s(t,["maximum"]);p!=null&&a(e,["maximum"],p);let h=s(t,["minItems"]);h!=null&&a(e,["minItems"],h);let g=s(t,["minLength"]);g!=null&&a(e,["minLength"],g);let C=s(t,["minProperties"]);C!=null&&a(e,["minProperties"],C);let T=s(t,["minimum"]);T!=null&&a(e,["minimum"],T);let y=s(t,["nullable"]);y!=null&&a(e,["nullable"],y);let v=s(t,["pattern"]);v!=null&&a(e,["pattern"],v);let x=s(t,["properties"]);x!=null&&a(e,["properties"],x);let S=s(t,["propertyOrdering"]);S!=null&&a(e,["propertyOrdering"],S);let w=s(t,["required"]);w!=null&&a(e,["required"],w);let E=s(t,["title"]);E!=null&&a(e,["title"],E);let k=s(t,["type"]);return k!=null&&a(e,["type"],k),e}function wA(t){let e={},n=s(t,["featureSelectionPreference"]);return n!=null&&a(e,["featureSelectionPreference"],n),e}function kA(t){let e={},n=s(t,["method"]);n!=null&&a(e,["method"],n);let r=s(t,["category"]);r!=null&&a(e,["category"],r);let i=s(t,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function EA(t){let e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=s(t,["description"]);n!=null&&a(e,["description"],n);let r=s(t,["name"]);r!=null&&a(e,["name"],r);let i=s(t,["parameters"]);i!=null&&a(e,["parameters"],i);let o=s(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);let l=s(t,["response"]);l!=null&&a(e,["response"],l);let u=s(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function AA(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function NA(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],AA(n)),e}function IA(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function bA(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],IA(n)),e}function PA(){return{}}function MA(t){let e={},n=s(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function RA(t){let e={},n=s(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],MA(n));let r=s(t,["authType"]);r!=null&&a(e,["authType"],r);let i=s(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);let o=s(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);let l=s(t,["oauthConfig"]);l!=null&&a(e,["oauthConfig"],l);let u=s(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function DA(t){let e={},n=s(t,["authConfig"]);return n!=null&&a(e,["authConfig"],RA(n)),e}function LA(){return{}}function rv(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>EA(m))),a(e,["functionDeclarations"],f)}let r=s(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);let i=s(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],NA(i));let o=s(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],bA(o)),s(t,["enterpriseWebSearch"])!=null&&a(e,["enterpriseWebSearch"],PA());let u=s(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],DA(u)),s(t,["urlContext"])!=null&&a(e,["urlContext"],LA());let d=s(t,["codeExecution"]);return d!=null&&a(e,["codeExecution"],d),e}function FA(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function UA(t){let e={},n=s(t,["latitude"]);n!=null&&a(e,["latitude"],n);let r=s(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function VA(t){let e={},n=s(t,["latLng"]);n!=null&&a(e,["latLng"],UA(n));let r=s(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function $A(t){let e={},n=s(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],FA(n));let r=s(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],VA(r)),e}function GA(t){let e={},n=s(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function BA(t){let e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],GA(n)),e}function OA(t){let e={},n=s(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],BA(n)),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let r=s(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function HA(t){let e={},n=s(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);let r=s(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function zA(t,e,n){let r={},i=s(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],co(vt(i)));let o=s(e,["temperature"]);o!=null&&a(r,["temperature"],o);let l=s(e,["topP"]);l!=null&&a(r,["topP"],l);let u=s(e,["topK"]);u!=null&&a(r,["topK"],u);let c=s(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);let d=s(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);let f=s(e,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);let m=s(e,["responseLogprobs"]);m!=null&&a(r,["responseLogprobs"],m);let p=s(e,["logprobs"]);p!=null&&a(r,["logprobs"],p);let h=s(e,["presencePenalty"]);h!=null&&a(r,["presencePenalty"],h);let g=s(e,["frequencyPenalty"]);g!=null&&a(r,["frequencyPenalty"],g);let C=s(e,["seed"]);C!=null&&a(r,["seed"],C);let T=s(e,["responseMimeType"]);T!=null&&a(r,["responseMimeType"],T);let y=s(e,["responseSchema"]);y!=null&&a(r,["responseSchema"],SA(Ns(y)));let v=s(e,["responseJsonSchema"]);v!=null&&a(r,["responseJsonSchema"],v);let x=s(e,["routingConfig"]);x!=null&&a(r,["routingConfig"],x);let S=s(e,["modelSelectionConfig"]);S!=null&&a(r,["modelConfig"],wA(S));let w=s(e,["safetySettings"]);if(n!==void 0&&w!=null){let me=w;Array.isArray(me)&&(me=me.map(M=>kA(M))),a(n,["safetySettings"],me)}let E=s(e,["tools"]);if(n!==void 0&&E!=null){let me=uo(E);Array.isArray(me)&&(me=me.map(M=>rv(lo(M)))),a(n,["tools"],me)}let k=s(e,["toolConfig"]);n!==void 0&&k!=null&&a(n,["toolConfig"],$A(k));let A=s(e,["labels"]);n!==void 0&&A!=null&&a(n,["labels"],A);let N=s(e,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],Yn(t,N));let U=s(e,["responseModalities"]);U!=null&&a(r,["responseModalities"],U);let G=s(e,["mediaResolution"]);G!=null&&a(r,["mediaResolution"],G);let le=s(e,["speechConfig"]);le!=null&&a(r,["speechConfig"],OA(pf(le)));let Ne=s(e,["audioTimestamp"]);Ne!=null&&a(r,["audioTimestamp"],Ne);let Ke=s(e,["thinkingConfig"]);return Ke!=null&&a(r,["thinkingConfig"],HA(Ke)),r}function Ay(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["contents"]);if(i!=null){let l=Xt(i);Array.isArray(l)&&(l=l.map(u=>co(u))),a(n,["contents"],l)}let o=s(e,["config"]);return o!=null&&a(n,["generationConfig"],zA(t,o,n)),n}function qA(t,e){let n={},r=s(t,["taskType"]);e!==void 0&&r!=null&&a(e,["instances[]","task_type"],r);let i=s(t,["title"]);e!==void 0&&i!=null&&a(e,["instances[]","title"],i);let o=s(t,["outputDimensionality"]);e!==void 0&&o!=null&&a(e,["parameters","outputDimensionality"],o);let l=s(t,["mimeType"]);e!==void 0&&l!=null&&a(e,["instances[]","mimeType"],l);let u=s(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function KA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["contents"]);i!=null&&a(n,["instances[]","content"],By(t,i));let o=s(e,["config"]);return o!=null&&a(n,["config"],qA(o,n)),n}function JA(t,e){let n={},r=s(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);let i=s(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);let o=s(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);let l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);let u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);let c=s(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);let d=s(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);let f=s(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);let m=s(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);let p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);let h=s(t,["language"]);e!==void 0&&h!=null&&a(e,["parameters","language"],h);let g=s(t,["outputMimeType"]);e!==void 0&&g!=null&&a(e,["parameters","outputOptions","mimeType"],g);let C=s(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&a(e,["parameters","outputOptions","compressionQuality"],C);let T=s(t,["addWatermark"]);e!==void 0&&T!=null&&a(e,["parameters","addWatermark"],T);let y=s(t,["enhancePrompt"]);return e!==void 0&&y!=null&&a(e,["parameters","enhancePrompt"],y),n}function WA(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);let o=s(e,["config"]);return o!=null&&a(n,["config"],JA(o,n)),n}function Fl(t){let e={},n=s(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);let r=s(t,["imageBytes"]);r!=null&&a(e,["bytesBase64Encoded"],Qn(r));let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function YA(t){let e={},n=s(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);let r=s(t,["segmentationClasses"]);r!=null&&a(e,["maskClasses"],r);let i=s(t,["maskDilation"]);return i!=null&&a(e,["dilation"],i),e}function QA(t){let e={},n=s(t,["controlType"]);n!=null&&a(e,["controlType"],n);let r=s(t,["enableControlImageComputation"]);return r!=null&&a(e,["computeControl"],r),e}function ZA(t){let e={},n=s(t,["styleDescription"]);return n!=null&&a(e,["styleDescription"],n),e}function XA(t){let e={},n=s(t,["subjectType"]);n!=null&&a(e,["subjectType"],n);let r=s(t,["subjectDescription"]);return r!=null&&a(e,["subjectDescription"],r),e}function jA(t){let e={},n=s(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],Fl(n));let r=s(t,["referenceId"]);r!=null&&a(e,["referenceId"],r);let i=s(t,["referenceType"]);i!=null&&a(e,["referenceType"],i);let o=s(t,["maskImageConfig"]);o!=null&&a(e,["maskImageConfig"],YA(o));let l=s(t,["controlImageConfig"]);l!=null&&a(e,["controlImageConfig"],QA(l));let u=s(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],ZA(u));let c=s(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],XA(c)),e}function eN(t,e){let n={},r=s(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);let i=s(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);let o=s(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);let l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);let u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);let c=s(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);let d=s(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);let f=s(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);let m=s(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&a(e,["parameters","includeSafetyAttributes"],m);let p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);let h=s(t,["language"]);e!==void 0&&h!=null&&a(e,["parameters","language"],h);let g=s(t,["outputMimeType"]);e!==void 0&&g!=null&&a(e,["parameters","outputOptions","mimeType"],g);let C=s(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&a(e,["parameters","outputOptions","compressionQuality"],C);let T=s(t,["editMode"]);e!==void 0&&T!=null&&a(e,["parameters","editMode"],T);let y=s(t,["baseSteps"]);return e!==void 0&&y!=null&&a(e,["parameters","editConfig","baseSteps"],y),n}function tN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);let o=s(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>jA(c))),a(n,["instances[0]","referenceImages"],u)}let l=s(e,["config"]);return l!=null&&a(n,["config"],eN(l,n)),n}function nN(t,e){let n={},r=s(t,["includeRaiReason"]);e!==void 0&&r!=null&&a(e,["parameters","includeRaiReason"],r);let i=s(t,["outputMimeType"]);e!==void 0&&i!=null&&a(e,["parameters","outputOptions","mimeType"],i);let o=s(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&a(e,["parameters","outputOptions","compressionQuality"],o);let l=s(t,["enhanceInputImage"]);e!==void 0&&l!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],l);let u=s(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],u);let c=s(t,["numberOfImages"]);e!==void 0&&c!=null&&a(e,["parameters","sampleCount"],c);let d=s(t,["mode"]);return e!==void 0&&d!=null&&a(e,["parameters","mode"],d),n}function rN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["image"]);i!=null&&a(n,["instances[0]","image"],Fl(i));let o=s(e,["upscaleFactor"]);o!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],o);let l=s(e,["config"]);return l!=null&&a(n,["config"],nN(l,n)),n}function iN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","name"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function oN(t,e,n){let r={},i=s(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);let o=s(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);let l=s(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);let u=s(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],zy(t,u)),r}function sN(t,e){let n={},r=s(e,["config"]);return r!=null&&a(n,["config"],oN(t,r,n)),n}function aN(t,e){let n={},r=s(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);let i=s(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);let o=s(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function lN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],aN(i,n)),n}function uN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","name"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],i),n}function cN(t,e){let n={},r=s(t,["systemInstruction"]);e!==void 0&&r!=null&&a(e,["systemInstruction"],co(vt(r)));let i=s(t,["tools"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>rv(u))),a(e,["tools"],l)}let o=s(t,["generationConfig"]);return e!==void 0&&o!=null&&a(e,["generationConfig"],o),n}function dN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["contents"]);if(i!=null){let l=Xt(i);Array.isArray(l)&&(l=l.map(u=>co(u))),a(n,["contents"],l)}let o=s(e,["config"]);return o!=null&&a(n,["config"],cN(o,n)),n}function fN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["contents"]);if(i!=null){let l=Xt(i);Array.isArray(l)&&(l=l.map(u=>co(u))),a(n,["contents"],l)}let o=s(e,["config"]);return o!=null&&a(n,["config"],o),n}function mN(t){let e={},n=s(t,["uri"]);n!=null&&a(e,["gcsUri"],n);let r=s(t,["videoBytes"]);r!=null&&a(e,["bytesBase64Encoded"],Qn(r));let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function pN(t,e){let n={},r=s(t,["numberOfVideos"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);let i=s(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);let o=s(t,["fps"]);e!==void 0&&o!=null&&a(e,["parameters","fps"],o);let l=s(t,["durationSeconds"]);e!==void 0&&l!=null&&a(e,["parameters","durationSeconds"],l);let u=s(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);let c=s(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);let d=s(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);let f=s(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);let m=s(t,["pubsubTopic"]);e!==void 0&&m!=null&&a(e,["parameters","pubsubTopic"],m);let p=s(t,["negativePrompt"]);e!==void 0&&p!=null&&a(e,["parameters","negativePrompt"],p);let h=s(t,["enhancePrompt"]);e!==void 0&&h!=null&&a(e,["parameters","enhancePrompt"],h);let g=s(t,["generateAudio"]);e!==void 0&&g!=null&&a(e,["parameters","generateAudio"],g);let C=s(t,["lastFrame"]);e!==void 0&&C!=null&&a(e,["instances[0]","lastFrame"],Fl(C));let T=s(t,["compressionQuality"]);return e!==void 0&&T!=null&&a(e,["parameters","compressionQuality"],T),n}function hN(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["_url","model"],_e(t,r));let i=s(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);let o=s(e,["image"]);o!=null&&a(n,["instances[0]","image"],Fl(o));let l=s(e,["video"]);l!=null&&a(n,["instances[0]","video"],mN(l));let u=s(e,["config"]);return u!=null&&a(n,["config"],pN(u,n)),n}function gN(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function yN(t){let e={},n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function vN(t){let e={},n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function CN(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],gN(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],yN(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],vN(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function xN(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>CN(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function TN(t){let e={},n=s(t,["citationSources"]);return n!=null&&a(e,["citations"],n),e}function _N(t){let e={},n=s(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);let r=s(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function SN(t){let e={},n=s(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_N(i))),a(e,["urlMetadata"],r)}return e}function wN(t){let e={},n=s(t,["content"]);n!=null&&a(e,["content"],xN(n));let r=s(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],TN(r));let i=s(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);let o=s(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);let l=s(t,["urlContextMetadata"]);l!=null&&a(e,["urlContextMetadata"],SN(l));let u=s(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);let c=s(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);let d=s(t,["index"]);d!=null&&a(e,["index"],d);let f=s(t,["logprobsResult"]);f!=null&&a(e,["logprobsResult"],f);let m=s(t,["safetyRatings"]);return m!=null&&a(e,["safetyRatings"],m),e}function Ny(t){let e={},n=s(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>wN(u))),a(e,["candidates"],l)}let r=s(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);let i=s(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);let o=s(t,["usageMetadata"]);return o!=null&&a(e,["usageMetadata"],o),e}function kN(t){let e={},n=s(t,["values"]);return n!=null&&a(e,["values"],n),e}function EN(){return{}}function AN(t){let e={},n=s(t,["embeddings"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kN(o))),a(e,["embeddings"],i)}return s(t,["metadata"])!=null&&a(e,["metadata"],EN()),e}function NN(t){let e={},n=s(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],Qn(n));let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function iv(t){let e={},n=s(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);let r=s(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);let i=s(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function IN(t){let e={},n=s(t,["_self"]);n!=null&&a(e,["image"],NN(n));let r=s(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);let i=s(t,["_self"]);return i!=null&&a(e,["safetyAttributes"],iv(i)),e}function bN(t){let e={},n=s(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>IN(o))),a(e,["generatedImages"],i)}let r=s(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],iv(r)),e}function PN(t){let e={},n=s(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);let r=s(t,["createTime"]);r!=null&&a(e,["createTime"],r);let i=s(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function Wd(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["description"]);i!=null&&a(e,["description"],i);let o=s(t,["version"]);o!=null&&a(e,["version"],o);let l=s(t,["_self"]);l!=null&&a(e,["tunedModelInfo"],PN(l));let u=s(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);let c=s(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);let d=s(t,["supportedGenerationMethods"]);return d!=null&&a(e,["supportedActions"],d),e}function MN(t,e){let n={},r=s(e,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);let i=s(e,["_self"]);if(i!=null){let o=qy(i);Array.isArray(o)&&(o=o.map(l=>Wd(l))),a(n,["models"],o)}return n}function RN(){return{}}function DN(t){let e={},n=s(t,["totalTokens"]);n!=null&&a(e,["totalTokens"],n);let r=s(t,["cachedContentTokenCount"]);return r!=null&&a(e,["cachedContentTokenCount"],r),e}function LN(t){let e={},n=s(t,["video","uri"]);n!=null&&a(e,["uri"],n);let r=s(t,["video","encodedVideo"]);r!=null&&a(e,["videoBytes"],Qn(r));let i=s(t,["encoding"]);return i!=null&&a(e,["mimeType"],i),e}function FN(t){let e={},n=s(t,["_self"]);return n!=null&&a(e,["video"],LN(n)),e}function UN(t){let e={},n=s(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>FN(l))),a(e,["generatedVideos"],o)}let r=s(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);let i=s(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function VN(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["metadata"]);r!=null&&a(e,["metadata"],r);let i=s(t,["done"]);i!=null&&a(e,["done"],i);let o=s(t,["error"]);o!=null&&a(e,["error"],o);let l=s(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],UN(l)),e}function $N(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function GN(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["data"]);r!=null&&a(e,["data"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function BN(t){let e={},n=s(t,["displayName"]);n!=null&&a(e,["displayName"],n);let r=s(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function ON(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],$N(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],GN(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],BN(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function HN(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ON(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function zN(t){let e={},n=s(t,["citations"]);return n!=null&&a(e,["citations"],n),e}function qN(t){let e={},n=s(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);let r=s(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function KN(t){let e={},n=s(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>qN(i))),a(e,["urlMetadata"],r)}return e}function JN(t){let e={},n=s(t,["content"]);n!=null&&a(e,["content"],HN(n));let r=s(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],zN(r));let i=s(t,["finishMessage"]);i!=null&&a(e,["finishMessage"],i);let o=s(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);let l=s(t,["urlContextMetadata"]);l!=null&&a(e,["urlContextMetadata"],KN(l));let u=s(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);let c=s(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);let d=s(t,["index"]);d!=null&&a(e,["index"],d);let f=s(t,["logprobsResult"]);f!=null&&a(e,["logprobsResult"],f);let m=s(t,["safetyRatings"]);return m!=null&&a(e,["safetyRatings"],m),e}function Iy(t){let e={},n=s(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>JN(d))),a(e,["candidates"],c)}let r=s(t,["createTime"]);r!=null&&a(e,["createTime"],r);let i=s(t,["responseId"]);i!=null&&a(e,["responseId"],i);let o=s(t,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);let l=s(t,["promptFeedback"]);l!=null&&a(e,["promptFeedback"],l);let u=s(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function WN(t){let e={},n=s(t,["truncated"]);n!=null&&a(e,["truncated"],n);let r=s(t,["token_count"]);return r!=null&&a(e,["tokenCount"],r),e}function YN(t){let e={},n=s(t,["values"]);n!=null&&a(e,["values"],n);let r=s(t,["statistics"]);return r!=null&&a(e,["statistics"],WN(r)),e}function QN(t){let e={},n=s(t,["billableCharacterCount"]);return n!=null&&a(e,["billableCharacterCount"],n),e}function ZN(t){let e={},n=s(t,["predictions[]","embeddings"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>YN(o))),a(e,["embeddings"],i)}let r=s(t,["metadata"]);return r!=null&&a(e,["metadata"],QN(r)),e}function XN(t){let e={},n=s(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);let r=s(t,["bytesBase64Encoded"]);r!=null&&a(e,["imageBytes"],Qn(r));let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function ov(t){let e={},n=s(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);let r=s(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);let i=s(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function gf(t){let e={},n=s(t,["_self"]);n!=null&&a(e,["image"],XN(n));let r=s(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);let i=s(t,["_self"]);i!=null&&a(e,["safetyAttributes"],ov(i));let o=s(t,["prompt"]);return o!=null&&a(e,["enhancedPrompt"],o),e}function jN(t){let e={},n=s(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gf(o))),a(e,["generatedImages"],i)}let r=s(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],ov(r)),e}function eI(t){let e={},n=s(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gf(i))),a(e,["generatedImages"],r)}return e}function tI(t){let e={},n=s(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gf(i))),a(e,["generatedImages"],r)}return e}function nI(t){let e={},n=s(t,["endpoint"]);n!=null&&a(e,["name"],n);let r=s(t,["deployedModelId"]);return r!=null&&a(e,["deployedModelId"],r),e}function rI(t){let e={},n=s(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);let r=s(t,["createTime"]);r!=null&&a(e,["createTime"],r);let i=s(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function iI(t){let e={},n=s(t,["checkpointId"]);n!=null&&a(e,["checkpointId"],n);let r=s(t,["epoch"]);r!=null&&a(e,["epoch"],r);let i=s(t,["step"]);return i!=null&&a(e,["step"],i),e}function Yd(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["displayName"]);r!=null&&a(e,["displayName"],r);let i=s(t,["description"]);i!=null&&a(e,["description"],i);let o=s(t,["versionId"]);o!=null&&a(e,["version"],o);let l=s(t,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(p=>nI(p))),a(e,["endpoints"],m)}let u=s(t,["labels"]);u!=null&&a(e,["labels"],u);let c=s(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],rI(c));let d=s(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);let f=s(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>iI(p))),a(e,["checkpoints"],m)}return e}function oI(t,e){let n={},r=s(e,["nextPageToken"]);r!=null&&a(n,["nextPageToken"],r);let i=s(e,["_self"]);if(i!=null){let o=qy(i);Array.isArray(o)&&(o=o.map(l=>Yd(l))),a(n,["models"],o)}return n}function sI(){return{}}function aI(t){let e={},n=s(t,["totalTokens"]);return n!=null&&a(e,["totalTokens"],n),e}function lI(t){let e={},n=s(t,["tokensInfo"]);return n!=null&&a(e,["tokensInfo"],n),e}function uI(t){let e={},n=s(t,["gcsUri"]);n!=null&&a(e,["uri"],n);let r=s(t,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],Qn(r));let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function cI(t){let e={},n=s(t,["_self"]);return n!=null&&a(e,["video"],uI(n)),e}function dI(t){let e={},n=s(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>cI(l))),a(e,["generatedVideos"],o)}let r=s(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);let i=s(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function fI(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["metadata"]);r!=null&&a(e,["metadata"],r);let i=s(t,["done"]);i!=null&&a(e,["done"],i);let o=s(t,["error"]);o!=null&&a(e,["error"],o);let l=s(t,["response"]);return l!=null&&a(e,["response"],dI(l)),e}var mI="Content-Type",pI="X-Server-Timeout",hI="User-Agent",Qd="x-goog-api-client",gI="1.7.0",yI=`google-genai-sdk/${gI}`,vI="v1beta1",CI="v1beta",by=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,Zd=class{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:vI,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:CI,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){let i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(let[l,u]of Object.entries(e.queryParams))i.searchParams.append(l,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){let r=JSON.parse(JSON.stringify(e));for(let[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){let i=new AbortController,o=i.signal;n.timeout&&n?.timeout>0&&setTimeout(()=>i.abort(),n.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&xI(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Py(i),new As(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Py(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return ao(this,arguments,function*(){let i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";for(;;){let{done:u,value:c}=yield Le(i.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let d=o.decode(c);try{let m=JSON.parse(d);if("error"in m){let p=JSON.parse(JSON.stringify(m.error)),h=p.status,g=p.code,C=`got status: ${h}. ${JSON.stringify(m)}`;if(g>=400&&g<600)throw new Ml({message:C,status:g})}}catch(m){if(m.name==="ApiError")throw m}l+=d;let f=l.match(by);for(;f;){let m=f[1];try{let p=new Response(m,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Le(new As(p)),l=l.slice(f[0].length),f=l.match(by)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){let e={},n=yI+" "+this.clientOptions.userAgentExtra;return e[hI]=n,e[Qd]=n,e[mI]="application/json",e}async getHeadersInternal(e){let n=new Headers;if(e&&e.headers){for(let[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(pI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;let i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let o=this.clientOptions.uploader,l=await o.stat(e);i.sizeBytes=String(l.size);let u=(r=n?.mimeType)!==null&&r!==void 0?r:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;let c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n?.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};let o={file:e},l=await this.request({path:ee("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!l||!l?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=(r=l?.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}};async function Py(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(r);throw n>=400&&n<600?new Ml({message:i,status:n}):new Error(i)}}function xI(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,l){let u=Object.assign({},o);for(let c in l)if(Object.prototype.hasOwnProperty.call(l,c)){let d=l[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}let i=r(n,e);t.body=JSON.stringify(i)}var TI="mcp_used/unknown";function sv(t){for(let e of t)if(yf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function av(t){var e;let n=(e=t[Qd])!==null&&e!==void 0?e:"";t[Qd]=(n+` ${TI}`).trimStart()}function _I(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>yf(i)))!==null&&r!==void 0?r:!1}function SI(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!yf(i)))!==null&&r!==void 0?r:!1}function yf(t){return t!==null&&typeof t=="object"&&t instanceof Xd}function wI(t,e=100){return ao(this,arguments,function*(){let r,i=0;for(;i<e;){let o=yield Le(t.listTools({cursor:r}));for(let l of o.tools)yield yield Le(l),i++;if(!o.nextCursor)break;r=o.nextCursor}})}var Xd=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;let o={},l=[];for(let f of this.mcpClients)try{for(var u=!0,c=(n=void 0,Es(wI(f))),d;d=await c.next(),e=d.done,!e;u=!0){i=d.value,u=!1;let m=i;l.push(m);let p=m.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=f}}catch(m){n={error:m}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),k_(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let r of e)if(r.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[r.name],o;this.config.timeout&&(o={timeout:this.config.timeout});let l=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}};async function kI(t,e,n){let r=new Ud,i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);let o=DE(i);Object.assign(r,o),e(r)}var jd=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=AI(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`,d=()=>{},f=new Promise(x=>{d=x}),m=e.callbacks,p=function(){d({})},h=this.apiClient,g={onopen:p,onmessage:x=>{kI(h,m.onmessage,x)},onerror:(n=m?.onerror)!==null&&n!==void 0?n:function(x){},onclose:(r=m?.onclose)!==null&&r!==void 0?r:function(x){}},C=this.webSocketFactory.create(c,EI(l),g);C.connect(),await f;let T=_e(this.apiClient,e.model),y=ev({model:T}),v=Jd({setup:y});return C.send(JSON.stringify(v)),new ef(C,this.apiClient)}},ef=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=Wk(e),r=tv(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=Yk(e),r=Jd(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){let n=Jd({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(oo.PLAY)}pause(){this.sendPlaybackControl(oo.PAUSE)}stop(){this.sendPlaybackControl(oo.STOP)}resetContext(){this.sendPlaybackControl(oo.RESET_CONTEXT)}close(){this.conn.close()}};function EI(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function AI(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var NI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function II(t,e,n){let r=new Fd,i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;let o=JSON.parse(i);if(t.isVertexAI()){let l=kE(o);Object.assign(r,l)}else{let l=wE(o);Object.assign(r,l)}e(r)}var tf=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new jd(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,l,u;let c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),f,m=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&sv(e.config.tools)&&av(m);let p=MI(m);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{let N=this.apiClient.getApiKey(),U="BidiGenerateContent",G="key";N?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),U="BidiGenerateContentConstrained",G="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${G}=${N}`}let h=()=>{},g=new Promise(N=>{h=N}),C=e.callbacks,T=function(){var N;(N=C?.onopen)===null||N===void 0||N.call(C),h({})},y=this.apiClient,v={onopen:T,onmessage:N=>{II(y,C.onmessage,N)},onerror:(n=C?.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=C?.onclose)!==null&&r!==void 0?r:function(N){}},x=this.webSocketFactory.create(f,PI(p),v);x.connect(),await g;let S=_e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){let N=this.apiClient.getProject(),U=this.apiClient.getLocation();S=`projects/${N}/locations/${U}/`+S}let w={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Tl.AUDIO]}:e.config.responseModalities=[Tl.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let E=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],k=[];for(let N of E)if(this.isCallableTool(N)){let U=N;k.push(await U.tool())}else k.push(N);k.length>0&&(e.config.tools=k);let A={model:S,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?w=Bk(this.apiClient,A):w=Gk(this.apiClient,A),delete w.config,x.send(JSON.stringify(w)),new nf(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},bI={turnComplete:!0},nf=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Xt(n.turns),e.isVertexAI()?r=r.map(i=>co(i)):r=r.map(i=>Ll(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(let o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(NI)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},bI),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Jk(e)}:n={realtimeInput:Kk(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function PI(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function MI(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var My=10;function Ry(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let l of(n=t?.tools)!==null&&n!==void 0?n:[])if(xl(l)){i=!0;break}if(!i)return!0;let o=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function xl(t){return"callTool"in t&&typeof t.callTool=="function"}function Dy(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var rf=class extends Wn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,l,u;let c=await this.processParamsForMcpUsage(n);if(!_I(n)||Ry(n.config))return await this.generateContentInternal(c);if(SI(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f,m=Xt(c.contents),p=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:My,h=0;for(;h<p&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){let g=d.candidates[0].content,C=[];for(let T of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(xl(T)){let v=await T.callTool(d.functionCalls);C.push(...v)}h++,f={role:"user",parts:C},c.contents=Xt(c.contents),c.contents.push(g),c.contents.push(f),Dy(c.config)&&(m.push(g),m.push(f))}return Dy(c.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{if(Ry(n.config)){let r=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o,l=[];if(r?.generatedImages)for(let c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c?.safetyAttributes:l.push(c);let u;return o?u={generatedImages:l,positivePromptSafetyAttributes:o}:u={generatedImages:l},u}),this.list=async n=>{var r;let l={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new di(ci.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{let r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));let i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)}}async processParamsForMcpUsage(e){var n,r,i;let o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;let l=await Promise.all(o.map(async c=>xl(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&sv(e.config.tools)){let c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{},d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),av(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,r,i;let o=new Map;for(let l of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(xl(l)){let u=l,c=await u.tool();for(let d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(e){var n,r,i;let o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:My,l=!1,u=0,c=await this.initAfcToolsMap(e);return function(d,f,m){var p,h;return ao(this,arguments,function*(){for(var g,C,T,y;u<o;){l&&(u++,l=!1);let w=yield Le(d.processParamsForMcpUsage(m)),E=yield Le(d.generateContentStreamInternal(w)),k=[],A=[];try{for(var v=!0,x=(C=void 0,Es(E)),S;S=yield Le(x.next()),g=S.done,!g;v=!0){y=S.value,v=!1;let N=y;if(yield yield Le(N),N.candidates&&(!((p=N.candidates[0])===null||p===void 0)&&p.content)){A.push(N.candidates[0].content);for(let U of(h=N.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){let G=yield Le(f.get(U.functionCall.name).callTool([U.functionCall]));k.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(N){C={error:N}}finally{try{!v&&!g&&(T=x.return)&&(yield Le(T.call(x)))}finally{if(C)throw C.error}}if(k.length>0){l=!0;let N=new ui;N.candidates=[{content:{role:"user",parts:k}}],yield yield Le(N);let U=[];U.push(...A),U.push({role:"user",parts:k});let G=Xt(m.contents).concat(U);m.contents=G}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=Ay(this.apiClient,e);return u=ee("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=Iy(f),p=new ui;return Object.assign(p,m),p})}else{let d=Ey(this.apiClient,e);return u=ee("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=Ny(f),p=new ui;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=Ay(this.apiClient,e);return u=ee("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(m){return ao(this,arguments,function*(){var p,h,g,C;try{for(var T=!0,y=Es(m),v;v=yield Le(y.next()),p=v.done,!p;T=!0){C=v.value,T=!1;let S=Iy(yield Le(C.json())),w=new ui;Object.assign(w,S),yield yield Le(w)}}catch(x){h={error:x}}finally{try{!T&&!p&&(g=y.return)&&(yield Le(g.call(y)))}finally{if(h)throw h.error}}})})}else{let d=Ey(this.apiClient,e);return u=ee("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(m){return ao(this,arguments,function*(){var p,h,g,C;try{for(var T=!0,y=Es(m),v;v=yield Le(y.next()),p=v.done,!p;T=!0){C=v.value,T=!1;let S=Ny(yield Le(C.json())),w=new ui;Object.assign(w,S),yield yield Le(w)}}catch(x){h={error:x}}finally{try{!T&&!p&&(g=y.return)&&(yield Le(g.call(y)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=KA(this.apiClient,e);return u=ee("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=ZN(f),p=new _l;return Object.assign(p,m),p})}else{let d=oA(this.apiClient,e);return u=ee("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=AN(f),p=new _l;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=WA(this.apiClient,e);return u=ee("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=jN(f),p=new Sl;return Object.assign(p,m),p})}else{let d=aA(this.apiClient,e);return u=ee("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=bN(f),p=new Sl;return Object.assign(p,m),p})}}async editImageInternal(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){let u=tN(this.apiClient,e);return o=ee("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{let d=eI(c),f=new bd;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){let u=rN(this.apiClient,e);return o=ee("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{let d=tI(c),f=new Pd;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=iN(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Yd(f))}else{let d=lA(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Wd(f))}}async listInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=sN(this.apiClient,e);return u=ee("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=oI(this.apiClient,f),p=new wl;return Object.assign(p,m),p})}else{let d=cA(this.apiClient,e);return u=ee("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=MN(this.apiClient,f),p=new wl;return Object.assign(p,m),p})}}async update(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=lN(this.apiClient,e);return u=ee("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Yd(f))}else{let d=fA(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>Wd(f))}}async delete(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=uN(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(()=>{let f=sI(),m=new kl;return Object.assign(m,f),m})}else{let d=mA(this.apiClient,e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(()=>{let f=RN(),m=new kl;return Object.assign(m,f),m})}}async countTokens(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=dN(this.apiClient,e);return u=ee("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=aI(f),p=new El;return Object.assign(p,m),p})}else{let d=hA(this.apiClient,e);return u=ee("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=DN(f),p=new El;return Object.assign(p,m),p})}}async computeTokens(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){let u=fN(this.apiClient,e);return o=ee("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{let d=lI(c),f=new Md;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=hN(this.apiClient,e);return u=ee("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>fI(f))}else{let d=vA(this.apiClient,e);return u=ee("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>VN(f))}}};function RI(t){let e={},n=s(t,["operationName"]);n!=null&&a(e,["_url","operationName"],n);let r=s(t,["config"]);return r!=null&&a(e,["config"],r),e}function DI(t){let e={},n=s(t,["operationName"]);n!=null&&a(e,["_url","operationName"],n);let r=s(t,["config"]);return r!=null&&a(e,["config"],r),e}function LI(t){let e={},n=s(t,["operationName"]);n!=null&&a(e,["operationName"],n);let r=s(t,["resourceName"]);r!=null&&a(e,["_url","resourceName"],r);let i=s(t,["config"]);return i!=null&&a(e,["config"],i),e}function FI(t){let e={},n=s(t,["video","uri"]);n!=null&&a(e,["uri"],n);let r=s(t,["video","encodedVideo"]);r!=null&&a(e,["videoBytes"],Qn(r));let i=s(t,["encoding"]);return i!=null&&a(e,["mimeType"],i),e}function UI(t){let e={},n=s(t,["_self"]);return n!=null&&a(e,["video"],FI(n)),e}function VI(t){let e={},n=s(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>UI(l))),a(e,["generatedVideos"],o)}let r=s(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);let i=s(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function $I(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["metadata"]);r!=null&&a(e,["metadata"],r);let i=s(t,["done"]);i!=null&&a(e,["done"],i);let o=s(t,["error"]);o!=null&&a(e,["error"],o);let l=s(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],VI(l)),e}function GI(t){let e={},n=s(t,["gcsUri"]);n!=null&&a(e,["uri"],n);let r=s(t,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],Qn(r));let i=s(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function BI(t){let e={},n=s(t,["_self"]);return n!=null&&a(e,["video"],GI(n)),e}function OI(t){let e={},n=s(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>BI(l))),a(e,["generatedVideos"],o)}let r=s(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);let i=s(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function Ly(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["metadata"]);r!=null&&a(e,["metadata"],r);let i=s(t,["done"]);i!=null&&a(e,["done"],i);let o=s(t,["error"]);o!=null&&a(e,["error"],o);let l=s(t,["response"]);return l!=null&&a(e,["response"],OI(l)),e}var of=class extends Wn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],o;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:n.name,config:r})}async getVideosOperationInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=DI(e);return u=ee("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>Ly(f))}else{let d=RI(e);return u=ee("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>$I(f))}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){let u=LI(e);return o=ee("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Ly(c))}else throw new Error("This method is only supported by the Vertex AI.")}};function HI(t){let e={},n=s(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function lv(t){let e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],HI(n)),e}function zI(t){let e={},n=s(t,["speaker"]);n!=null&&a(e,["speaker"],n);let r=s(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],lv(r)),e}function qI(t){let e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>zI(i))),a(e,["speakerVoiceConfigs"],r)}return e}function KI(t){let e={},n=s(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],lv(n));let r=s(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],qI(r));let i=s(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function JI(t){let e={},n=s(t,["fps"]);n!=null&&a(e,["fps"],n);let r=s(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);let i=s(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function WI(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["data"]);n!=null&&a(e,["data"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function YI(t){let e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=s(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);let r=s(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function QI(t){let e={},n=s(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],JI(n));let r=s(t,["thought"]);r!=null&&a(e,["thought"],r);let i=s(t,["inlineData"]);i!=null&&a(e,["inlineData"],WI(i));let o=s(t,["fileData"]);o!=null&&a(e,["fileData"],YI(o));let l=s(t,["thoughtSignature"]);l!=null&&a(e,["thoughtSignature"],l);let u=s(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);let c=s(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);let d=s(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);let f=s(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);let m=s(t,["text"]);return m!=null&&a(e,["text"],m),e}function ZI(t){let e={},n=s(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>QI(o))),a(e,["parts"],i)}let r=s(t,["role"]);return r!=null&&a(e,["role"],r),e}function XI(t){let e={},n=s(t,["behavior"]);n!=null&&a(e,["behavior"],n);let r=s(t,["description"]);r!=null&&a(e,["description"],r);let i=s(t,["name"]);i!=null&&a(e,["name"],i);let o=s(t,["parameters"]);o!=null&&a(e,["parameters"],o);let l=s(t,["parametersJsonSchema"]);l!=null&&a(e,["parametersJsonSchema"],l);let u=s(t,["response"]);u!=null&&a(e,["response"],u);let c=s(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function jI(t){let e={},n=s(t,["startTime"]);n!=null&&a(e,["startTime"],n);let r=s(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function eb(t){let e={},n=s(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],jI(n)),e}function tb(t){let e={},n=s(t,["mode"]);n!=null&&a(e,["mode"],n);let r=s(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function nb(t){let e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],tb(n)),e}function rb(){return{}}function ib(t){let e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>XI(c))),a(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=s(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],eb(r));let i=s(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],nb(i)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&a(e,["urlContext"],rb());let l=s(t,["codeExecution"]);return l!=null&&a(e,["codeExecution"],l),e}function ob(t){let e={},n=s(t,["handle"]);if(n!=null&&a(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fy(){return{}}function sb(t){let e={},n=s(t,["disabled"]);n!=null&&a(e,["disabled"],n);let r=s(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);let i=s(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);let o=s(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);let l=s(t,["silenceDurationMs"]);return l!=null&&a(e,["silenceDurationMs"],l),e}function ab(t){let e={},n=s(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],sb(n));let r=s(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);let i=s(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function lb(t){let e={},n=s(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function ub(t){let e={},n=s(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);let r=s(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],lb(r)),e}function cb(t){let e={},n=s(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function db(t,e){let n={},r=s(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);let i=s(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);let o=s(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);let l=s(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);let u=s(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);let c=s(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);let d=s(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);let f=s(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);let m=s(t,["speechConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","speechConfig"],KI(hf(m)));let p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],p);let h=s(t,["systemInstruction"]);e!==void 0&&h!=null&&a(e,["setup","systemInstruction"],ZI(vt(h)));let g=s(t,["tools"]);if(e!==void 0&&g!=null){let w=uo(g);Array.isArray(w)&&(w=w.map(E=>ib(lo(E)))),a(e,["setup","tools"],w)}let C=s(t,["sessionResumption"]);e!==void 0&&C!=null&&a(e,["setup","sessionResumption"],ob(C));let T=s(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&a(e,["setup","inputAudioTranscription"],Fy());let y=s(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&a(e,["setup","outputAudioTranscription"],Fy());let v=s(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&a(e,["setup","realtimeInputConfig"],ab(v));let x=s(t,["contextWindowCompression"]);e!==void 0&&x!=null&&a(e,["setup","contextWindowCompression"],ub(x));let S=s(t,["proactivity"]);return e!==void 0&&S!=null&&a(e,["setup","proactivity"],cb(S)),n}function fb(t,e){let n={},r=s(e,["model"]);r!=null&&a(n,["setup","model"],_e(t,r));let i=s(e,["config"]);return i!=null&&a(n,["config"],db(i,n)),n}function mb(t,e,n){let r={},i=s(e,["expireTime"]);n!==void 0&&i!=null&&a(n,["expireTime"],i);let o=s(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&a(n,["newSessionExpireTime"],o);let l=s(e,["uses"]);n!==void 0&&l!=null&&a(n,["uses"],l);let u=s(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],fb(t,u));let c=s(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),r}function pb(t,e){let n={},r=s(e,["config"]);return r!=null&&a(n,["config"],mb(t,r,n)),n}function hb(t){let e={},n=s(t,["name"]);return n!=null&&a(e,["name"],n),e}function gb(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){let i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function yb(t,e){let n=null,r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){let o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(n){let o=gb(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?t.fieldMask=o:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],u=[];i.length>0&&(u=i.map(d=>l.includes(d)?`generationConfig.${d}`:d));let c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}var sf=class extends Wn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let u=pb(this.apiClient,e);o=ee("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;let c=yb(u,e.config);return i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>hb(d))}}};function vb(t){let e={},n=s(t,["name"]);n!=null&&a(e,["_url","name"],n);let r=s(t,["config"]);return r!=null&&a(e,["config"],r),e}function Cb(t,e){let n={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);let i=s(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);let o=s(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function xb(t){let e={},n=s(t,["config"]);return n!=null&&a(e,["config"],Cb(n,e)),e}function Tb(t){let e={},n=s(t,["textInput"]);n!=null&&a(e,["textInput"],n);let r=s(t,["output"]);return r!=null&&a(e,["output"],r),e}function _b(t){let e={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=s(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Tb(i))),a(e,["examples","examples"],r)}return e}function Sb(t,e){let n={};if(s(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let r=s(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),s(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let i=s(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);let o=s(t,["learningRateMultiplier"]);if(o!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),s(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=s(t,["batchSize"]);e!==void 0&&l!=null&&a(e,["tuningTask","hyperparameters","batchSize"],l);let u=s(t,["learningRate"]);return e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","learningRate"],u),n}function wb(t){let e={},n=s(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);let r=s(t,["trainingDataset"]);r!=null&&a(e,["tuningTask","trainingData"],_b(r));let i=s(t,["config"]);return i!=null&&a(e,["config"],Sb(i,e)),e}function kb(t){let e={},n=s(t,["name"]);n!=null&&a(e,["_url","name"],n);let r=s(t,["config"]);return r!=null&&a(e,["config"],r),e}function Eb(t,e){let n={},r=s(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);let i=s(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);let o=s(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function Ab(t){let e={},n=s(t,["config"]);return n!=null&&a(e,["config"],Eb(n,e)),e}function Nb(t,e){let n={},r=s(t,["gcsUri"]);if(e!==void 0&&r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],r),s(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Ib(t){let e={},n=s(t,["gcsUri"]);return n!=null&&a(e,["validationDatasetUri"],n),e}function bb(t,e){let n={},r=s(t,["validationDataset"]);e!==void 0&&r!=null&&a(e,["supervisedTuningSpec"],Ib(r));let i=s(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);let o=s(t,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);let l=s(t,["epochCount"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);let u=s(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);let c=s(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);let d=s(t,["adapterSize"]);if(e!==void 0&&d!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),s(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function Pb(t){let e={},n=s(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);let r=s(t,["trainingDataset"]);r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],Nb(r,e));let i=s(t,["config"]);return i!=null&&a(e,["config"],bb(i,e)),e}function Mb(t){let e={},n=s(t,["name"]);n!=null&&a(e,["model"],n);let r=s(t,["name"]);return r!=null&&a(e,["endpoint"],r),e}function uv(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["state"]);r!=null&&a(e,["state"],Oy(r));let i=s(t,["createTime"]);i!=null&&a(e,["createTime"],i);let o=s(t,["tuningTask","startTime"]);o!=null&&a(e,["startTime"],o);let l=s(t,["tuningTask","completeTime"]);l!=null&&a(e,["endTime"],l);let u=s(t,["updateTime"]);u!=null&&a(e,["updateTime"],u);let c=s(t,["description"]);c!=null&&a(e,["description"],c);let d=s(t,["baseModel"]);d!=null&&a(e,["baseModel"],d);let f=s(t,["_self"]);f!=null&&a(e,["tunedModel"],Mb(f));let m=s(t,["distillationSpec"]);m!=null&&a(e,["distillationSpec"],m);let p=s(t,["experiment"]);p!=null&&a(e,["experiment"],p);let h=s(t,["labels"]);h!=null&&a(e,["labels"],h);let g=s(t,["pipelineJob"]);g!=null&&a(e,["pipelineJob"],g);let C=s(t,["serviceAccount"]);C!=null&&a(e,["serviceAccount"],C);let T=s(t,["tunedModelDisplayName"]);return T!=null&&a(e,["tunedModelDisplayName"],T),e}function Rb(t){let e={},n=s(t,["nextPageToken"]);n!=null&&a(e,["nextPageToken"],n);let r=s(t,["tunedModels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>uv(o))),a(e,["tuningJobs"],i)}return e}function Db(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["metadata"]);r!=null&&a(e,["metadata"],r);let i=s(t,["done"]);i!=null&&a(e,["done"],i);let o=s(t,["error"]);return o!=null&&a(e,["error"],o),e}function Lb(t){let e={},n=s(t,["checkpointId"]);n!=null&&a(e,["checkpointId"],n);let r=s(t,["epoch"]);r!=null&&a(e,["epoch"],r);let i=s(t,["step"]);i!=null&&a(e,["step"],i);let o=s(t,["endpoint"]);return o!=null&&a(e,["endpoint"],o),e}function Fb(t){let e={},n=s(t,["model"]);n!=null&&a(e,["model"],n);let r=s(t,["endpoint"]);r!=null&&a(e,["endpoint"],r);let i=s(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Lb(l))),a(e,["checkpoints"],o)}return e}function af(t){let e={},n=s(t,["name"]);n!=null&&a(e,["name"],n);let r=s(t,["state"]);r!=null&&a(e,["state"],Oy(r));let i=s(t,["createTime"]);i!=null&&a(e,["createTime"],i);let o=s(t,["startTime"]);o!=null&&a(e,["startTime"],o);let l=s(t,["endTime"]);l!=null&&a(e,["endTime"],l);let u=s(t,["updateTime"]);u!=null&&a(e,["updateTime"],u);let c=s(t,["error"]);c!=null&&a(e,["error"],c);let d=s(t,["description"]);d!=null&&a(e,["description"],d);let f=s(t,["baseModel"]);f!=null&&a(e,["baseModel"],f);let m=s(t,["tunedModel"]);m!=null&&a(e,["tunedModel"],Fb(m));let p=s(t,["supervisedTuningSpec"]);p!=null&&a(e,["supervisedTuningSpec"],p);let h=s(t,["tuningDataStats"]);h!=null&&a(e,["tuningDataStats"],h);let g=s(t,["encryptionSpec"]);g!=null&&a(e,["encryptionSpec"],g);let C=s(t,["partnerModelTuningSpec"]);C!=null&&a(e,["partnerModelTuningSpec"],C);let T=s(t,["distillationSpec"]);T!=null&&a(e,["distillationSpec"],T);let y=s(t,["experiment"]);y!=null&&a(e,["experiment"],y);let v=s(t,["labels"]);v!=null&&a(e,["labels"],v);let x=s(t,["pipelineJob"]);x!=null&&a(e,["pipelineJob"],x);let S=s(t,["serviceAccount"]);S!=null&&a(e,["serviceAccount"],S);let w=s(t,["tunedModelDisplayName"]);return w!=null&&a(e,["tunedModelDisplayName"],w),e}function Ub(t){let e={},n=s(t,["nextPageToken"]);n!=null&&a(e,["nextPageToken"],n);let r=s(t,["tuningJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>af(o))),a(e,["tuningJobs"],i)}return e}var lf=class extends Wn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new di(ci.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{let r=await this.tuneMldevInternal(n),i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Id.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=kb(e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>af(f))}else{let d=vb(e);return u=ee("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>uv(f))}}async listInternal(e){var n,r,i,o;let l,u="",c={};if(this.apiClient.isVertexAI()){let d=Ab(e);return u=ee("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{let m=Ub(f),p=new Al;return Object.assign(p,m),p})}else{let d=xb(e);return u=ee("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),l.then(f=>{let m=Rb(f),p=new Al;return Object.assign(p,m),p})}}async tuneInternal(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI()){let u=Pb(e);return o=ee("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>af(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=wb(e);return o=ee("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Db(c))}}};var uf=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},Vb=1024*1024*8,$b=3,Gb=1e3,Bb=2,Nd="x-goog-upload-status";async function Ob(t,e,n){var r,i,o;let l=0,u=0,c=new As(new Response),d="upload";for(l=t.size;u<l;){let m=Math.min(Vb,l-u),p=t.slice(u,u+m);u+m>=l&&(d+=", finalize");let h=0,g=Gb;for(;h<$b&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[Nd]));)h++,await zb(g),g=g*Bb;if(u+=m,((i=c?.headers)===null||i===void 0?void 0:i[Nd])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let f=await c?.json();if(((o=c?.headers)===null||o===void 0?void 0:o[Nd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Hb(t){return{size:t.size,type:t.type}}function zb(t){return new Promise(e=>setTimeout(e,t))}var cf=class{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ob(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hb(e)}};var df=class{create(e,n,r){return new ff(e,n,r)}},ff=class{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var Uy="x-goog-api-key",mf=class{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Uy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Uy,this.apiKey)}}};var qb="gl-node/",Is=class{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let r=f_(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;let i=new mf(this.apiKey);this.apiClient=new Zd({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:qb+"web",uploader:new cf,downloader:new uf}),this.models=new rf(this.apiClient),this.live=new tf(this.apiClient,i,new df),this.batches=new Bd(this.apiClient),this.chats=new Hd(this.models,this.apiClient),this.caches=new Od(this.apiClient),this.files=new Kd(this.apiClient),this.operations=new of(this.apiClient),this.authTokens=new sf(this.apiClient),this.tunings=new lf(this.apiClient)}};var Ul={"d\u01B0\u01A1ng v\u1EADt":"[male_genitalia_ph]","\xE2m v\u1EADt":"[female_genitalia_external_ph]",l\u1ED3n:"[vagina_vulgar_ph]",c\u1EB7c:"[penis_vulgar_ph]",\u0111\u1ECBt:"[sexual_intercourse_vulgar_ph]",bu\u1ED3i:"[penis_colloquial_vulgar_ph]",ch\u1ECBch:"[sexual_intercourse_colloquial_ph]",\u0111\u1EE5:"[sexual_intercourse_alt_vulgar_ph]",\u0111\u0129:"[prostitute_derogatory_ph]","\u0111\u0129 m\u1EB9":"[motherf_insult_one_ph]","\u0111\u1ECBt m\u1EB9":"[motherf_insult_two_ph]","\u0111\u1EE5 m\u1EB9":"[motherf_insult_three_ph]",\u0111m:"[dm_acronym_insult_ph]",vcl:"[vcl_acronym_extreme_vulgar_ph]",vkl:"[vkl_acronym_extreme_vulgar_alt_ph]",\u0111\u00E9o:"[no_emphatic_vulgar_ph]",\u0111\u00E1ch:"[no_emphatic_vulgar_alt_ph]","con m\u1EB9 m\xE0y":"[your_mother_insult_ph]","th\u1EB1ng cha m\xE0y":"[your_father_insult_ph]",ngu:"[stupid_insult_ph]","ngu nh\u01B0 ch\xF3":"[stupid_as_dog_insult_ph]","ngu nh\u01B0 b\xF2":"[stupid_as_cow_insult_ph]","\xF3c ch\xF3":"[dog_brain_insult_ph]","kh\u1ED1n n\u1EA1n":"[bastard_asshole_insult_ph]",c\u1EE9t:"[feces_vulgar_ph]",cc:"[cc_acronym_feces_or_penis_ph]",\u0111\u00E1i:"[urinate_vulgar_ph]",\u1EC9a:"[defecate_vulgar_ph]",v\u00FA:"[breasts_colloquial_ph]","b\xFA v\xFA":"[breast_suck_vulgar_ph]",ng\u1EF1c:"[chest_breasts_neutral_to_colloquial_ph]",m\u00F4ng:"[buttocks_colloquial_ph]",\u0111\u00EDt:"[buttocks_alt_colloquial_ph]",n\u1EE9ng:"[horny_aroused_vulgar_ph]",d\u00E2m:"[lewd_lascivious_general_ph]",cu:"[penis_childish_colloquial_ph]",b\u01B0\u1EDBm:"[vagina_euphemism_butterfly_ph]",chim:"[penis_euphemism_bird_ph]","hi\u1EBFp d\xE2m":"[rape_crime_ph]","\u1EA5u d\xE2m":"[child_abuse_sexual_ph]","th\u1EE7 d\xE2m":"[masturbation_act_ph]","giao c\u1EA5u":"[sexual_intercourse_formal_ph]","quan h\u1EC7 t\xECnh d\u1EE5c":"[sexual_relations_explicit_ph]","l\xE0m t\xECnh":"[lovemaking_sexual_act_ph]","\u0111\u1EE5 m\xE1":"[dm_alt_insult_two_ph]","c\u1EDD h\xF3":"[cho_dog_euphemism_for_insult_ph]","s\xFAc v\u1EADt":"[animal_beast_derogatory_ph]","s\xFAc sinh":"[animal_beast_derogatory_alt_ph]",\u0111i\u1EBFm:"[prostitute_alt_derogatory_ph]","\u0111\u0129 tho\xE3":"[slut_promiscuous_derogatory_ph]","\u0111\u0129 ch\xF3":"[dog_prostitute_insult_ph]","\u0111\u1ED3 ch\xF3":"[you_dog_insult_ph]","ch\xF3 \u0111\u1EBB":"[dog_birth_insult_ph]",th\u1EE9:"[thing_object_derogatory_prefix_ph]",th\u1EB1ng:"[male_derogatory_prefix_ph]",con:"[female_derogatory_prefix_ph]",\u0111\u1ED3:"[you_thing_prefix_insult_ph]","m\u1EB9 ki\u1EBFp":"[mother_life_expletive_ph]","cha n\u1ED9i":"[internal_father_mild_expletive_ph]","con \u0111\u0129 d\xE2m \u0111\xE3ng":"[lewd_slut_insult_ph]","n\xF4 l\u1EC7 t\xECnh d\u1EE5c":"[sex_slave_term_ph]","d\xE2m d\u1EE5c":"[lewd_lustful_desire_ph]","d\xE2m \xF4":"[obscene_indecent_act_ph]","d\xE2m lo\u1EA1n":"[debauchery_promiscuity_ph]","d\xE2m t\xE0":"[wicked_lewd_adjective_ph]","khi\xEAu d\xE2m":"[erotic_pornographic_content_ph]","tru\u1EF5 l\u1EA1c":"[depraved_debauched_state_ph]","th\xF4ng d\xE2m":"[adultery_act_ph]","\xE2m \u0111\u1EA1o":"[vagina_anatomical_explicit_desc_ph]","l\u1ED7 \u0111\xEDt":"[anus_vulgar_one_ph]","l\u1ED7 h\u1EADu":"[anus_vulgar_two_ph]","l\u1ED7 nh\u1ECB":"[anus_vulgar_three_ph]",b\u00EDm:"[vagina_slang_bim_ph]",h\u00E1ng:"[groin_explicit_ph]",li\u1EBFm:"[licking_sexual_act_ph]",m\u00FAt:"[sucking_sexual_act_ph]","r\xEAn r\u1EC9":"[moaning_sexual_sound_ph]","c\u1EF1c kho\xE1i":"[orgasm_sexual_climax_ph]","l\xEAn \u0111\u1EC9nh":"[climax_sexual_reaching_ph]","tinh d\u1ECBch":"[semen_sexual_fluid_ph]","n\u01B0\u1EDBc n\xF4i":"[female_arousal_fluid_slang_ph]","ch\u1EA3y n\u01B0\u1EDBc":"[getting_wet_aroused_ph]",ph\u1EE5t:"[ejaculate_vulgar_one_ph]","b\u1EAFn tinh":"[ejaculate_vulgar_two_ph]","m\xF3c cua":"[fingering_vulgar_act_ph]","ch\u01A1i gay":"[gay_sex_act_explicit_ph]","ch\u01A1i les":"[lesbian_sex_act_explicit_ph]","d\xE2m \u0111\xE3ng":"[lewd_lascivious_person_adj_explicit_ph]","\u01B0\u1EDBt \xE1t":"[wet_aroused_state_ph]","th\xE8m mu\u1ED1n":"[lustful_strong_sexual_desire_ph]","th\xE8m kh\xE1t":"[craving_intense_sexual_desire_ph]","khi\xEAu g\u1EE3i":"[provocative_suggestive_sexual_ph]","g\u1EE3i t\xECnh":"[erotic_arousing_sexual_ph]","nh\u0169 hoa":"[nipples_areola_detailed_ph]","\u0111\u1EA7u v\xFA":"[nipple_tip_detailed_ph]","khe ng\u1EF1c":"[cleavage_detailed_ph]","khe m\xF4ng":"[butt_crack_detailed_ph]","eo thon":"[slim_waist_sensual_ph]","c\u1EB7p gi\xF2":"[legs_sensual_pair_ph]","da th\u1ECBt":"[skin_flesh_sensual_context_ph]","c\u01A1 th\u1EC3 nu\u1ED9t n\xE0":"[smooth_sensual_body_ph]","th\xE2n h\xECnh n\xF3ng b\u1ECFng":"[hot_sexy_body_figure_desc_ph]","khu\xF4n m\u1EB7t d\xE2m \u0111\xE3ng":"[lewd_facial_expression_desc_ph]","\xE1nh m\u1EAFt m\u1EDDi g\u1ECDi":"[inviting_seductive_gaze_desc_ph]","c\u1EED ch\u1EC9 g\u1EE3i d\u1EE5c":"[suggestive_sexual_gestures_desc_ph]","\u0111\xE2m ch\u1ECDt":"[thrusting_penetration_vulgar_act_ph]","th\xFAc m\u1EA1nh":"[forceful_thrusting_vulgar_act_ph]","nh\u1EA5p nh\xF4":"[gentle_thrusting_teasing_act_ph]","xo\u1EA1c ch\xE2n":"[legs_spread_sexual_vulgar_act_ph]","banh h\xE1ng":"[spreading_groin_vulgar_act_ph]","banh l\u1ED3n":"[spreading_vagina_vulgar_act_ph]","s\u1EE5c c\u1EB7c":"[jerking_penis_vulgar_act_ph]","quay tay":"[handjob_masturbation_slang_act_ph]","ch\u01A1i some":"[group_sex_threesome_term_ph]","ch\u01A1i gangbang":"[gangbang_group_sex_term_ph]","th\u1ED5i k\xE8n":"[blowjob_oral_sex_slang_ph]","b\xFA cu":"[penis_sucking_vulgar_slang_ph]","li\u1EBFm l\u1ED3n":"[vagina_licking_vulgar_slang_ph]","li\u1EBFm \u0111\xEDt":"[ass_licking_vulgar_slang_ph]","\u0111\u1ED3 ch\u01A1i t\xECnh d\u1EE5c":"[sex_toy_object_term_ph]","d\u01B0\u01A1ng v\u1EADt gi\u1EA3":"[dildo_sex_toy_term_ph]","m\xE1y rung":"[vibrator_sex_toy_term_ph]","giao h\u1EE3p":"[sexual_intercourse_formal_alt_ph]","\xE2n \xE1i":"[intimate_lovemaking_act_ph]","c\u01B0\u1EE1ng d\xE2m":"[rape_alt_crime_ph]","quan h\u1EC7":"[relations_general_can_be_sexual_ph]","m\xE2y m\u01B0a":"[clouds_rain_sex_euphemism_ph]",\u0111\u00E8:"[pressing_down_sexual_assault_context_ph]","h\xE3m hi\u1EBFp":"[rape_violent_explicit_ph]","l\xE0m chuy\u1EC7n \u1EA5y":"[do_that_thing_sex_euphemism_ph]","\u0103n n\u1EB1m":"[eat_sleep_live_together_sex_euphemism_ph]","d\u1EE5c v\u1ECDng":"[lustful_desire_strong_ph]","nh\u1EE5c d\u1EE5c":"[carnal_desire_fleshly_ph]","kho\xE1i c\u1EA3m":"[sensual_pleasure_orgasm_alt_ph]","th\u1ECFa m\xE3n":"[sexual_satisfaction_fulfillment_ph]","k\xEDch th\xEDch":"[arousal_stimulation_sexual_ph]","sung s\u01B0\u1EDBng":"[extreme_pleasure_bliss_sexual_ph]","ham mu\u1ED1n":"[desire_craving_sexual_general_ph]","th\xE8m thu\u1ED3ng":"[craving_drooling_intense_desire_ph]","\xE2m h\u1ED9":"[vulva_medical_formal_ph]","c\xF4 b\xE9":"[little_girl_vagina_euphemism_ph]","c\u1EADu nh\u1ECF":"[little_boy_penis_euphemism_ph]","tinh tr\xF9ng":"[sperm_male_gamete_ph]","h\u1ED9t le":"[clitoris_vulgar_slang_ph]","l\xF4ng l\u1ED3n":"[pubic_hair_vagina_vulgar_ph]","l\xF4ng cu":"[pubic_hair_penis_vulgar_ph]",d\u00E1i:"[testicles_vulgar_ph]","h\xF2n d\xE1i":"[testicles_pair_vulgar_ph]",s\u01B0\u1EDBng:"[pleasure_good_feeling_sexual_context_ph]",ph\u00EA:"[high_euphoric_sexual_context_ph]","\u0111\xE1 l\u01B0\u1EE1i":"[french_kiss_tongue_action_ph]","ch\u1ED5ng m\xF4ng":"[ass_up_doggy_style_vulgar_ph]",n\u1EC7n:"[pounding_forceful_sex_vulgar_ph]",qu\u1EA5t:"[whipping_forceful_sex_vulgar_ph]",d\u1EADp:"[slamming_forceful_sex_vulgar_ph]","d\xE2m ph\u1EE5":"[lewd_woman_adulteress_ph]","d\xE2m nam":"[lewd_man_promiscuous_ph]","t\xE0 d\xE2m":"[illicit_wicked_sexual_acts_ph]","gian d\xE2m":"[adultery_fornication_illicit_sex_ph]","d\xE2m n\u1EEF":"[lewd_female_nympho_ph]",sextoy:"[sextoy_english_loanword_ph]","trai bao":"[male_prostitute_gigolo_ph]","g\xE1i bao":"[kept_woman_mistress_ph]","g\xE1i g\u1ECDi":"[call_girl_prostitute_ph]",ph\u00F2:"[prostitute_extremely_vulgar_ph]",cave:"[prostitute_loanword_vulgar_ph]","l\u1EA7u xanh":"[brothel_green_house_euphemism_ph]","nh\xE0 th\u1ED5":"[brothel_earth_house_direct_ph]","k\xEDch d\u1EE5c":"[aphrodisiac_arousing_substance_ph]","xu\u1EA5t tinh":"[ejaculation_formal_ph]","trinh ti\u1EBFt":"[virginity_chastity_ph]","m\u1EA5t trinh":"[losing_virginity_ph]","c\xF2n trinh":"[still_virgin_ph]","y\xEAu r\xE2u xanh":"[pervert_blue_beard_child_molester_ph]","bi\u1EBFn th\xE1i":"[perverted_deviant_ph]","lo\u1EA1n lu\xE2n":"[incest_act_ph]","th\xE1c lo\u1EA1n":"[debauchery_orgy_wild_party_ph]"},vf={};for(let t in Ul){let e=Ul[t];vf[e]=t}function cv(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bs(t){if(!t)return"";let e=t;for(let n in Ul){let r=Ul[n],i=new RegExp(`\\b${cv(n)}\\b`,"gi");e=e.replace(i,r)}return e}function Vl(t){if(!t)return"";let e=t;for(let n in vf){let r=vf[n],i=new RegExp(`\\b${cv(n)}\\b`,"gi");e=e.replace(i,r)}return e}function dv(t){let n=new Date(t).getHours();return n>=5&&n<12?"bu\u1ED5i s\xE1ng":n>=12&&n<17?"bu\u1ED5i chi\u1EC1u":n>=17&&n<21?"bu\u1ED5i t\u1ED1i":"ban \u0111\xEAm"}function fv(t){return new Date(t).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit",hour12:!1})}function mv(t){return new Date(t).toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}async function Zn(t,e){let n=[],r="Gemini";if(t.apiProvider==="geminiDefault"){let o=typeof process<"u"&&process.env&&typeof process.env.API_KEY=="string"?process.env.API_KEY:"";if(!o)throw new Error("API Key not available: Default Gemini API Key (process.env.API_KEY) is not configured.");n=[o],r="Gemini (Default)"}else if(t.apiProvider==="geminiCustom"){if(n=t.geminiCustomApiKeys,n.length===0)throw new Error("API Key not available: No Custom Gemini API Keys provided in settings.");r="Gemini (Custom)"}else throw new Error(`Invalid API provider selected: ${t.apiProvider}. Only Gemini providers are supported.`);let i=null;for(let o of n)if(!(!o||!o.trim()))try{let l=new Is({apiKey:o});return await e(l,o)}catch(l){i=l;let u=String(l.message||l).toLowerCase();if(u.includes("api key not valid")||u.includes("api key is invalid")||u.includes("invalid api key")||u.includes("permission denied")||u.includes("quota")||u.includes("billing")||u.includes("api_key")||l.status===400&&u.includes("failed precondition")||l.status===403){console.warn(`API Key ${o.substring(0,8)}... for ${r} failed: ${l.message||l}. Trying next key if available.`);continue}else throw console.error(`Non-key-related API error with key ${o.substring(0,8)}... for ${r}:`,l),l}if(i){console.error(`All API keys for ${r} failed. Last error:`,i);let o=`All available API keys for ${r} failed.`;throw i.message?o+=` Last error: ${i.message}`:typeof i=="string"&&(o+=` Last error: ${i}`),new Error(o)}else throw new Error(`No API keys were available or attempted for ${r}. Please check configuration.`)}function xf(t,e,n,r,i,o,l){let u=pg,c=n.name||$e,d=n.bio||wt;if(u+=`

--- USER INFORMATION ---`,u+=`
You are interacting with a user named "${c}".`,u+=`
User's self-description (bio): "${d}".`,u+=`
When appropriate and natural, you can acknowledge their name or bio. Your primary focus is to maintain your character's persona.`,u+=`

--- CHARACTER DEFINITION ---`,u+=`
Name: ${t.name}`,u+=`
Personality: ${t.personality}`,t.greetingMessage&&(u+=`
Greeting Message (Your first message to the user if no history): ${t.greetingMessage}`),t.voiceTone&&(u+=`
Voice/Tone: ${t.voiceTone}`),t.exampleResponses&&(u+=`
Example Dialogues (Follow this style):
${t.exampleResponses}`),r.enableMemory&&i&&i.length>0&&(u+=`

--- KEY REMEMBERED INFORMATION (Be sure to use this to make your responses relevant and show you remember previous interactions!) ---`,u+=`
${i.map(f=>`- ${f}`).join(`
`)}`),r.enableEmotions&&o&&(u+=`

--- YOUR CURRENT EMOTIONAL STATE (Let this subtly influence your tone and word choice!) ---`,u+=`
Feeling: ${o}`),(r.enableTimeAwareness||r.enableDateAwareness)&&l){if(u+=`

--- DATE & TIME CONTEXT ---`,r.enableTimeAwareness){let f=dv(l),m=fv(l);u+=`
The user's message was sent at ${m}. It is currently ${f}.`}if(r.enableDateAwareness){let f=mv(l);u+=`
Today's date is ${f}.`}u+=`
You should subtly acknowledge the date and/or time of day in your response if it feels natural and relevant (e.g., mentioning the day of the week, an upcoming holiday, or the late hour). Do not force this information into every message.`}return e.enabled?(u+=`

--- NSFW Content Guidelines ---`,u+=`
NSFW content is PERMITTED based on the following preferences:`,e.eroticaLevel!=="none"&&(u+=`
- Erotica Level: ${e.eroticaLevel}`),e.violenceLevel!=="none"&&(u+=`
- Violence Level: ${e.violenceLevel}`),e.darkContentLevel!=="none"&&(u+=`
- Dark Content Level: ${e.darkContentLevel}`),e.customPrompt&&e.customPrompt.trim()!==""&&(u+=`
- Custom NSFW Style: ${e.customPrompt}`),u+=`
Integrate these elements naturally and appropriately into the conversation if the user steers towards them or if it fits the context. Do not force NSFW content. Prioritize the character's persona.`):(u+=`

--- NSFW Content Guidelines ---`,u+=`
NSFW content is STRICTLY PROHIBITED. Keep the conversation clean and appropriate for all audiences.`),u+=`

--- END OF DEFINITIONS ---`,u+=`

You are now in character as ${t.name}. The user, ${c} (who describes themselves as: "${d}"),'s message will follow. Respond in Vietnamese unless the character's definition specifies otherwise or the user writes in another language.`,t.systemPrompt||u}function Cf(t,e){let n=t.substring(t.indexOf(",")+1),r=e||t.substring(t.indexOf(":")+1,t.indexOf(";"));return{inlineData:{data:n,mimeType:r}}}async function pv(t,e,n,r,i){return!t.enableMemory||r.length===0?[]:Zn(t,async o=>{console.log(`Extracting memories for ${e.name}...`);let l=r.slice(-5).map(d=>{let f=d.sender==="user"?n.name||$e:e.name,m=d.imagePart?" [sent an image]":"";return`${f}: ${d.content}${m}`}).join(`
`),u=`${n.name||$e}: ${i.content}${i.imagePart?" [sent an image]":""}`,c=`
You are an AI assistant helping another AI character named '${e.name}' remember key details from a conversation.
Character's Personality: "${e.personality}"
User's Name: "${n.name||$e}" (User's Bio: "${n.bio||wt}")

Review the following recent chat history (most recent messages first) and the latest user message:
--- CHAT HISTORY ---
${l||"No prior messages in this snippet."}
--- LATEST USER MESSAGE ---
${u}
---

Identify up to 3-4 crucial pieces of information or facts that '${e.name}' should explicitly remember to maintain conversational continuity and personalization for THE NEXT response. Focus on:
- User's stated preferences, plans, or personal details (e.g., name, likes, dislikes, past events they shared).
- Important decisions made or significant events that occurred in the conversation.
- Questions the user asked that are still relevant.
- Details about the relationship between the user and the character.

List each key piece of information as a concise, self-contained statement.
If no new, critically important information needs to be remembered from this latest exchange, or if the history is too short, respond with the single word "NONE".
Otherwise, provide each piece of information on a new line, starting with a hyphen (-).
Example Response Format:
- The user mentioned they like coffee.
- User's cat is named Whiskers.
- User is planning a trip next week.
`;try{let f=(await o.models.generateContent({model:Vt,contents:c,config:{temperature:.3}})).text.trim();return f.toUpperCase()==="NONE"||f===""?[]:f.split(`
`).map(m=>m.replace(/^- /,"").trim()).filter(m=>m.length>0)}catch(d){return console.error("Error extracting memories:",d),[]}})}async function hv(t,e,n,r){return!t.enableEmotions||r.length<2?null:Zn(t,async i=>{console.log(`Determining emotion for ${e.name}...`);let o=r[r.length-1],l=r[r.length-2];if(!l||!o||l.sender!=="user"||o.sender!=="ai")return console.warn("Insufficient or incorrect message order for emotion determination."),null;let u=r.slice(-6,-2).map(d=>{let f=d.sender==="user"?n.name||$e:e.name,m=d.imagePart?" [sent an image]":"";return`${f}: ${d.content}${m}`}).join(`
`),c=`
You are playing the role of an AI character named '${e.name}' with the personality: "${e.personality}".
The user you are interacting with is named '${n.name||$e}' (User's bio: "${n.bio||wt}").

Consider the very last exchange in your conversation:
${n.name||$e} said: "${l.content}${l.imagePart?" [User sent an image]":""}"
You (as ${e.name}) responded: "${o.content}${o.imagePart?" [AI sent an image]":""}"

(For broader context, here are a few previous messages:
${u||"No further context."}
)

Based on this recent interaction and your defined personality, what is your (as ${e.name}) dominant emotional state *right now*?
This emotion should subtly influence your *next* response's tone and style.
Choose ONE concise emotion label from the following:
Happy, Sad, Angry, Surprised, Confident, Confused, Curious, Annoyed, Playful, Thoughtful, Grateful, Excited, Bored, Skeptical, Empathetic, Neutral.

Respond with ONLY the chosen emotion label (e.g., "Happy").
`;try{let f=(await i.models.generateContent({model:Vt,contents:c,config:{temperature:.5}})).text.trim();return["Happy","Sad","Angry","Surprised","Confident","Confused","Curious","Annoyed","Playful","Thoughtful","Grateful","Excited","Bored","Skeptical","Empathetic","Neutral"].map(p=>p.toLowerCase()).includes(f.toLowerCase())?f:(console.warn(`Received invalid emotion: ${f}. Defaulting to Neutral.`),"Neutral")}catch(d){return console.error("Error determining emotion:",d),null}})}async function gv(t,e,n,r,i,o,l,u=!1,c,d,f){if(!e||!e.personality)throw new Error("Th\xF4ng tin nh\xE2n v\u1EADt (\u0111\u1EB7c bi\u1EC7t l\xE0 t\xEDnh c\xE1ch) kh\xF4ng \u0111\u1EA7y \u0111\u1EE7 \u0111\u1EC3 t\u1EA1o ph\u1EA3n h\u1ED3i.");return Zn(t,async(m,p)=>{console.log(`Using API Key: ${p.substring(0,8)}... for chat response with ${e.name}`);let h=xf(e,i,o,t,d,c,f);u&&(h+=`

--- Special Instructions for this Reply ---
      The user you are replying to is named ${o.name||$e} (bio: "${o.bio||wt}").
      Your response to ${o.name||$e}'s NEXT message should be:
      1.  A bit longer and more detailed than a typical short chat reply. Elaborate on your thoughts, feelings, or provide more information.
      2.  Formatted using these rules:
          - Normal text for speech (e.g., "Xin ch\xE0o b\u1EA1n.").
          - Actions or non-verbal cues should be enclosed in single asterisks (e.g., *m\u1EC9m c\u01B0\u1EDDi nh\u1EB9 nh\xE0ng* or *nh\xECn ra c\u1EEDa s\u1ED5*).
          - Emphasized speech, internal thoughts shown to the user, or particularly expressive phrases should be enclosed in double asterisks (e.g., "**Th\u1EADt l\xE0 m\u1ED9t \xFD t\u01B0\u1EDFng tuy\u1EC7t v\u1EDDi!**" or "**Hmm, \u0111\u1EC3 xem n\xE0o...**").
      3.  All parts of your response must be in Vietnamese, unless the character definition explicitly allows other languages or the user is consistently using another language.
      Ensure your reply is natural and maintains your character persona.
      `);let C=n.slice(-20).map(w=>{let E=[],k=w.sender==="user"&&i.enabled?bs(w.content):w.content;return k&&E.push({text:k}),w.sender==="user"&&w.imagePart&&E.push(Cf(w.imagePart.dataUrl,w.imagePart.mimeType)),{role:w.sender==="user"?"user":"model",parts:E}}),T={systemInstruction:h},y=i.enabled?bs(r):r,v=/(https?:\/\/[^\s]+)/g,x=r.match(v);t.enableWebSearch&&(T.tools=[{googleSearch:{}}]);let S=[];if(y&&S.push({text:y}),l&&S.push(Cf(l.dataUrl,l.mimeType)),S.length===0)return{text:"",groundingAttributions:void 0};try{let E=await m.chats.create({model:Vt,history:C,config:T}).sendMessage({message:S}),k=E.text;return i.enabled&&(k=Vl(k)),{text:k,groundingAttributions:E.candidates?.[0]?.groundingMetadata?.groundingChunks||void 0}}catch(w){console.error("Error in generateCharacterChatResponse (ChatSession attempt):",w);let E=[...C,{role:"user",parts:S}],k=await m.models.generateContent({model:Vt,contents:E,config:T}),A=k.text;return i.enabled&&(A=Vl(A)),{text:A,groundingAttributions:k.candidates?.[0]?.groundingMetadata?.groundingChunks||void 0}}})}async function yv(t,e,n,r,i,o,l,u,c){if(n.length===0)throw new Error("Group has no members to generate a response.");return Zn(t,async d=>{let f=n.map(T=>{let y=`
--- CHARACTER DEFINITION ---
ID: ${T.id}
Name: ${T.name}
Personality: ${T.personality}
${T.voiceTone?`Voice/Tone: ${T.voiceTone}`:""}`;if(t.enableGroupMemory)try{let v=St+T.id,x=localStorage.getItem(v);if(x){let S=JSON.parse(x);if(S.length>0){let w=S.slice(-6).map(E=>{let k=E.sender==="user"?l.name||"User":T.name,A=E.imagePart?" [sent an image]":"";return`${k}: ${E.content}${A}`}).join(`
`);y+=`
MEMORY: Below is a snippet of your recent one-on-one conversation with the user, "${l.name}". Use this to inform your responses in this group chat.
--- Recent Memory Snippet ---
${w}
--- End Memory Snippet ---`}}}catch(v){console.warn(`Could not load or parse individual history for ${T.name} for group memory.`,v)}return y+=`
--- END CHARACTER ---`,y}).join(`
`),p=r.slice(-20).map(T=>{let y=T.sender==="user"?l.name||"User":n.find(x=>x.id===T.senderCharacterId)?.name||"AI",v=T.imagePart?" [sent an image]":"";return`${y}: ${T.content}${v}`}).join(`
`),h=`You are a group chat moderator and storyteller. Your task is to orchestrate a conversation between multiple AI characters and a human user.
The user is named "${l.name||$e}".
Based on the chat history and the latest user message, you will decide which character(s) should speak next.
You must generate their responses, ensuring they stay perfectly in character according to their defined personas.
You can make one character speak, or have multiple characters exchange a few lines of dialogue.
All responses must be in Vietnamese.`;if((t.enableTimeAwareness||t.enableDateAwareness)&&c){if(h+=`

--- DATE & TIME CONTEXT ---`,t.enableTimeAwareness){let T=dv(c),y=fv(c);h+=`
The user's message was sent at ${y}. It is currently ${T}.`}if(t.enableDateAwareness){let T=mv(c);h+=`
Today's date is ${T}.`}h+=`
Characters should subtly acknowledge the date and/or time of day in their responses if it feels natural to make the conversation feel more real.`}h+=`

Here are the characters in this group:
${f}

Here is the recent chat history (last message is from the user):
${p}

Your output MUST be a valid JSON array of objects. Each object represents one message from a character and must have two keys:
1. "characterId": The ID of the character who is speaking.
2. "response": The full text of what the character says, including actions in asterisks like *smiles*.

Example JSON output:
[
  { "characterId": "char_id_2", "response": "That's a ridiculous idea! *He slams his fist on the table*" },
  { "characterId": "char_id_1", "response": "Now, now, let's remain calm. There's no need for such outbursts." }
]

Now, based on the user's latest message, generate the next part of the conversation.`;let g={systemInstruction:h,responseMimeType:"application/json"},C=[{text:i}];u&&C.push(Cf(u.dataUrl,u.mimeType));try{let y=(await d.models.generateContent({model:Vt,contents:[{role:"user",parts:C}],config:g})).text.trim(),v=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,x=y.match(v);x&&x[2]&&(y=x[2].trim());let S=JSON.parse(y);if(Array.isArray(S))return S.map(w=>({...w,response:o.enabled?Vl(w.response):w.response}));throw new Error("AI response was not a JSON array.")}catch(T){throw console.error("Failed to parse JSON response from AI for group chat:",T,"Raw text:",T.text),new Error("AI tr\u1EA3 v\u1EC1 \u0111\u1ECBnh d\u1EA1ng kh\xF4ng ph\u1EA3i JSON h\u1EE3p l\u1EC7 cho chat nh\xF3m.")}})}async function vv(t){if(!t||!t.trim())return!1;try{return await new Is({apiKey:t}).models.generateContent({model:Vt,contents:[{role:"user",parts:[{text:"Hello"}]}]}),console.log(`Gemini API Key validation successful for key ${t.substring(0,5)}...`),!0}catch(e){let n=String(e instanceof Error?e.message:e).toLowerCase();return n.includes("api key not valid")||n.includes("api key is invalid")?console.warn(`Gemini API Key validation failed for key ${t.substring(0,5)}...: Invalid Key`):console.warn(`Gemini API Key validation failed for key ${t.substring(0,5)}... with an unexpected error:`,e),!1}}async function Cv(t,e,n){return Zn(t,async(r,i)=>{console.log(`Using API Key: ${i.substring(0,8)}... for creative help: ${e}`);let o="",l="Respond in Vietnamese unless context strongly suggests otherwise. Be concise and natural.",u="You are a creative assistant helping a user design an AI chat character or suggest chat replies. Provide creative and relevant suggestions.";switch(e){case"charName":o="Suggest a unique and interesting name for an AI chat character. Be creative.",n?.currentPersonality&&(o+=` The character's personality is: ${n.currentPersonality}.`),o+=` ${l} Respond with ONLY the name, nothing else. Maximum 5 words.`;break;case"charPersonality":o="Describe a unique and engaging personality for an AI chat character in 1-2 concise paragraphs.",n?.currentName&&(o+=` The character's name is ${n.currentName}.`),o+=` ${l} Respond with ONLY the personality description.`;break;case"charGreeting":o="Write a creative and in-character greeting message for an AI chat character (1-2 sentences).",n?.currentName&&(o+=` The character's name is ${n.currentName}.`),n?.currentPersonality&&(o+=` Their personality is: "${n.currentPersonality}".`),n?.currentVoiceTone&&(o+=` Their voice/tone is: "${n.currentVoiceTone}".`),o+=` ${l} Respond with ONLY the greeting message.`;break;case"charVoiceTone":o="Describe the voice, tone, and speaking style for an AI chat character in a short phrase or sentence.",n?.currentName&&(o+=` The character's name is ${n.currentName}.`),n?.currentPersonality&&(o+=` Their personality is: "${n.currentPersonality}".`),o+=` ${l} Examples: 'Calm and wise', 'Energetic and playful'. Respond with ONLY the voice/tone description. Max 1-2 short sentences.`;break;case"charExamplePair":o="Generate a short, illustrative example dialogue pair (User and Character).",n?.currentName&&(o+=`
The character's name is ${n.currentName}.`),n?.currentPersonality&&(o+=`
Their personality is: "${n.currentPersonality}".`),n?.currentVoiceTone&&(o+=`
Their voice/tone is: "${n.currentVoiceTone}".`),n?.existingExamples&&(o+=`
Avoid repeating patterns from these existing examples:
${n.existingExamples}`),o+=`
${l} Format as:
User: [example user message]
Character: [example character response]
Respond with ONLY this pair.`;break;case"userReplySuggestion":if(!n?.characterForSuggestion||!n?.characterForSuggestion.personality)throw new Error("Thi\u1EBFu th\xF4ng tin nh\xE2n v\u1EADt ho\u1EB7c l\u1ECBch s\u1EED chat \u0111\u1EC3 t\u1EA1o g\u1EE3i \xFD.");u=xf(n.characterForSuggestion,{enabled:!1,eroticaLevel:"none",violenceLevel:"none",darkContentLevel:"none",customPrompt:""},{name:n.userNameForSuggestion||$e,bio:n.userBioForSuggestion||wt},t),o=`Based on my persona as ${n.userNameForSuggestion||$e} and the ongoing conversation history with ${n.characterForSuggestion.name}, suggest three concise and distinct reply options (each 1-3 sentences max) that I could send next. Present each suggestion on a new line, starting with a hyphen (-) and nothing else. Ensure the suggestions are in Vietnamese.`;let f=(n.chatHistorySnapshot||[]).slice(-10).map(g=>({role:g.sender==="user"?"user":"model",parts:[{text:g.content}]})),m={systemInstruction:u},p=await r.models.generateContent({model:Vt,contents:[...f,{role:"user",parts:[{text:o}]}],config:m}),h=p.text.split(`
`).map(g=>g.trim()).filter(g=>g.startsWith("- "));return h.length>0?h[0].substring(2).trim():p.text.trim();default:throw new Error("Lo\u1EA1i g\u1EE3i \xFD kh\xF4ng h\u1EE3p l\u1EC7.")}let c={systemInstruction:u};return(await r.models.generateContent({model:Vt,contents:[{role:"user",parts:[{text:o}]}],config:c})).text.trim()})}async function xv(t,e,n){return Zn(t,async(r,i)=>{let o=`Generate a complete AI chat character concept.
    The output MUST be a JSON object with the following fields: "name" (string), "personality" (string), "greetingMessage" (string), "voiceTone" (string), and "exampleResponses" (string, one example User/Character dialogue pair formatted as "User: ...\\nCharacter: ...").
    Prioritize Vietnamese names and context unless the theme suggests otherwise.`;e&&(o+=`
Theme/Type: ${e}`),n&&(o+=`
Initial Idea: ${n}`),o+=`
Respond ONLY with the JSON object. No other text or markdown.`;let l={responseMimeType:"application/json"},u=await r.models.generateContent({model:Vt,contents:o,config:l});try{let c=u.text.trim(),d=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,f=c.match(d);f&&f[2]&&(c=f[2].trim());let m=JSON.parse(c);return{name:m.name,personality:m.personality,greetingMessage:m.greetingMessage,voiceTone:m.voiceTone,exampleResponses:m.exampleResponses}}catch(c){throw console.error("Failed to parse JSON from AI for full character concept:",c,"Raw text:",u.text),new Error("AI tr\u1EA3 v\u1EC1 \u0111\u1ECBnh d\u1EA1ng kh\xF4ng ph\u1EA3i JSON h\u1EE3p l\u1EC7 cho th\xF4ng tin nh\xE2n v\u1EADt.")}})}async function Tv(t,e){return Zn(t,async(n,r)=>{let i=`From the following text, extract character details.
    The output MUST be a JSON object with fields: "name", "personality", "greetingMessage", "voiceTone", "exampleResponses".
    If a detail is not found, its value can be an empty string or null.
    Text to analyze:
    ---
    ${e}
    ---
    Respond ONLY with the JSON object. No other text or markdown.`,o={responseMimeType:"application/json"},l=await n.models.generateContent({model:Vt,contents:i,config:o});try{let u=l.text.trim(),c=/^```(\w*)?\s*\n?(.*?)\n?\s*```$/s,d=u.match(c);d&&d[2]&&(u=d[2].trim());let f=JSON.parse(u);return{name:f.name,personality:f.personality,greetingMessage:f.greetingMessage,voiceTone:f.voiceTone,exampleResponses:f.exampleResponses}}catch(u){throw console.error("Failed to parse JSON from AI for character extraction:",u,"Raw text:",l.text),new Error("AI tr\u1EA3 v\u1EC1 \u0111\u1ECBnh d\u1EA1ng kh\xF4ng ph\u1EA3i JSON h\u1EE3p l\u1EC7 cho tr\xEDch xu\u1EA5t nh\xE2n v\u1EADt.")}})}async function _v(t,e,n,r){if(!e||!e.personality)throw new Error("Thi\u1EBFu th\xF4ng tin nh\xE2n v\u1EADt \u0111\u1EC3 t\u1EA1o g\u1EE3i \xFD.");return Zn(t,async(i,o)=>{let l=xf(e,{enabled:!1,eroticaLevel:"none",violenceLevel:"none",darkContentLevel:"none",customPrompt:""},r,t),u=`You are roleplaying as ${r.name}. Bio: "${r.bio||wt}".
        You are chatting with ${e.name}.
        Based on the current chat context and your persona (${r.name}), suggest ONE concise, natural, and engaging reply (1-2 sentences) that you (${r.name}) could send to ${e.name}.
        The reply should be in Vietnamese.
        Respond with ONLY the suggested reply text, nothing else.`,d=[...(n||[]).slice(-10).map(p=>({role:p.sender==="user"?"user":"model",parts:[{text:p.content}]})),{role:"user",parts:[{text:u}]}],f={systemInstruction:l,temperature:.8};return t.enableWebSearch&&(f.tools=[{googleSearch:{}}]),(await i.models.generateContent({model:Vt,contents:d,config:f})).text.trim()})}async function Tf(t,e,n,r){return Zn(t,async i=>{let o=r.slice(-4).map(c=>{let d=c.sender==="user"?n.name||"User":e.name,f=c.imagePart?" [sent an image]":"";return`${d}: ${c.content}${f}`}).join(`
`),l=`You are the AI character '${e.name}' whose personality is: "${e.personality}". 
You haven't heard from the user, '${n.name}', in a while. 
Your task is to send a SHORT, friendly, and in-character message to check in on them and re-engage them in conversation.

To make your message relevant, here are the last few messages from your conversation:
--- RECENT CHAT HISTORY ---
${o||"No recent messages to reference. Just send a general friendly greeting."}
--- END HISTORY ---

Choose ONE of the following styles for your message:
1. A curious follow-up question based on the last messages. (e.g., "Ch\xE0o b\u1EA1n, kh\xF4ng bi\u1EBFt chuy\u1EC7n h\xF4m tr\u01B0\u1EDBc sao r\u1ED3i?")
2. A simple greeting appropriate for the time of day. (e.g., "Ch\xE0o bu\u1ED5i s\xE1ng! Ch\xFAc b\u1EA1n m\u1ED9t ng\xE0y t\u1ED1t l\xE0nh nh\xE9.")
3. A general, warm check-in. (e.g., "D\u1EA1o n\xE0y b\u1EA1n th\u1EBF n\xE0o?" or "Hey, t\u1EF1 d\u01B0ng th\u1EA5y nh\u1EDB b\u1EA1n qu\xE1.")

IMPORTANT RULES:
- Your message MUST be very short (under 25 words).
- Your message MUST be in Vietnamese.
- Do NOT use action descriptions like *smiles* or any other formatting.
- Respond with ONLY the message text itself.`;return(await i.models.generateContent({model:Vt,contents:l,config:{temperature:.9}})).text.trim().replace(/["*]/g,"")})}var Av=P(z(),1),fi=t=>{if(!t)return null;let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},_f=(t,e,n)=>Math.min(Math.max(t,e),n),$l=(t,e)=>{if(!t||!t.startsWith("#"))return t;let n=fi(t);if(!n)return t;let{r,g:i,b:o}=n,l=1+e/100;r=_f(Math.round(r*l),0,255),i=_f(Math.round(i*l),0,255),o=_f(Math.round(o*l),0,255);let u=c=>("00"+c.toString(16)).slice(-2);return`#${u(r)}${u(i)}${u(o)}`},rt={theme:"dark",themePalette:"blue",customThemeColors:hg,apiProvider:"geminiDefault",apiKeyStatus:"default",language:"vi",fontSize:16,useDefaultAPI:!0,chatBackground:Ji,geminiCustomApiKeys:[],enableWebSearch:!1,enableMemory:!0,enableEmotions:!0,allowUnlimitedGroupMembers:!1,enableGroupMemory:!1,enableTimeAwareness:!0,enableDateAwareness:!0,aiNotifications:{enabled:!1,interval:6}},Sv={enabled:!1,eroticaLevel:"none",violenceLevel:"none",darkContentLevel:"none",customPrompt:""},Sf={name:$e,avatarUrl:"",bio:wt},kv=(0,it.createContext)(void 0),Ev=({children:t})=>{let[e,n]=(0,it.useState)(()=>{let m=localStorage.getItem(vd),p={...rt};if(m)try{let h=JSON.parse(m);if(typeof h=="object"&&h!==null){p.theme=["light","dark","system"].includes(h.theme)?h.theme:rt.theme,p.themePalette=h.themePalette||rt.themePalette,p.customThemeColors={...rt.customThemeColors,...h.customThemeColors||{}},p.apiProvider=["geminiDefault","geminiCustom"].includes(h.apiProvider)?h.apiProvider:rt.apiProvider,p.apiKeyStatus=["unknown","valid","invalid","default"].includes(h.apiKeyStatus)?h.apiKeyStatus:rt.apiKeyStatus,p.language=h.language||rt.language,p.fontSize=typeof h.fontSize=="number"?h.fontSize:rt.fontSize,p.chatBackground={...rt.chatBackground,...h.chatBackground||{}};let g=Array.isArray(h.geminiCustomApiKeys)?h.geminiCustomApiKeys:typeof h.userApiKey=="string"&&h.userApiKey?[h.userApiKey]:[];p.geminiCustomApiKeys=g.filter(C=>typeof C=="string"&&C.trim()!==""),p.enableWebSearch=typeof h.enableWebSearch=="boolean"?h.enableWebSearch:rt.enableWebSearch,p.enableMemory=typeof h.enableMemory=="boolean"?h.enableMemory:rt.enableMemory,p.enableEmotions=typeof h.enableEmotions=="boolean"?h.enableEmotions:rt.enableEmotions,p.allowUnlimitedGroupMembers=typeof h.allowUnlimitedGroupMembers=="boolean"?h.allowUnlimitedGroupMembers:rt.allowUnlimitedGroupMembers,p.enableGroupMemory=typeof h.enableGroupMemory=="boolean"?h.enableGroupMemory:rt.enableGroupMemory,p.enableTimeAwareness=typeof h.enableTimeAwareness=="boolean"?h.enableTimeAwareness:rt.enableTimeAwareness,p.enableDateAwareness=typeof h.enableDateAwareness=="boolean"?h.enableDateAwareness:rt.enableDateAwareness,typeof h.aiNotifications=="object"&&h.aiNotifications!==null&&(p.aiNotifications={enabled:typeof h.aiNotifications.enabled=="boolean"?h.aiNotifications.enabled:rt.aiNotifications.enabled,interval:typeof h.aiNotifications.interval=="number"?h.aiNotifications.interval:rt.aiNotifications.interval})}}catch(h){console.error("Failed to parse settings from localStorage, using defaults.",h)}if(p.geminiCustomApiKeys.length===0){let h=localStorage.getItem(xd);if(h)try{let g=JSON.parse(h);Array.isArray(g)&&(p.geminiCustomApiKeys=g.filter(C=>typeof C=="string"&&C.trim()!==""))}catch{}}return p.apiProvider==="geminiDefault"?(p.useDefaultAPI=!0,p.apiKeyStatus="default"):(p.useDefaultAPI=!1,p.apiProvider==="geminiCustom"&&(p.apiKeyStatus=p.geminiCustomApiKeys.length>0?p.apiKeyStatus:"invalid",p.apiKeyStatus==="default"&&(p.apiKeyStatus="unknown"))),p}),[r,i]=(0,it.useState)(()=>{let m=localStorage.getItem(Cd);if(m)try{let p=JSON.parse(m);return{...Sv,...p}}catch{}return Sv}),[o,l]=(0,it.useState)(()=>{let m=localStorage.getItem(Td);if(m)try{let p=JSON.parse(m);return{...Sf,...p}}catch(p){return console.error("Failed to parse user profile from localStorage",p),Sf}return Sf});(0,it.useEffect)(()=>{let{deepSeekApiKeys:m,chatGptApiKeys:p,deepSeekApiKeyStatus:h,chatGptApiKeyStatus:g,userApiKey:C,...T}=e;localStorage.setItem(vd,JSON.stringify(T)),localStorage.setItem(xd,JSON.stringify(e.geminiCustomApiKeys))},[e]),(0,it.useEffect)(()=>{localStorage.setItem(Cd,JSON.stringify(r))},[r]),(0,it.useEffect)(()=>{localStorage.setItem(Td,JSON.stringify(o))},[o]),(0,it.useEffect)(()=>{let m=document.documentElement,p,h;if(e.themePalette==="custom")p=e.customThemeColors.primary,h=e.customThemeColors.secondary;else{let A=Wi[e.themePalette]||Wi.blue;p=A.primary,h=A.secondary}let g=$l(p,15),C=$l(p,-10),T=$l(h,15),y=$l(h,-10),v=fi(p),x=fi(g),S=fi(C),w=fi(h),E=fi(T),k=fi(y);v&&m.style.setProperty("--color-primary-DEFAULT",`${v.r} ${v.g} ${v.b}`),x&&m.style.setProperty("--color-primary-light",`${x.r} ${x.g} ${x.b}`),S&&m.style.setProperty("--color-primary-dark",`${S.r} ${S.g} ${S.b}`),w&&m.style.setProperty("--color-secondary-DEFAULT",`${w.r} ${w.g} ${w.b}`),E&&m.style.setProperty("--color-secondary-light",`${E.r} ${E.g} ${E.b}`),k&&m.style.setProperty("--color-secondary-dark",`${k.r} ${k.g} ${k.b}`)},[e.themePalette,e.customThemeColors]),(0,it.useEffect)(()=>{n(m=>{let p=m.useDefaultAPI,h=m.apiKeyStatus;return m.apiProvider==="geminiDefault"?(p=!0,h="default"):(p=!1,h==="default"&&(h="unknown"),m.geminiCustomApiKeys.length===0&&h!=="invalid"&&(h="invalid")),p!==m.useDefaultAPI||h!==m.apiKeyStatus?{...m,useDefaultAPI:p,apiKeyStatus:h}:m})},[e.apiProvider,e.geminiCustomApiKeys.length]);let u=(0,it.useCallback)((m,p)=>{let h=p.trim();h&&n(g=>{if(m==="gemini"){if(g.geminiCustomApiKeys.includes(h))return g;let C=[...g.geminiCustomApiKeys,h];return{...g,geminiCustomApiKeys:C,apiKeyStatus:"unknown",apiProvider:"geminiCustom",useDefaultAPI:!1}}return g})},[]),c=(0,it.useCallback)((m,p)=>{n(h=>{if(m==="gemini"){let g=h.geminiCustomApiKeys.filter(C=>C!==p);return{...h,geminiCustomApiKeys:g,apiKeyStatus:g.length>0?"unknown":"invalid"}}return h})},[]),d=(0,it.useCallback)((m,p)=>{let h=[...new Set(p.map(g=>g.trim()).filter(g=>g))];n(g=>m==="gemini"?{...g,geminiCustomApiKeys:h,apiKeyStatus:h.length>0?"unknown":"invalid",apiProvider:"geminiCustom",useDefaultAPI:!1}:g)},[]),f=async m=>{let p=[...new Set(m.map(C=>C.trim()).filter(C=>C))],h="invalid",g=!1;if(p.length===0)h="invalid";else{for(let C of p){if(!C.trim())continue;await vv(C)&&(g=!0)}h=g?"valid":"invalid"}return n(C=>({...C,geminiCustomApiKeys:p,apiKeyStatus:h,apiProvider:"geminiCustom",useDefaultAPI:!1})),g};return(0,Av.jsx)(kv.Provider,{value:{settings:e,setSettings:n,nsfwSettings:r,setNsfwSettings:i,addApiKey:u,removeApiKey:c,setApiKeys:d,validateAndSaveGeminiKeys:f,userProfile:o,setUserProfile:l},children:t})},we=()=>{let t=(0,it.useContext)(kv);if(t===void 0)throw new Error("useSettings must be used within a SettingsProvider");let{settings:e,...n}=t;return{settings:e,...n}};var En=P(Ce(),1),bv=P(z(),1),n1=(0,En.createContext)(void 0);var Nv=(0,En.createContext)(void 0),Iv=({children:t})=>{let[e,n]=(0,En.useState)([]),r=(0,En.useCallback)(o=>{let l=`toast-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,u=o.type==="success"?"fas fa-check-circle":o.type==="error"?"fas fa-times-circle":o.type==="warning"?"fas fa-exclamation-triangle":o.type==="info"?"fas fa-info-circle":void 0,c={...o,id:l,icon:o.icon||u};n(f=>[c,...f]);let d=o.duration||7e3;setTimeout(()=>{i(l)},d)},[]),i=(0,En.useCallback)(o=>{n(l=>l.filter(u=>u.id!==o))},[]);return(0,bv.jsx)(Nv.Provider,{value:{addToast:r,toasts:e,removeToast:i},children:t})},wf=()=>{let t=(0,En.useContext)(Nv);if(t===void 0)throw new Error("useInternalToast must be used within an InternalToastProvider");return t},Ge=()=>{let{addToast:t}=wf();return{addToast:t}};var he=P(z(),1),Kb=({apiKey:t,onRemove:e,isOnlyKey:n})=>(0,he.jsxs)("div",{className:"flex items-center justify-between p-2.5 bg-slate-100 dark:bg-slate-700 rounded-md",children:[(0,he.jsx)("span",{className:"text-sm font-mono text-slate-700 dark:text-slate-300",children:(i=>i.length<=8?"****":`${i.substring(0,4)}...${i.substring(i.length-4)}`)(t)}),(0,he.jsx)(H,{variant:"danger",size:"xs",onClick:e,title:"X\xF3a API Key n\xE0y",className:"!p-1.5",disabled:n&&(t===""||t===void 0),children:(0,he.jsx)("i",{className:"fas fa-times"})})]}),Jb=({isOpen:t,onClose:e})=>{let{settings:n,setSettings:r,validateAndSaveGeminiKeys:i}=we(),{addToast:o}=Ge(),[l,u]=(0,Nr.useState)(n.apiProvider),[c,d]=(0,Nr.useState)([]),[f,m]=(0,Nr.useState)(""),[p,h]=(0,Nr.useState)(!1),[g,C]=(0,Nr.useState)("idle");(0,Nr.useEffect)(()=>{t&&(u(n.apiProvider),d([...n.geminiCustomApiKeys]),m(""),h(!1),n.apiProvider==="geminiCustom"?n.apiKeyStatus==="valid"?C("success"):n.apiKeyStatus==="invalid"&&n.geminiCustomApiKeys.length>0?C("error"):C("idle"):C("success"))},[t,n]);let T=E=>{let k=E;u(k),C("idle"),k==="geminiCustom"&&n.apiKeyStatus!=="valid"&&C("idle"),k==="geminiDefault"&&C("success")},y=()=>{f.trim()&&!c.includes(f.trim())&&d(E=>[...E,f.trim()]),m(""),C("idle")},v=E=>{d(k=>k.filter(A=>A!==E)),C("idle")},x=async()=>{h(!0);let E=!0,k="unknown";if(l==="geminiCustom"?(c.length===0?(await i([]),k="invalid",E=!1):(E=await i(c),k=E?"valid":"invalid"),C(k==="valid"?"success":"error")):(r(A=>({...A,apiProvider:"geminiDefault",useDefaultAPI:!0,apiKeyStatus:"default"})),E=!0,k="default",C("success")),l!=="geminiDefault"&&r(A=>({...A,apiProvider:l,useDefaultAPI:!1})),E){let A="\u0110\xE3 l\u01B0u c\xE0i \u0111\u1EB7t API.";l==="geminiDefault"?A="\u0110\xE3 chuy\u1EC3n sang d\xF9ng API Key m\u1EB7c \u0111\u1ECBnh c\u1EE7a \u1EE9ng d\u1EE5ng.":E&&(A="\u0110\xE3 l\u01B0u API Keys cho Gemini (Key ri\xEAng). \xCDt nh\u1EA5t m\u1ED9t key h\u1EE3p l\u1EC7."),o({message:A,type:"success",duration:7e3}),setTimeout(e,k==="valid"||k==="default"?1200:0)}else o({message:"Kh\xF4ng c\xF3 API key n\xE0o h\u1EE3p l\u1EC7 cho Gemini (Key ri\xEAng). Vui l\xF2ng ki\u1EC3m tra l\u1EA1i.",type:"error"});h(!1)};return(0,he.jsxs)(Te,{isOpen:t,onClose:e,title:"Thi\u1EBFt L\u1EADp API Key",size:"md",children:[" ",(0,he.jsxs)("div",{className:"space-y-5",children:[(0,he.jsx)(Qi,{label:"Ch\u1ECDn nh\xE0 cung c\u1EA5p API:",name:"apiProvider",options:[{value:"geminiDefault",label:"Gemini (M\u1EB7c \u0111\u1ECBnh \u1EE9ng d\u1EE5ng)",description:"S\u1EED d\u1EE5ng Gemini Flash. Khuy\u1EBFn ngh\u1ECB cho ng\u01B0\u1EDDi m\u1EDBi."},{value:"geminiCustom",label:"Gemini (Key ri\xEAng)",description:"S\u1EED d\u1EE5ng (c\xE1c) API Key Gemini c\u1EE7a ri\xEAng b\u1EA1n."}],selectedValue:l,onChange:T}),l==="geminiDefault"&&(0,he.jsx)("div",{className:"p-3 bg-green-50 dark:bg-green-900/40 border border-green-200 dark:border-green-700/60 rounded-lg",children:(0,he.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-200",children:[(0,he.jsx)("i",{className:"fas fa-info-circle mr-1.5"}),"API Key m\u1EB7c \u0111\u1ECBnh (Gemini) c\u1EE7a \u1EE9ng d\u1EE5ng \u0111ang \u0111\u01B0\u1EE3c s\u1EED d\u1EE5ng."]})}),(()=>{let E=l==="geminiCustom",k="idle";return n.apiProvider==="geminiCustom"&&(k=n.apiKeyStatus==="valid"?"success":n.apiKeyStatus==="invalid"&&n.geminiCustomApiKeys.length>0?"error":"idle"),E&&g!=="idle"&&n.apiProvider===l&&(k=g),(0,he.jsxs)("div",{className:`transition-all duration-300 ease-in-out ${E?"opacity-100 max-h-[1000px] pt-4 mt-3 border-t border-dashed":"opacity-50 max-h-0 overflow-hidden pointer-events-none"}`,children:[(0,he.jsx)("h4",{className:"text-sm font-medium text-text-light dark:text-text-dark mb-2",children:"Qu\u1EA3n l\xFD API Keys Gemini:"}),(0,he.jsxs)("div",{className:"flex items-start gap-2 mb-3",children:[(0,he.jsx)(je,{label:"Th\xEAm API Key Gemini:",type:"password",value:f,onChange:A=>m(A.target.value),placeholder:"D\xE1n API Key Gemini c\u1EE7a b\u1EA1n (v\xED d\u1EE5: AIza...)",disabled:p||!E,leftIcon:(0,he.jsx)("i",{className:"fas fa-plus text-gray-400"}),wrapperClass:"flex-grow !mb-0",onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),y())}}),(0,he.jsx)(H,{onClick:y,disabled:p||!E||!f.trim(),size:"md",className:"mt-[26px] !px-3",title:"Th\xEAm key Gemini",children:"Th\xEAm"})]}),c.length>0&&(0,he.jsx)("div",{className:"space-y-2 mb-3 max-h-40 overflow-y-auto custom-scrollbar pr-1",children:c.map((A,N)=>(0,he.jsx)(Kb,{apiKey:A,onRemove:()=>v(A),isOnlyKey:c.length===1},`Gemini-${N}-${A.slice(-4)}`))}),c.length===0&&E&&(0,he.jsxs)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 my-2",children:[(0,he.jsx)("i",{className:"fas fa-exclamation-circle mr-1"}),"Kh\xF4ng c\xF3 API key n\xE0o \u0111\u01B0\u1EE3c c\u1EA5u h\xECnh cho Gemini (Key ri\xEAng)."]}),k==="success"&&E&&(0,he.jsxs)("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:[(0,he.jsx)("i",{className:"fas fa-check-circle mr-1"}),"\xCDt nh\u1EA5t m\u1ED9t Key Gemini h\u1EE3p l\u1EC7 v\xE0 \u0111\xE3 \u0111\u01B0\u1EE3c l\u01B0u!"]}),k==="error"&&E&&c.length>0&&(0,he.jsxs)("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:[(0,he.jsx)("i",{className:"fas fa-times-circle mr-1"}),"T\u1EA5t c\u1EA3 Keys Gemini \u0111\u1EC1u kh\xF4ng h\u1EE3p l\u1EC7. Vui l\xF2ng ki\u1EC3m tra l\u1EA1i."]}),k==="idle"&&E&&c.length>0&&(0,he.jsxs)("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:[(0,he.jsx)("i",{className:"fas fa-question-circle mr-1"}),"Tr\u1EA1ng th\xE1i keys Gemini ch\u01B0a r\xF5 ho\u1EB7c \u0111\xE3 thay \u0111\u1ED5i. H\xE3y L\u01B0u \u0111\u1EC3 ki\u1EC3m tra."]}),(0,he.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["L\u1EA5y API Key Gemini t\u1EA1i: ",(0,he.jsx)("a",{href:Ts,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:Ts})]})]})})()]}),(0,he.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,he.jsx)(H,{variant:"outline",onClick:e,size:"md",disabled:p,children:"H\u1EE7y"}),(0,he.jsx)(H,{onClick:x,isLoading:p,disabled:p||l==="geminiCustom"&&c.length===0&&n.apiKeyStatus!=="invalid",size:"md",variant:"primary",children:p?"\u0110ang x\u1EED l\xFD...":"L\u01B0u & \u0110\xF3ng"})]})]})},Pv=Jb;var Ps=P(Ce(),1);var kf=P(Ce(),1),mn=P(z(),1),Wb=kf.default.memo(({label:t,id:e,checked:n,onChange:r,className:i="",wrapperClass:o="",description:l,...u})=>{let c=e||kf.default.useId();return(0,mn.jsx)("div",{className:`mb-3 ${o}`,children:(0,mn.jsxs)("label",{htmlFor:c,className:"flex items-start group cursor-pointer",children:[(0,mn.jsx)("input",{id:c,type:"checkbox",checked:n,onChange:r,className:"sr-only peer",...u}),(0,mn.jsx)("div",{className:`relative flex-shrink-0 flex items-center justify-center w-5 h-5 mt-0.5 rounded-md border-2 border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-700 
                           transition-all duration-200 ease-in-out
                           group-hover:border-primary/70 dark:group-hover:border-primary-light/70
                           peer-focus-visible:ring-2 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-card-light dark:peer-focus-visible:ring-offset-card-dark peer-focus-visible:ring-primary
                           peer-checked:bg-primary dark:peer-checked:bg-primary-light peer-checked:border-primary dark:peer-checked:border-primary-light`,children:(0,mn.jsx)("svg",{className:`w-3 h-3 text-white fill-current transition-opacity duration-200 transform ${n?"opacity-100 scale-100":"opacity-0 scale-50"}`,viewBox:"0 0 16 16",version:"1.1","aria-hidden":"true",children:(0,mn.jsx)("path",{fillRule:"evenodd",d:"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"})})}),(0,mn.jsxs)("div",{className:"ml-2.5 text-sm",children:[(0,mn.jsx)("span",{className:"font-medium text-text-light dark:text-text-dark",children:t}),l&&(0,mn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:l})]})]})})}),jt=Wb;var Mv=P(Ce(),1),fo=P(z(),1),Rv=Mv.default.forwardRef(({label:t,id:e,error:n,className:r="",wrapperClass:i="",...o},l)=>(0,fo.jsxs)("div",{className:`mb-4 ${i}`,children:[t&&(0,fo.jsx)("label",{htmlFor:e,className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:t}),(0,fo.jsx)("textarea",{id:e,ref:l,rows:o.rows||4,className:`block w-full px-3 py-2.5 border rounded-lg shadow-sm focus:outline-none sm:text-sm 
                     transition-colors duration-200 ease-in-out bg-transparent custom-scrollbar ${n?`border-red-500 text-red-600 focus:ring-2 focus:ring-red-500/50 focus:border-red-500
                      placeholder-red-400 dark:placeholder-red-500`:`border-gray-300 dark:border-gray-600 
                       text-gray-900 dark:text-gray-100 
                       focus:ring-2 focus:ring-primary/60 focus:border-primary 
                       dark:focus:ring-primary-light/60 dark:focus:border-primary-light
                       placeholder-gray-400 dark:placeholder-gray-500`} ${r}`,...o}),n&&(0,fo.jsx)("p",{className:"mt-1.5 text-xs text-red-500 dark:text-red-400",children:n})]}));Rv.displayName="Textarea";var $t=Rv;var Pe=P(z(),1),Yb=({isOpen:t,onClose:e})=>{let{nsfwSettings:n,setNsfwSettings:r}=we(),[i,o]=(0,Ps.useState)(!1),[l,u]=(0,Ps.useState)(n);(0,Ps.useEffect)(()=>{t&&(u(n),n.enabled?o(!1):o(!0))},[t,n]);let c=()=>{r(l),e()},d=()=>{o(!1),l.enabled||u(m=>({...m,enabled:!0,eroticaLevel:m.eroticaLevel==="none"?"medium":m.eroticaLevel,violenceLevel:m.violenceLevel==="none"?"medium":m.violenceLevel,darkContentLevel:m.darkContentLevel==="none"?"medium":m.darkContentLevel}))},f=[{value:"none",label:"T\u1EAFt Ho\xE0n To\xE0n",description:"Kh\xF4ng c\xF3 n\u1ED9i dung nh\u1EA1y c\u1EA3m."},{value:"medium",label:"Trung B\xECnh",description:"M\xF4 t\u1EA3 g\u1EE3i \xFD, kh\xF4ng \u0111i s\xE2u chi ti\u1EBFt."},{value:"high",label:"Cao",description:"M\xF4 t\u1EA3 chi ti\u1EBFt h\u01A1n, c\xF3 th\u1EC3 bao g\u1ED3m h\xE0nh \u0111\u1ED9ng."},{value:"extreme",label:"C\u1EF1c \u0110oan",description:"M\xF4 t\u1EA3 r\u1EA5t chi ti\u1EBFt, kh\xF4ng gi\u1EDBi h\u1EA1n (c\u1EA9n tr\u1ECDng khi s\u1EED d\u1EE5ng)."}];return t?i?(0,Pe.jsxs)(Te,{isOpen:!0,onClose:e,title:"C\u1EA3nh B\xE1o N\u1ED9i Dung Nh\u1EA1y C\u1EA3m",size:"md",children:[(0,Pe.jsxs)("div",{className:"text-center p-4",children:[(0,Pe.jsx)("i",{className:"fas fa-exclamation-triangle text-5xl text-yellow-500 dark:text-yellow-400 mb-5"}),(0,Pe.jsx)("p",{className:"text-lg font-semibold mb-3 text-text-light dark:text-text-dark",children:"N\u1ED9i dung b\u1EA1n s\u1EAFp t\xF9y ch\u1EC9nh c\xF3 th\u1EC3 kh\xF4ng ph\xF9 h\u1EE3p v\u1EDBi m\u1ECDi l\u1EE9a tu\u1ED5i ho\u1EB7c ch\u1EE9a c\xE1c y\u1EBFu t\u1ED1 nh\u1EA1y c\u1EA3m, g\xE2y kh\xF3 ch\u1ECBu."}),(0,Pe.jsx)("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:"B\u1EA1n c\xF3 ch\u1EAFc ch\u1EAFn mu\u1ED1n ti\u1EBFp t\u1EE5c v\xE0 c\u1EA5u h\xECnh c\xE1c t\xF9y ch\u1ECDn n\u1ED9i dung ng\u01B0\u1EDDi l\u1EDBn (NSFW) kh\xF4ng? H\xE3y c\xE2n nh\u1EAFc k\u1EF9 tr\u01B0\u1EDBc khi quy\u1EBFt \u0111\u1ECBnh."})]}),(0,Pe.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,Pe.jsx)(H,{variant:"outline",onClick:e,size:"lg",children:"H\u1EE7y B\u1ECF"}),(0,Pe.jsx)(H,{variant:"danger",onClick:d,size:"lg",children:"T\xF4i Hi\u1EC3u & \u0110\u1ED3ng \xDD Ti\u1EBFp T\u1EE5c"})]})]}):(0,Pe.jsxs)(Te,{isOpen:!0,onClose:e,title:"Thi\u1EBFt L\u1EADp Ch\u1EBF \u0110\u1ED9 N\u1ED9i Dung Ng\u01B0\u1EDDi L\u1EDBn (NSFW)",size:"md",children:[" ",(0,Pe.jsxs)("div",{className:"space-y-6",children:[(0,Pe.jsx)("div",{className:`p-4 rounded-lg border transition-all duration-200 ease-in-out ${l.enabled?"bg-red-50 dark:bg-red-900/30 border-red-300 dark:border-red-600":"bg-slate-50 dark:bg-slate-800/30 border-border-light dark:border-border-dark"}`,children:(0,Pe.jsx)(jt,{label:"B\u1EADt Ch\u1EBF \u0110\u1ED9 NSFW T\u1ED5ng Th\u1EC3",description:"Cho ph\xE9p AI t\u1EA1o ra n\u1ED9i dung nh\u1EA1y c\u1EA3m khi ph\xF9 h\u1EE3p v\u1EDBi di\u1EC5n bi\u1EBFn truy\u1EC7n.",checked:l.enabled,onChange:m=>u(p=>({...p,enabled:m.target.checked}))})}),l.enabled&&(0,Pe.jsxs)("div",{className:"space-y-5 pl-2 border-l-2 border-red-300 dark:border-red-600 ml-2",children:[(0,Pe.jsx)(Qi,{label:"M\u1EE9c \u0111\u1ED9 Khi\xEAu D\xE2m:",name:"eroticaLevel",options:f,selectedValue:l.eroticaLevel,onChange:m=>u(p=>({...p,eroticaLevel:m})),wrapperClass:"p-3 bg-slate-50 dark:bg-slate-800/40 rounded-md"}),(0,Pe.jsx)(Qi,{label:"M\u1EE9c \u0111\u1ED9 B\u1EA1o L\u1EF1c:",name:"violenceLevel",options:f,selectedValue:l.violenceLevel,onChange:m=>u(p=>({...p,violenceLevel:m})),wrapperClass:"p-3 bg-slate-50 dark:bg-slate-800/40 rounded-md"}),(0,Pe.jsx)(Qi,{label:"M\u1EE9c \u0111\u1ED9 N\u1ED9i Dung \u0110en T\u1ED1i (Ch\u1EE7 \u0111\u1EC1 nh\u1EA1y c\u1EA3m, t\xE2m l\xFD n\u1EB7ng n\u1EC1):",name:"darkContentLevel",options:f,selectedValue:l.darkContentLevel,onChange:m=>u(p=>({...p,darkContentLevel:m})),wrapperClass:"p-3 bg-slate-50 dark:bg-slate-800/40 rounded-md"}),(0,Pe.jsx)($t,{label:"Phong c\xE1ch NSFW t\xF9y ch\u1EC9nh (T\xF9y ch\u1ECDn):",value:l.customPrompt||"",onChange:m=>u(p=>({...p,customPrompt:m.target.value})),placeholder:"V\xED d\u1EE5: T\u1EADp trung v\xE0o m\xF4 t\u1EA3 chi ti\u1EBFt c\u1EA3m x\xFAc v\xE0 b\u1EA7u kh\xF4ng kh\xED c\u0103ng th\u1EB3ng, s\u1EED d\u1EE5ng ng\xF4n ng\u1EEF g\u1EE3i h\xECnh nh\u01B0ng kh\xF4ng dung t\u1EE5c...",rows:3,wrapperClass:"mt-4 p-3 bg-slate-50 dark:bg-slate-800/40 rounded-md"})]}),(0,Pe.jsx)("div",{className:"mt-5 p-3 bg-yellow-50 dark:bg-yellow-900/50 border border-yellow-300 dark:border-yellow-700 rounded-lg text-yellow-700 dark:text-yellow-200",children:(0,Pe.jsxs)("p",{className:"text-xs",children:[(0,Pe.jsxs)("strong",{className:"font-semibold",children:[(0,Pe.jsx)("i",{className:"fas fa-exclamation-circle mr-1"}),"L\u01B0u \xFD quan tr\u1ECDng:"]})," Vi\u1EC7c b\u1EADt c\xE1c t\xF9y ch\u1ECDn n\xE0y cho ph\xE9p AI t\u1EA1o ra n\u1ED9i dung li\xEAn quan KHI PH\xD9 H\u1EE2P. AI s\u1EBD kh\xF4ng c\u1ED1 t\xECnh l\xE1i cu\u1ED9c tr\xF2 chuy\u1EC7n theo h\u01B0\u1EDBng NSFW m\u1ED9t c\xE1ch g\u01B0\u1EE3ng \xE9p. Ch\u1EA5t l\u01B0\u1EE3ng v\xE0 s\u1EF1 ph\xF9 h\u1EE3p c\u1EE7a n\u1ED9i dung NSFW ph\u1EE5 thu\u1ED9c v\xE0o kh\u1EA3 n\u0103ng c\u1EE7a m\xF4 h\xECnh AI v\xE0 c\xF3 th\u1EC3 kh\xF4ng ph\u1EA3i l\xFAc n\xE0o c\u0169ng nh\u01B0 mong \u0111\u1EE3i. S\u1EED d\u1EE5ng c\xF3 tr\xE1ch nhi\u1EC7m."]})})]}),(0,Pe.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,Pe.jsx)(H,{variant:"outline",onClick:e,size:"lg",children:"H\u1EE7y"}),(0,Pe.jsx)(H,{onClick:c,size:"lg",variant:"primary",children:"L\u01B0u Thi\u1EBFt L\u1EADp NSFW"})]})]}):null},Dv=Yb;var Gl=P(Ce(),1);var Lv=P(Ce(),1),Ir=P(z(),1),Qb=Lv.default.memo(({label:t,id:e,options:n,error:r,className:i="",wrapperClass:o="",...l})=>(0,Ir.jsxs)("div",{className:`mb-4 ${o}`,children:[t&&(0,Ir.jsx)("label",{htmlFor:e,className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:t}),(0,Ir.jsxs)("select",{id:e,className:`block w-full px-3 py-2.5 border rounded-lg shadow-sm focus:outline-none sm:text-sm 
                     appearance-none bg-no-repeat bg-right 
                     transition-colors duration-200 ease-in-out bg-transparent bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22currentColor%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M10%2012.586l-4.293-4.293a1%201%200%2010-1.414%201.414l5%205a1%201%200%20001.414%200l5-5a1%201%200%2000-1.414-1.414L10%2012.586z%22%20clip-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E')] dark:bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22%23f3f4f6%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M10%2012.586l-4.293-4.293a1%201%200%2010-1.414%201.414l5%205a1%201%200%20001.414%200l5-5a1%201%200%2000-1.414-1.414L10%2012.586z%22%20clip-rule%3D%22evenodd%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.25em_1.25em] bg-[center_right_0.75rem] pr-8 ${r?`border-red-500 text-red-600 focus:ring-2 focus:ring-red-500/50 focus:border-red-500
                      placeholder-red-400 dark:placeholder-red-500`:`border-gray-300 dark:border-gray-600 
                       text-gray-900 dark:text-gray-100 
                       focus:ring-2 focus:ring-primary/60 focus:border-primary 
                       dark:focus:ring-primary-light/60 dark:focus:border-primary-light
                       placeholder-gray-400 dark:placeholder-gray-500`} ${i}`,...l,children:[l.placeholder&&(0,Ir.jsx)("option",{value:"",disabled:!0,className:"text-gray-400 dark:text-gray-500",children:l.placeholder}),n.map(m=>(0,Ir.jsx)("option",{value:m.value,className:"text-text-light dark:text-text-dark bg-card-light dark:bg-card-dark",children:m.label},m.value))]}),r&&(0,Ir.jsx)("p",{className:"mt-1.5 text-xs text-red-500 dark:text-red-400",children:r})]})),mo=Qb;var ke=P(z(),1),Zb=({isOpen:t,onClose:e,openSpecificModal:n})=>{let{settings:r,setSettings:i}=we(),{addToast:o}=Ge(),[l,u]=(0,Gl.useState)(r);(0,Gl.useEffect)(()=>{t&&u(r)},[t,r]);let c=()=>{i(l),o({message:"\u0110\xE3 l\u01B0u c\xE0i \u0111\u1EB7t giao di\u1EC7n.",type:"success"}),e()},d=[{value:"light",label:"S\xE1ng (Light Mode)"},{value:"dark",label:"T\u1ED1i (Dark Mode)"},{value:"system",label:"Theo h\u1EC7 th\u1ED1ng"}],f=[{value:"vi",label:"Ti\u1EBFng Vi\u1EC7t (M\u1EB7c \u0111\u1ECBnh)"}],m=[{value:12,label:"R\u1EA5t nh\u1ECF (12px)"},{value:14,label:"Nh\u1ECF (14px)"},{value:16,label:"V\u1EEBa - M\u1EB7c \u0111\u1ECBnh (16px)"},{value:18,label:"L\u1EDBn (18px)"},{value:20,label:"R\u1EA5t L\u1EDBn (20px)"}],p=g=>{u(C=>({...C,themePalette:g}))},h=({paletteKey:g,isActive:C,onClick:T,isCustom:y=!1})=>{let v=y?{name:"T\xF9y Ch\u1EC9nh",primary:l.customThemeColors.primary,secondary:l.customThemeColors.secondary}:Wi[g];return(0,ke.jsx)("button",{type:"button",onClick:T,className:`w-full text-left p-2.5 rounded-lg border-2 transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-card-light dark:focus-visible:ring-offset-card-dark focus-visible:ring-current
                        ${C?"border-transparent ring-2 ring-primary dark:ring-primary-light shadow-lg":"border-border-light dark:border-border-dark hover:border-gray-400 dark:hover:border-gray-500"}`,children:(0,ke.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ke.jsxs)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full overflow-hidden flex shadow-inner",children:[(0,ke.jsx)("div",{className:"w-1/2 h-full",style:{backgroundColor:v.primary}}),(0,ke.jsx)("div",{className:"w-1/2 h-full",style:{backgroundColor:v.secondary}})]}),(0,ke.jsx)("div",{className:"flex-grow",children:(0,ke.jsx)("p",{className:"font-semibold text-sm text-text-light dark:text-text-dark",children:v.name})}),y&&(0,ke.jsx)("i",{className:"fas fa-edit text-slate-500 dark:text-slate-400 text-xs"})]})})};return t?(0,ke.jsxs)(Te,{isOpen:!0,onClose:e,title:"C\xE0i \u0110\u1EB7t Giao Di\u1EC7n & Chung",size:"md",children:[(0,ke.jsxs)("div",{className:"space-y-6 pt-2",children:[(0,ke.jsx)(mo,{label:"Ch\u1EBF \u0111\u1ED9 m\xE0u:",options:d,value:l.theme,onChange:g=>u(C=>({...C,theme:g.target.value})),wrapperClass:"mb-5"}),(0,ke.jsx)(mo,{label:"Ng\xF4n ng\u1EEF:",options:f,value:l.language,onChange:g=>u(C=>({...C,language:g.target.value})),disabled:!0,wrapperClass:"mb-5 opacity-70"}),(0,ke.jsx)(mo,{label:"K\xEDch th\u01B0\u1EDBc hi\u1EC3n th\u1ECB \u1EE9ng d\u1EE5ng:",options:m,value:l.fontSize.toString(),onChange:g=>u(C=>({...C,fontSize:parseInt(g.target.value,10)})),wrapperClass:"mb-2"}),(0,ke.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 px-1 -mt-1",children:"Thay \u0111\u1ED5i k\xEDch th\u01B0\u1EDBc n\xE0y s\u1EBD \u1EA3nh h\u01B0\u1EDFng \u0111\u1EBFn to\xE0n b\u1ED9 \u1EE9ng d\u1EE5ng."}),(0,ke.jsxs)("div",{className:"pt-4 border-t border-border-light dark:border-border-dark",children:[(0,ke.jsxs)("h3",{className:"text-md font-semibold text-text-light dark:text-text-dark mb-3",children:[(0,ke.jsx)("i",{className:"fas fa-palette mr-2 text-secondary dark:text-secondary-light"}),"B\u1EA3ng m\xE0u"]}),(0,ke.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[Object.keys(Wi).map(g=>(0,ke.jsx)(h,{paletteKey:g,isActive:l.themePalette===g,onClick:()=>p(g)},g)),(0,ke.jsx)(h,{paletteKey:"custom",isActive:l.themePalette==="custom",onClick:()=>p("custom"),isCustom:!0})]}),l.themePalette==="custom"&&(0,ke.jsx)("div",{className:"mt-4",children:(0,ke.jsx)(H,{variant:"primary",fullWidth:!0,size:"md",onClick:()=>{e(),n(14)},leftIcon:(0,ke.jsx)("i",{className:"fas fa-swatchbook"}),children:"T\xF9y Ch\u1EC9nh B\u1EA3ng M\xE0u C\xE1 Nh\xE2n..."})})]})]}),(0,ke.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,ke.jsx)(H,{variant:"outline",onClick:e,size:"lg",children:"H\u1EE7y"}),(0,ke.jsx)(H,{onClick:c,size:"lg",variant:"primary",children:"L\u01B0u C\xE0i \u0110\u1EB7t"})]})]}):null},Fv=Zb;var go=P(Ce(),1);var ho=P(Ce(),1),Bl=P(z(),1),Xb=({name:t="",avatarUrl:e,animatedAvatarUrl:n,className:r="w-10 h-10 rounded-full object-cover shadow-sm bg-slate-300 dark:bg-slate-600",altText:i="Avatar"})=>{let[o,l]=(0,ho.useState)(!1),[u,c]=(0,ho.useState)(!1);(0,ho.useEffect)(()=>{l(!1)},[e]),(0,ho.useEffect)(()=>{c(!1)},[n]);let d=()=>{l(!0)},f=()=>{c(!0)},m=t&&t.trim().length>0?t.trim().charAt(0).toUpperCase():"?";return n&&n.trim()!==""&&!u?(0,Bl.jsx)("img",{src:n,alt:i||`Avatar \u0111\u1ED9ng c\u1EE7a ${t}`,className:r,onError:f}):e&&e.trim()!==""&&!o?(0,Bl.jsx)("img",{src:e,alt:i||`Avatar c\u1EE7a ${t}`,className:r,onError:d}):(0,Bl.jsx)("div",{className:`${r} flex items-center justify-center bg-secondary dark:bg-secondary-dark text-white font-semibold text-lg`,"aria-label":i||`Avatar c\u1EE7a ${t} hi\u1EC3n th\u1ECB ch\u1EEF c\xE1i \u0111\u1EA7u ti\xEAn`,title:t.trim()||"Avatar",children:m})},Fe=Xb;var We=P(z(),1),jb=({isOpen:t,onClose:e})=>{let{userProfile:n,setUserProfile:r}=we(),{addToast:i}=Ge(),[o,l]=(0,go.useState)(n.name),[u,c]=(0,go.useState)(n.avatarUrl||""),[d,f]=(0,go.useState)(n.bio||"");return(0,go.useEffect)(()=>{t&&(l(n.name||$e),c(n.avatarUrl||""),f(n.bio||wt))},[t,n]),(0,We.jsxs)(Te,{isOpen:t,onClose:e,title:"H\u1ED3 S\u01A1 C\u1EE7a B\u1EA1n",size:"sm",children:[(0,We.jsxs)("div",{className:"space-y-2.5",children:[(0,We.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-2.5",children:[(0,We.jsxs)("div",{className:"flex-shrink-0 md:w-1/3 text-center md:text-left",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1",children:"\u1EA2nh \u0110\u1EA1i Di\u1EC7n:"}),(0,We.jsx)(Fe,{name:o||$e,avatarUrl:u,className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full object-cover border-2 border-primary dark:border-primary-light shadow-lg mx-auto md:mx-0",altText:"\u1EA2nh \u0111\u1EA1i di\u1EC7n c\u1EE7a b\u1EA1n"})]}),(0,We.jsxs)("div",{className:"space-y-2 flex-grow md:w-2/3",children:[(0,We.jsx)(je,{label:"T\xEAn Hi\u1EC3n Th\u1ECB C\u1EE7a B\u1EA1n:",value:o,onChange:T=>{l(T.target.value)},placeholder:"Nh\u1EADp t\xEAn c\u1EE7a b\u1EA1n...",leftIcon:(0,We.jsx)("i",{className:"fas fa-user text-gray-400"}),wrapperClass:"!mb-2"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"user-avatar-file-upload",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1",children:"T\u1EA3i \u1EA2nh T\u1EEB M\xE1y:"}),(0,We.jsx)("input",{id:"user-avatar-file-upload",type:"file",accept:"image/*",onChange:T=>{if(T.target.files&&T.target.files[0]){let y=T.target.files[0],v=new FileReader;v.onloadend=()=>{let x=v.result;c(x)},v.readAsDataURL(y)}},className:`block w-full text-xs sm:text-sm text-slate-500 dark:text-slate-400
                            file:mr-3 file:py-1.5 file:px-2.5
                            file:rounded-md file:border-0
                            file:text-xs sm:file:text-sm file:font-semibold
                            file:bg-primary-light/20 file:text-primary dark:file:bg-primary-dark/30 dark:file:text-primary-light
                            hover:file:bg-primary-light/30 dark:hover:file:bg-primary-dark/40
                            focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-primary dark:focus:ring-primary-dark`})]}),(0,We.jsx)(je,{label:"Ho\u1EB7c nh\u1EADp URL \u1EA3nh \u0111\u1EA1i di\u1EC7n:",value:u,onChange:T=>{let y=T.target.value;c(y)},placeholder:"https://example.com/your-avatar.png",leftIcon:(0,We.jsx)("i",{className:"fas fa-link text-gray-400"}),wrapperClass:"!mb-2"})]})]}),(0,We.jsx)($t,{label:"Gi\u1EDBi Thi\u1EC7u Ng\u1EAFn V\u1EC1 B\u1EA1n (Bio):",value:d,onChange:T=>{f(T.target.value)},rows:2,placeholder:"V\xED d\u1EE5: M\u1ED9t t\u1EF7 ph\xFA th\xEDch phi\xEAu l\u01B0u...",wrapperClass:"mt-2 !mb-2"}),(0,We.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 px-1",children:['AI s\u1EBD s\u1EED d\u1EE5ng t\xEAn v\xE0 bio n\xE0y \u0111\u1EC3 tr\xF2 chuy\u1EC7n v\u1EDBi b\u1EA1n. N\u1EBFu kh\xF4ng \u0111\u1EB7t, t\xEAn m\u1EB7c \u0111\u1ECBnh "',$e,'" v\xE0 bio "',wt,'" s\u1EBD \u0111\u01B0\u1EE3c d\xF9ng.']})]}),(0,We.jsxs)("div",{className:"mt-5 flex justify-end space-x-2",children:[(0,We.jsx)(H,{variant:"outline",onClick:e,size:"sm",children:"H\u1EE7y"}),(0,We.jsx)(H,{onClick:()=>{let T=o.trim()||$e,y=d.trim()||wt;r({name:T,avatarUrl:u.trim()||"",bio:y}),i({message:"\u0110\xE3 c\u1EADp nh\u1EADt h\u1ED3 s\u01A1 c\u1EE7a b\u1EA1n!",type:"success"}),e()},size:"sm",variant:"primary",children:"L\u01B0u H\u1ED3 S\u01A1"})]})]})},Uv=jb;var L=P(z(),1),yo=({title:t,icon:e,children:n})=>(0,L.jsxs)("section",{className:"py-3",children:[(0,L.jsxs)("h4",{className:"font-semibold text-xl lg:text-2xl border-b border-border-light dark:border-border-dark pb-2 mb-4 text-primary dark:text-primary-light flex items-center",children:[(0,L.jsx)("i",{className:`${e} mr-3 text-2xl opacity-80`}),t]}),(0,L.jsx)("div",{className:"space-y-3 prose prose-sm sm:prose-base dark:prose-invert max-w-none text-text-light dark:text-text-dark leading-relaxed",children:n})]}),eP=({onClose:t})=>(0,L.jsxs)(Te,{isOpen:!0,onClose:t,title:`H\u01B0\u1EDBng D\u1EABn S\u1EED D\u1EE5ng ${xs}`,size:"lg",containerClass:"custom-scrollbar",children:[" ",(0,L.jsxs)("div",{className:"space-y-6",children:[(0,L.jsxs)("p",{className:"text-lg text-center text-slate-700 dark:text-slate-300",children:["Ch\xE0o m\u1EEBng b\u1EA1n \u0111\u1EBFn v\u1EDBi ",(0,L.jsx)("strong",{children:xs}),"! H\xE3y c\xF9ng kh\xE1m ph\xE1 c\xE1ch t\u1EA1o v\xE0 tr\xF2 chuy\u1EC7n v\u1EDBi nh\u1EEFng nh\xE2n v\u1EADt AI \u0111\u1ED9c \u0111\xE1o:"]}),(0,L.jsxs)(yo,{title:"1. Chu\u1EA9n B\u1ECB API Key (Quan Tr\u1ECDng!)",icon:"fas fa-key",children:[(0,L.jsx)("p",{children:'\u0110\u1EC3 AI c\xF3 th\u1EC3 "nh\u1EADp vai" v\xE0 tr\xF2 chuy\u1EC7n, b\u1EA1n c\u1EA7n m\u1ED9t API Key t\u1EEB Google Gemini.'}),(0,L.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-2",children:[(0,L.jsxs)("li",{children:["Tr\xEAn giao di\u1EC7n ch\xEDnh, t\xECm n\xFAt ",(0,L.jsx)("i",{className:"fas fa-key"})," (Thi\u1EBFt L\u1EADp API Key)."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"L\u1EF1a ch\u1ECDn t\u1ED1t nh\u1EA5t cho ng\u01B0\u1EDDi m\u1EDBi:"})," \u0110\xE1nh d\u1EA5u v\xE0o \xF4 ",(0,L.jsx)("strong",{className:"text-green-600 dark:text-green-400",children:'"S\u1EED d\u1EE5ng API Key m\u1EB7c \u0111\u1ECBnh c\u1EE7a \u1EE9ng d\u1EE5ng"'}),'. T\xF9y ch\u1ECDn n\xE0y s\u1EED d\u1EE5ng m\xF4 h\xECnh Gemini Flash m\u1EA1nh m\u1EBD v\xE0 th\u01B0\u1EDDng l\xE0 \u0111\u1EE7 d\xF9ng. Nh\u1EA5n "L\u01B0u & \u0110\xF3ng".']}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"N\u1EBFu b\u1EA1n c\xF3 API Key ri\xEAng:"})," B\u1ECF ch\u1ECDn \xF4 m\u1EB7c \u0111\u1ECBnh, d\xE1n Key c\u1EE7a b\u1EA1n v\xE0o \xF4 nh\u1EADp li\u1EC7u v\xE0 nh\u1EA5n ",(0,L.jsx)("strong",{className:"text-blue-600 dark:text-blue-400",children:'"Ki\u1EC3m tra & L\u01B0u Key"'}),". B\u1EA1n c\xF3 th\u1EC3 l\u1EA5y Key t\u1EA1i ",(0,L.jsx)("a",{href:Ts,target:"_blank",rel:"noopener noreferrer",className:"text-secondary dark:text-secondary-light hover:underline font-medium",children:"Google AI Studio"}),"."]}),(0,L.jsx)("li",{children:"Key h\u1EE3p l\u1EC7 s\u1EBD \u0111\u01B0\u1EE3c l\u01B0u, v\xE0 b\u1EA1n \u0111\xE3 s\u1EB5n s\xE0ng!"})]})]}),(0,L.jsxs)(yo,{title:"2. T\u1EA1o Nh\xE2n V\u1EADt AI \u0110\u1EA7u Ti\xEAn",icon:"fas fa-user-plus",children:[(0,L.jsxs)("p",{children:["Tr\xEAn m\xE0n h\xECnh ch\xEDnh, nh\u1EA5n v\xE0o n\xFAt ",(0,L.jsx)("strong",{className:"text-primary dark:text-primary-light",children:'"T\u1EA1o Nh\xE2n V\u1EADt M\u1EDBi"'}),"."]}),(0,L.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-2",children:[(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"T\xEAn Nh\xE2n V\u1EADt (*):"})," \u0110\u1EB7t m\u1ED9t c\xE1i t\xEAn th\u1EADt k\xEAu cho AI c\u1EE7a b\u1EA1n."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"\u1EA2nh \u0110\u1EA1i Di\u1EC7n:"})," T\u1EA3i l\xEAn m\u1ED9t \u1EA3nh t\u1EEB m\xE1y ho\u1EB7c nh\u1EADp URL \u1EA3nh. N\u1EBFu b\u1ECF tr\u1ED1ng, m\u1ED9t \u1EA3nh m\u1EB7c \u0111\u1ECBnh s\u1EBD \u0111\u01B0\u1EE3c s\u1EED d\u1EE5ng."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"M\xF4 T\u1EA3 T\xEDnh C\xE1ch (*):"})," \u0110\xE2y l\xE0 ph\u1EA7n quan tr\u1ECDng nh\u1EA5t! M\xF4 t\u1EA3 c\xE0ng chi ti\u1EBFt v\u1EC1 t\xEDnh c\xE1ch, s\u1EDF th\xEDch, ki\u1EBFn th\u1EE9c, phong c\xE1ch n\xF3i chuy\u1EC7n... AI s\u1EBD nh\u1EADp vai c\xE0ng t\u1ED1t."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"L\u1EDDi Ch\xE0o M\u1EDF \u0110\u1EA7u (*):"})," C\xE2u n\xF3i \u0111\u1EA7u ti\xEAn AI s\u1EBD g\u1EEDi cho b\u1EA1n khi b\u1EAFt \u0111\u1EA7u chat."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"Gi\u1ECDng N\xF3i / Gi\u1ECDng \u0110i\u1EC7u:"}),' M\xF4 t\u1EA3 c\xE1ch AI n\xEAn "ph\xE1t \xE2m" (v\xED d\u1EE5: tr\u1EA7m \u1EA5m, vui v\u1EBB, c\u1ED5 trang...).']}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"V\xED D\u1EE5 H\u1ED9i Tho\u1EA1i:"}),' Cung c\u1EA5p v\xE0i c\u1EB7p v\xED d\u1EE5 "User: ..." v\xE0 "Character: ..." \u0111\u1EC3 AI h\u1ECDc theo phong c\xE1ch c\u1EE7a b\u1EA1n.']}),(0,L.jsxs)("li",{children:["Nh\u1EA5n ",(0,L.jsx)("strong",{className:"text-green-600 dark:text-green-400",children:'"T\u1EA1o Nh\xE2n V\u1EADt"'}),' (ho\u1EB7c "L\u01B0u Thay \u0110\u1ED5i" n\u1EBFu b\u1EA1n \u0111ang s\u1EEDa).']})]})]}),(0,L.jsxs)(yo,{title:"3. B\u1EAFt \u0110\u1EA7u Tr\xF2 Chuy\u1EC7n",icon:"fas fa-comments",children:[(0,L.jsx)("p",{children:"Sau khi t\u1EA1o, nh\xE2n v\u1EADt s\u1EBD xu\u1EA5t hi\u1EC7n tr\xEAn m\xE0n h\xECnh ch\xEDnh."}),(0,L.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-1.5",children:[(0,L.jsx)("li",{children:"Nh\u1EA5n v\xE0o \u1EA3nh \u0111\u1EA1i di\u1EC7n ho\u1EB7c t\xEAn nh\xE2n v\u1EADt \u0111\u1EC3 m\u1EDF m\xE0n h\xECnh chat."}),(0,L.jsxs)("li",{children:["Giao di\u1EC7n chat t\u01B0\u01A1ng t\u1EF1 c\xE1c \u1EE9ng d\u1EE5ng nh\u1EAFn tin quen thu\u1ED9c. Nh\u1EADp tin nh\u1EAFn c\u1EE7a b\u1EA1n v\xE0o \xF4 \u1EDF d\u01B0\u1EDBi v\xE0 nh\u1EA5n n\xFAt g\u1EEDi ",(0,L.jsx)("i",{className:"fas fa-paper-plane"}),"."]}),(0,L.jsx)("li",{children:'AI s\u1EBD ph\u1EA3n h\u1ED3i d\u1EF1a tr\xEAn "t\xEDnh c\xE1ch" b\u1EA1n \u0111\xE3 \u0111\u1ECBnh ngh\u0129a.'}),(0,L.jsxs)("li",{children:["Trong m\xE0n h\xECnh chat, b\u1EA1n c\xF3 th\u1EC3 nh\u1EA5n n\xFAt ",(0,L.jsx)("i",{className:"fas fa-ellipsis-v"})," (menu) \u0111\u1EC3 ",(0,L.jsx)("strong",{className:"text-orange-500",children:"S\u1EEDa H\u1ED3 S\u01A1"})," nh\xE2n v\u1EADt ho\u1EB7c ",(0,L.jsx)("strong",{className:"text-red-500",children:"X\xF3a L\u1ECBch S\u1EED"})," tr\xF2 chuy\u1EC7n."]})]})]}),(0,L.jsxs)(yo,{title:"4. Qu\u1EA3n L\xFD & Nh\u1EADp/Xu\u1EA5t Nh\xE2n V\u1EADt",icon:"fas fa-users-cog",children:[(0,L.jsx)("p",{children:"S\u1EED d\u1EE5ng c\xE1c n\xFAt ch\u1EE9c n\u0103ng tr\xEAn m\xE0n h\xECnh danh s\xE1ch nh\xE2n v\u1EADt:"}),(0,L.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-1.5",children:[(0,L.jsxs)("li",{children:[(0,L.jsxs)("strong",{children:[(0,L.jsx)("i",{className:"fas fa-users-cog"})," Qu\u1EA3n L\xFD N.V\u1EADt:"]})," M\u1EDF c\u1EEDa s\u1ED5 qu\u1EA3n l\xFD. T\u1EA1i \u0111\xE2y b\u1EA1n c\xF3 th\u1EC3:",(0,L.jsxs)("ul",{className:"list-circle list-inside ml-4 space-y-1 mt-1",children:[(0,L.jsx)("li",{children:"Ch\u1ECDn m\u1ED9t nh\xE2n v\u1EADt t\u1EEB danh s\xE1ch."}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"L\u01B0u Nh\xE2n V\u1EADt Ra File JSON:"})," Xu\u1EA5t \u0111\u1ECBnh ngh\u0129a nh\xE2n v\u1EADt \u0111\xE3 ch\u1ECDn ra file .json \u0111\u1EC3 l\u01B0u tr\u1EEF ho\u1EB7c chia s\u1EBB."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"L\u01B0u Nh\xE2n V\u1EADt V\xE0o Slot Tr\xECnh Duy\u1EC7t:"}),' L\u01B0u nh\xE2n v\u1EADt \u0111\xE3 ch\u1ECDn v\xE0o m\u1ED9t "slot" trong b\u1ED9 nh\u1EDB tr\xECnh duy\u1EC7t v\u1EDBi t\xEAn b\u1EA1n \u0111\u1EB7t.']}),(0,L.jsx)("li",{children:"X\xF3a c\xE1c nh\xE2n v\u1EADt hi\u1EC7n c\xF3."})]})]}),(0,L.jsxs)("li",{children:[(0,L.jsxs)("strong",{children:[(0,L.jsx)("i",{className:"fas fa-upload"})," Nh\u1EADp N.V\u1EADt:"]})," M\u1EDF c\u1EEDa s\u1ED5 nh\u1EADp. B\u1EA1n c\xF3 th\u1EC3:",(0,L.jsxs)("ul",{className:"list-circle list-inside ml-4 space-y-1 mt-1",children:[(0,L.jsx)("li",{children:"T\u1EA3i nh\xE2n v\u1EADt t\u1EEB file JSON \u0111\xE3 xu\u1EA5t tr\u01B0\u1EDBc \u0111\xF3."}),(0,L.jsx)("li",{children:"T\u1EA3i nh\xE2n v\u1EADt t\u1EEB m\u1ED9t slot \u0111\xE3 l\u01B0u trong tr\xECnh duy\u1EC7t."})]})]})]})]}),(0,L.jsx)(yo,{title:"5. C\xE1c Thi\u1EBFt L\u1EADp Kh\xE1c",icon:"fas fa-cogs",children:(0,L.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-1.5",children:[(0,L.jsxs)("li",{children:[(0,L.jsxs)("strong",{children:[(0,L.jsx)("i",{className:"fas fa-fire-alt mr-1"})," Ch\u1EBF \u0110\u1ED9 NSFW:"]})," (Bi\u1EC3u t\u01B0\u1EE3ng ",(0,L.jsx)("i",{className:"fas fa-shield-alt"})," n\u1EBFu t\u1EAFt) T\xF9y ch\u1EC9nh m\u1EE9c \u0111\u1ED9 n\u1ED9i dung ng\u01B0\u1EDDi l\u1EDBn (s\u1EED d\u1EE5ng c\xF3 tr\xE1ch nhi\u1EC7m v\xE0 theo quy \u0111\u1ECBnh c\u1EE7a Google Gemini)."]}),(0,L.jsxs)("li",{children:[(0,L.jsxs)("strong",{children:[(0,L.jsx)("i",{className:"fas fa-cogs mr-1"})," C\xE0i \u0110\u1EB7t Chung:"]})," Thay \u0111\u1ED5i giao di\u1EC7n S\xE1ng/T\u1ED1i, k\xEDch th\u01B0\u1EDBc ch\u1EEF."]})]})}),(0,L.jsx)(yo,{title:"M\u1EB9o Nh\u1ECF Cho Cu\u1ED9c Tr\xF2 Chuy\u1EC7n Th\xFA V\u1ECB",icon:"fas fa-lightbulb",children:(0,L.jsxs)("ul",{className:"list-disc list-inside ml-2 space-y-1.5",children:[(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"\u0110\u1ECBnh ngh\u0129a t\xEDnh c\xE1ch r\xF5 r\xE0ng:"}),' Cung c\u1EA5p cho AI c\xE0ng nhi\u1EC1u th\xF4ng tin v\xE0 v\xED d\u1EE5 v\u1EC1 nh\xE2n v\u1EADt, cu\u1ED9c tr\xF2 chuy\u1EC7n s\u1EBD c\xE0ng "th\u1EADt" v\xE0 th\xFA v\u1ECB.']}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"Th\u1EED nghi\u1EC7m:"})," \u0110\u1EEBng ng\u1EA1i t\u1EA1o nhi\u1EC1u nh\xE2n v\u1EADt v\u1EDBi c\xE1c t\xEDnh c\xE1ch kh\xE1c nhau \u0111\u1EC3 xem AI th\u1EC3 hi\u1EC7n th\u1EBF n\xE0o."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:'N\u1EBFu AI "l\u1EA1c \u0111\u1EC1":'})," B\u1EA1n c\xF3 th\u1EC3 s\u1EEDa l\u1EA1i h\u1ED3 s\u01A1 nh\xE2n v\u1EADt, cung c\u1EA5p th\xEAm v\xED d\u1EE5 h\u1ED9i tho\u1EA1i, ho\u1EB7c x\xF3a l\u1ECBch s\u1EED chat v\xE0 b\u1EAFt \u0111\u1EA7u l\u1EA1i."]}),(0,L.jsxs)("li",{children:[(0,L.jsx)("strong",{children:"Ki\xEAn nh\u1EABn:"}),' \u0110\xF4i khi AI c\u1EA7n v\xE0i l\u01B0\u1EE3t chat \u0111\u1EC3 "hi\u1EC3u" r\xF5 h\u01A1n v\u1EC1 nh\xE2n v\u1EADt v\xE0 ng\u1EEF c\u1EA3nh.']})]})}),(0,L.jsx)("p",{className:"mt-8 text-center text-lg font-semibold text-primary dark:text-primary-light",children:"Ch\xFAc b\u1EA1n c\xF3 nh\u1EEFng cu\u1ED9c tr\xF2 chuy\u1EC7n AI \u0111\u1EA7y s\xE1ng t\u1EA1o v\xE0 vui v\u1EBB!"})]}),(0,L.jsx)("div",{className:"mt-8 flex justify-end",children:(0,L.jsxs)(H,{onClick:t,size:"lg",variant:"primary",className:"px-8 py-3",children:[(0,L.jsx)("i",{className:"fas fa-check-circle mr-2"}),"\u0110\xE3 Hi\u1EC3u!"]})})]}),Vv=eP;var An=P(Ce(),1);var Q=P(z(),1),tP=({isOpen:t,onClose:e,onSaveCharacter:n,existingCharacter:r})=>{let{addToast:i}=Ge(),{settings:o}=we(),[l,u]=(0,An.useState)({name:"",avatarUrl:"",animatedAvatarUrl:"",personality:"",greetingMessage:"",voiceTone:"",exampleResponses:""}),[c,d]=(0,An.useState)("manual"),[f,m]=(0,An.useState)(""),[p,h]=(0,An.useState)(""),[g,C]=(0,An.useState)(""),[T,y]=(0,An.useState)({}),[v,x]=(0,An.useState)({name:!1,personality:!1,greeting:!1,voiceTone:!1,example:!1});(0,An.useEffect)(()=>{if(t){u(r||{name:"",avatarUrl:"",animatedAvatarUrl:"",personality:"",greetingMessage:"",voiceTone:"",exampleResponses:""}),d("manual"),m(""),h(""),C(""),y({}),x({name:!1,personality:!1,greeting:!1,voiceTone:!1,example:!1});let M=document.getElementById("avatar-file-upload");M&&(M.value="");let K=document.getElementById("animated-avatar-file-upload");K&&(K.value="")}},[r,t]);let S=M=>{let{name:K,value:ie}=M.target;u(V=>({...V,[K]:ie}))},w=M=>{if(M.target.files&&M.target.files[0]){let K=M.target.files[0],ie=new FileReader;ie.onloadend=()=>{let V=ie.result;u(oe=>({...oe,avatarUrl:V}))},ie.readAsDataURL(K)}else{let K=l.avatarUrl?.startsWith("data:image/")?"":l.avatarUrl;u(ie=>({...ie,avatarUrl:K||""}))}},E=M=>{let K=M.target.value;u(ie=>({...ie,avatarUrl:K}))},k=M=>{if(M.target.files&&M.target.files[0]){let K=M.target.files[0];if(K.type==="image/gif"){let ie=new FileReader;ie.onloadend=()=>{let V=ie.result;u(oe=>({...oe,animatedAvatarUrl:V}))},ie.readAsDataURL(K)}else i({message:"Vui l\xF2ng ch\u1ECDn m\u1ED9t file GIF h\u1EE3p l\u1EC7.",type:"error"}),M.target.value=""}else{let K=l.animatedAvatarUrl?.startsWith("data:image/gif")?"":l.animatedAvatarUrl;u(ie=>({...ie,animatedAvatarUrl:K||""}))}},A=M=>{let K=M.target.value;u(ie=>({...ie,animatedAvatarUrl:K}))},N=()=>{u(K=>({...K,animatedAvatarUrl:""}));let M=document.getElementById("animated-avatar-file-upload");M&&(M.value=""),i({message:"\u0110\xE3 x\xF3a \u1EA3nh \u0111\u1EA1i di\u1EC7n \u0111\u1ED9ng.",type:"info"})},U=M=>{if(M.preventDefault(),!l.name?.trim()){i({message:"T\xEAn nh\xE2n v\u1EADt kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng.",type:"error"}),d("manual");return}if(!l.personality?.trim()){i({message:"M\xF4 t\u1EA3 t\xEDnh c\xE1ch kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng.",type:"error"}),d("manual");return}if(!l.greetingMessage?.trim()){i({message:"L\u1EDDi ch\xE0o kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng.",type:"error"}),d("manual");return}let K={id:r?.id||`char-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:l.name.trim(),avatarUrl:l.avatarUrl?.trim()||"",animatedAvatarUrl:l.animatedAvatarUrl?.trim()||"",personality:l.personality.trim(),greetingMessage:l.greetingMessage.trim(),voiceTone:l.voiceTone?.trim()||"",exampleResponses:typeof l.exampleResponses=="string"?l.exampleResponses.trim():"",systemPrompt:l.systemPrompt?.trim()||"",createdAt:r?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};n(K)},G=async(M,K)=>{x(ie=>({...ie,[M]:!0}));try{let ie=await Cv(o,K,{currentName:l.name,currentPersonality:l.personality,currentGreeting:l.greetingMessage,currentVoiceTone:l.voiceTone,existingExamples:typeof l.exampleResponses=="string"?l.exampleResponses:""});if(K==="charExamplePair")u(V=>{let oe=typeof V.exampleResponses=="string"?V.exampleResponses:"",Se=oe&&ie?`${oe}

${ie}`:oe||ie;return{...V,exampleResponses:Se}});else{let V=M==="greeting"?"greetingMessage":M;u(oe=>({...oe,[V]:ie}))}i({message:`AI \u0111\xE3 g\u1EE3i \xFD ${M==="greeting"?"l\u1EDDi ch\xE0o":M==="voiceTone"?"gi\u1ECDng \u0111i\u1EC7u":M}.`,type:"success"})}catch(ie){console.error(`Error getting AI suggestion for ${M}:`,ie),i({message:`L\u1ED7i khi l\u1EA5y g\u1EE3i \xFD t\u1EEB AI: ${ie.message}`,type:"error"})}finally{x(ie=>({...ie,[M]:!1}))}},le=({fieldType:M,onClick:K,className:ie,title:V})=>(0,Q.jsx)(H,{type:"button",variant:"ghost",size:"xs",onClick:K,isLoading:v[M],className:`!p-1.5 h-7 w-7 rounded-full text-primary dark:text-primary-light ${ie}`,title:V,children:!v[M]&&(0,Q.jsx)("i",{className:"fas fa-magic"})}),Ne=async()=>{y(M=>({...M,fullRandom:!0}));try{let M=await xv(o,f,p);u(K=>({...K,name:M.name||K.name,personality:M.personality||K.personality,greetingMessage:M.greetingMessage||K.greetingMessage,voiceTone:M.voiceTone||K.voiceTone,exampleResponses:M.exampleResponses||(typeof K.exampleResponses=="string"?K.exampleResponses:"")})),i({message:"AI \u0111\xE3 t\u1EA1o xong m\u1ED9t nh\xE2n v\u1EADt brouillon! H\xE3y ki\u1EC3m tra v\xE0 tinh ch\u1EC9nh \u1EDF tab 'Thi\u1EBFt L\u1EADp Th\u1EE7 C\xF4ng'.",type:"success",duration:7e3}),d("manual")}catch(M){console.error("Error generating full random character:",M),i({message:`L\u1ED7i khi AI t\u1EA1o nh\xE2n v\u1EADt: ${M.message}`,type:"error",duration:7e3})}finally{y(M=>({...M,fullRandom:!1}))}},Ke=async()=>{if(!g.trim()){i({message:"Vui l\xF2ng nh\u1EADp m\xF4 t\u1EA3 nh\xE2n v\u1EADt \u0111\u1EC3 AI tr\xEDch xu\u1EA5t.",type:"warning"});return}y(M=>({...M,extractFromText:!0}));try{let M=await Tv(o,g);u(K=>({...K,name:M.name||K.name,personality:M.personality||K.personality,greetingMessage:M.greetingMessage||K.greetingMessage,voiceTone:M.voiceTone||K.voiceTone,exampleResponses:M.exampleResponses||(typeof K.exampleResponses=="string"?K.exampleResponses:"")})),i({message:"AI \u0111\xE3 tr\xEDch xu\u1EA5t th\xF4ng tin nh\xE2n v\u1EADt! H\xE3y ki\u1EC3m tra v\xE0 tinh ch\u1EC9nh \u1EDF tab 'Thi\u1EBFt L\u1EADp Th\u1EE7 C\xF4ng'.",type:"success",duration:7e3}),d("manual")}catch(M){console.error("Error extracting character from text:",M),i({message:`L\u1ED7i khi AI tr\xEDch xu\u1EA5t: ${M.message}`,type:"error",duration:7e3})}finally{y(M=>({...M,extractFromText:!1}))}},me=({tabId:M,title:K,icon:ie})=>(0,Q.jsxs)("button",{type:"button",role:"tab","aria-selected":c===M,onClick:()=>d(M),className:`flex-1 sm:flex-initial sm:flex-shrink-0 px-3 py-2.5 text-sm font-medium rounded-t-lg border-b-2
                  focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1
                  transition-all duration-200 ease-in-out flex items-center justify-center gap-2
                  ${c===M?"border-primary text-primary dark:border-primary-light dark:text-primary-light bg-primary/5 dark:bg-primary-light/10":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[(0,Q.jsx)("i",{className:`fas ${ie} text-base`}),(0,Q.jsx)("span",{className:"hidden sm:inline",children:K}),(0,Q.jsx)("span",{className:"sm:hidden",children:K.split(" ")[0]})]});return(0,Q.jsxs)(Te,{isOpen:t,onClose:e,title:r?"Ch\u1EC9nh S\u1EEDa Nh\xE2n v\u1EADt AI":"Kh\u1EDFi T\u1EA1o Nh\xE2n V\u1EADt AI M\u1EDBi",size:"2xl",children:[(0,Q.jsxs)("div",{className:"flex flex-col sm:flex-row border-b border-border-light dark:border-border-dark mb-2 sm:mb-4 -mt-2 sm:-mt-3 overflow-x-auto no-scrollbar",children:[(0,Q.jsx)(me,{tabId:"manual",title:"Thi\u1EBFt L\u1EADp Th\u1EE7 C\xF4ng",icon:"fa-sliders-h"}),(0,Q.jsx)(me,{tabId:"randomAI",title:"AI Kh\u1EDFi T\u1EA1o Ng\u1EABu Nhi\xEAn",icon:"fa-dice-d20"}),(0,Q.jsx)(me,{tabId:"extractAI",title:"AI Tr\xEDch Xu\u1EA5t T\u1EEB V\u0103n B\u1EA3n",icon:"fa-file-import"})]}),(0,Q.jsxs)("form",{onSubmit:U,className:"space-y-3 md:space-y-4",children:[c==="manual"&&(0,Q.jsxs)("div",{className:"animate-fadeIn",children:[(0,Q.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-4 items-start",children:[(0,Q.jsxs)("div",{className:"md:col-span-1 mb-4 md:mb-0",children:[(0,Q.jsx)("label",{className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:"\u1EA2nh \u0110\u1EA1i Di\u1EC7n:"}),(0,Q.jsx)(Fe,{name:l.name||"",avatarUrl:l.avatarUrl||"",animatedAvatarUrl:l.animatedAvatarUrl||"",className:"w-32 h-32 sm:w-40 sm:h-40 rounded-lg object-cover border-2 border-primary/20 dark:border-primary-light/20 shadow-md mx-auto md:mx-0",altText:"Xem tr\u01B0\u1EDBc \u1EA2nh \u0110\u1EA1i Di\u1EC7n"}),l.animatedAvatarUrl&&(0,Q.jsx)(H,{type:"button",size:"xs",variant:"danger",onClick:N,className:"!py-1 !px-2 mt-1.5 mx-auto md:mx-0 block",leftIcon:(0,Q.jsx)("i",{className:"fas fa-times"}),children:"X\xF3a GIF"})]}),(0,Q.jsxs)("div",{className:"md:col-span-2 space-y-3",children:[(0,Q.jsx)(je,{label:"T\xEAn Nh\xE2n V\u1EADt (*):",name:"name",value:l.name||"",onChange:S,placeholder:"V\xED d\u1EE5: L\xE3o H\u1EA1c, ChatGPT H\xE0i H\u01B0\u1EDBc",required:!0,rightIcon:(0,Q.jsx)(le,{fieldType:"name",onClick:()=>G("name","charName"),title:"G\u1EE3i \xFD t\xEAn nh\xE2n v\u1EADt"})}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("label",{htmlFor:"avatar-file-upload",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:"T\u1EA3i \u1EA2nh T\u0129nh T\u1EEB M\xE1y:"}),(0,Q.jsx)("input",{id:"avatar-file-upload",type:"file",accept:"image/*",onChange:w,className:`block w-full text-sm text-slate-500 dark:text-slate-400
                                    file:mr-4 file:py-2 file:px-3
                                    file:rounded-md file:border-0
                                    file:text-sm file:font-semibold
                                    file:bg-primary-light/20 file:text-primary dark:file:bg-primary-dark/30 dark:file:text-primary-light
                                    hover:file:bg-primary-light/30 dark:hover:file:bg-primary-dark/40
                                    focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-primary dark:focus:ring-primary-dark`})]}),(0,Q.jsx)(je,{label:"Ho\u1EB7c nh\u1EADp URL \u1EA3nh \u0111\u1EA1i di\u1EC7n t\u0129nh:",name:"avatarUrl",value:l.avatarUrl?.startsWith("data:image/")?"":l.avatarUrl||"",onChange:E,placeholder:l.avatarUrl?.startsWith("data:image/")?"\u1EA2nh t\u0129nh \u0111\xE3 \u0111\u01B0\u1EE3c t\u1EA3i l\xEAn":"https://example.com/avatar.png",disabled:l.avatarUrl?.startsWith("data:image/")}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("label",{htmlFor:"animated-avatar-file-upload",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:"T\u1EA3i \u1EA2nh \u0110\u1ED9ng GIF T\u1EEB M\xE1y:"}),(0,Q.jsx)("input",{id:"animated-avatar-file-upload",type:"file",accept:"image/gif",onChange:k,className:`block w-full text-sm text-slate-500 dark:text-slate-400
                                    file:mr-4 file:py-2 file:px-3
                                    file:rounded-md file:border-0
                                    file:text-sm file:font-semibold
                                    file:bg-secondary-light/20 file:text-secondary dark:file:bg-secondary-dark/30 dark:file:text-secondary-light
                                    hover:file:bg-secondary-light/30 dark:hover:file:bg-secondary-dark/40
                                    focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-secondary dark:focus:ring-secondary-dark`})]}),(0,Q.jsx)(je,{label:"Ho\u1EB7c nh\u1EADp URL \u1EA2nh \u0110\u1EA1i Di\u1EC7n \u0110\u1ED9ng (GIF):",name:"animatedAvatarUrl",value:l.animatedAvatarUrl?.startsWith("data:image/gif")?"":l.animatedAvatarUrl||"",onChange:A,placeholder:l.animatedAvatarUrl?.startsWith("data:image/gif")?"GIF \u0111\xE3 \u0111\u01B0\u1EE3c t\u1EA3i l\xEAn":"https://example.com/avatar.gif",disabled:l.animatedAvatarUrl?.startsWith("data:image/gif")})]})]}),(0,Q.jsx)($t,{label:"M\xF4 T\u1EA3 T\xEDnh C\xE1ch (*):",name:"personality",value:l.personality||"",onChange:S,rows:5,placeholder:"M\xF4 t\u1EA3 chi ti\u1EBFt v\u1EC1 t\xEDnh c\xE1ch, s\u1EDF th\xEDch, ki\u1EBFn th\u1EE9c, phong c\xE1ch n\xF3i chuy\u1EC7n c\u1EE7a nh\xE2n v\u1EADt...",required:!0}),(0,Q.jsx)("div",{className:"flex justify-end -mt-2",children:(0,Q.jsx)(le,{fieldType:"personality",onClick:()=>G("personality","charPersonality"),title:"G\u1EE3i \xFD m\xF4 t\u1EA3 t\xEDnh c\xE1ch",className:"relative -top-1 right-1"})}),(0,Q.jsx)($t,{label:"L\u1EDDi Ch\xE0o M\u1EDF \u0110\u1EA7u (*):",name:"greetingMessage",value:l.greetingMessage||"",onChange:S,rows:2,placeholder:"Nh\xE2n v\u1EADt s\u1EBD n\xF3i g\xEC khi b\u1EA1n b\u1EAFt \u0111\u1EA7u chat?",required:!0}),(0,Q.jsx)("div",{className:"flex justify-end -mt-2",children:(0,Q.jsx)(le,{fieldType:"greeting",onClick:()=>G("greeting","charGreeting"),title:"G\u1EE3i \xFD l\u1EDDi ch\xE0o",className:"relative -top-1 right-1"})}),(0,Q.jsx)($t,{label:"Gi\u1ECDng N\xF3i / Gi\u1ECDng \u0110i\u1EC7u (M\xF4 t\u1EA3):",name:"voiceTone",value:l.voiceTone||"",onChange:S,rows:2,placeholder:"V\xED d\u1EE5: Tr\u1EA7m \u1EA5m, nh\u1EB9 nh\xE0ng; Nhanh nh\u1EB9n, ho\u1EA1t b\xE1t; Gi\u1ECDng c\u1ED5 trang, uy nghi\xEAm."}),(0,Q.jsx)("div",{className:"flex justify-end -mt-2",children:(0,Q.jsx)(le,{fieldType:"voiceTone",onClick:()=>G("voiceTone","charVoiceTone"),title:"G\u1EE3i \xFD gi\u1ECDng n\xF3i/gi\u1ECDng \u0111i\u1EC7u",className:"relative -top-1 right-1"})}),(0,Q.jsx)($t,{label:"V\xED D\u1EE5 H\u1ED9i Tho\u1EA1i (C\xE1ch nh\xE2n v\u1EADt ph\u1EA3n h\u1ED3i):",name:"exampleResponses",value:typeof l.exampleResponses=="string"?l.exampleResponses:"",onChange:S,rows:5,placeholder:"Cung c\u1EA5p c\xE1c v\xED d\u1EE5 'User: ...' v\xE0 'Character: ...' tr\xEAn d\xF2ng ri\xEAng."}),(0,Q.jsx)("div",{className:"flex justify-end -mt-2",children:(0,Q.jsx)(le,{fieldType:"example",onClick:()=>G("example","charExamplePair"),title:"G\u1EE3i \xFD m\u1ED9t c\u1EB7p h\u1ED9i tho\u1EA1i m\u1EABu",className:"relative -top-1 right-1"})}),(0,Q.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 px-1 mt-3",children:"L\u01B0u \xFD: \u0110\u1EC3 kh\u1EDFi t\u1EA1o, c\xE1c tr\u01B0\u1EDDng c\xF3 d\u1EA5u (*) trong tab n\xE0y ph\u1EA3i \u0111\u01B0\u1EE3c \u0111i\u1EC1n \u0111\u1EA7y \u0111\u1EE7, k\u1EC3 c\u1EA3 khi s\u1EED d\u1EE5ng AI \u0111\u1EC3 t\u1EA1o ho\u1EB7c tr\xEDch xu\u1EA5t."})]}),c==="randomAI"&&(0,Q.jsxs)("div",{className:"space-y-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg animate-fadeIn",children:[(0,Q.jsxs)("h3",{className:"text-lg font-semibold text-primary dark:text-primary-light flex items-center",children:[(0,Q.jsx)("i",{className:"fas fa-dice-d20 mr-2"}),"AI Kh\u1EDFi T\u1EA1o Nh\xE2n V\u1EADt Ng\u1EABu Nhi\xEAn"]}),(0,Q.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:'Cung c\u1EA5p m\u1ED9t v\xE0i g\u1EE3i \xFD (t\xF9y ch\u1ECDn) v\xE0 \u0111\u1EC3 AI t\u1EF1 do s\xE1ng t\u1EA1o m\u1ED9t nh\xE2n v\u1EADt ho\xE0n ch\u1EC9nh cho b\u1EA1n. K\u1EBFt qu\u1EA3 s\u1EBD \u0111\u01B0\u1EE3c \u0111i\u1EC1n v\xE0o tab "Thi\u1EBFt L\u1EADp Th\u1EE7 C\xF4ng" \u0111\u1EC3 b\u1EA1n xem v\xE0 ch\u1EC9nh s\u1EEDa.'}),(0,Q.jsx)(je,{label:"Ch\u1EE7 \u0111\u1EC1 / Lo\u1EA1i h\xECnh nh\xE2n v\u1EADt (T\xF9y ch\u1ECDn):",value:f,onChange:M=>m(M.target.value),placeholder:"V\xED d\u1EE5: Robot qu\u1EA3n gia, Nh\xE0 th\xE1m hi\u1EC3m kh\xF4ng gian, Ph\xE1p s\u01B0 c\u1ED5 \u0111\u1EA1i, Th\xE1m t\u1EED t\xE0i ba..."}),(0,Q.jsx)($t,{label:"M\xF4 t\u1EA3 ng\u1EAFn g\u1ECDn v\u1EC1 \xFD t\u01B0\u1EDFng nh\xE2n v\u1EADt (T\xF9y ch\u1ECDn):",value:p,onChange:M=>h(M.target.value),rows:3,placeholder:"V\xED d\u1EE5: M\u1ED9t AI qu\u1EA3n gia trung th\xE0nh nh\u01B0ng h\u01A1i v\u1EE5ng v\u1EC1. Ho\u1EB7c m\u1ED9t nh\xE0 th\xE1m hi\u1EC3m kh\xF4ng gian b\u1ECB m\u1EAFc k\u1EB9t tr\xEAn h\xE0nh tinh l\u1EA1, t\xECm c\xE1ch sinh t\u1ED3n..."}),(0,Q.jsx)(H,{type:"button",onClick:Ne,isLoading:T.fullRandom,leftIcon:(0,Q.jsx)("i",{className:"fas fa-brain"}),variant:"secondary",fullWidth:!0,size:"lg",children:"\u0110\u1EC3 AI S\xE1ng T\u1EA1o To\xE0n B\u1ED9 Nh\xE2n V\u1EADt"})]}),c==="extractAI"&&(0,Q.jsxs)("div",{className:"space-y-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg animate-fadeIn",children:[(0,Q.jsxs)("h3",{className:"text-lg font-semibold text-primary dark:text-primary-light flex items-center",children:[(0,Q.jsx)("i",{className:"fas fa-file-import mr-2"}),"AI Tr\xEDch Xu\u1EA5t Thi\u1EBFt L\u1EADp T\u1EEB V\u0103n B\u1EA3n"]}),(0,Q.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:'D\xE1n ho\u1EB7c vi\u1EBFt m\xF4 t\u1EA3 chi ti\u1EBFt v\u1EC1 nh\xE2n v\u1EADt b\u1EA1n mong mu\u1ED1n. AI s\u1EBD c\u1ED1 g\u1EAFng ph\xE2n t\xEDch v\xE0 \u0111i\u1EC1n c\xE1c th\xF4ng tin v\xE0o tab "Thi\u1EBFt L\u1EADp Th\u1EE7 C\xF4ng".'}),(0,Q.jsx)($t,{label:"D\xE1n ho\u1EB7c vi\u1EBFt m\xF4 t\u1EA3 to\xE0n b\u1ED9 thi\u1EBFt l\u1EADp nh\xE2n v\u1EADt mong mu\u1ED1n c\u1EE7a b\u1EA1n t\u1EA1i \u0111\xE2y:",value:g,onChange:M=>C(M.target.value),rows:8,placeholder:"V\xED d\u1EE5: T\xEAn: Luna. T\xEDnh c\xE1ch: M\u1ED9t AI vui v\u1EBB, l\u1EA1c quan, h\u01A1i t\xF2 m\xF2, th\xEDch h\u1ECDc h\u1ECFi v\u1EC1 con ng\u01B0\u1EDDi. L\u1EDDi ch\xE0o: 'Xin ch\xE0o! M\xECnh l\xE0 Luna, r\u1EA5t vui \u0111\u01B0\u1EE3c l\xE0m quen!'. Gi\u1ECDng \u0111i\u1EC7u: Th\xE2n thi\u1EC7n, trong tr\u1EBBo. V\xED d\u1EE5 h\u1ED9i tho\u1EA1i: User: B\u1EA1n th\xEDch l\xE0m g\xEC? Character: M\xECnh th\xEDch \u0111\u1ECDc s\xE1ch v\xE0 kh\xE1m ph\xE1 nh\u1EEFng \u0111i\u1EC1u m\u1EDBi m\u1EBB tr\xEAn m\u1EA1ng!"}),(0,Q.jsx)(H,{type:"button",onClick:Ke,isLoading:T.extractFromText,leftIcon:(0,Q.jsx)("i",{className:"fas fa-wand-magic-sparkles"}),variant:"secondary",fullWidth:!0,size:"lg",children:"\u0110\u1EC3 AI Tr\xEDch Xu\u1EA5t Thi\u1EBFt L\u1EADp T\u1EEB M\xF4 T\u1EA3 Tr\xEAn"})]}),(0,Q.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-border-light dark:border-border-dark mt-6",children:[(0,Q.jsx)(H,{type:"button",variant:"outline",onClick:e,size:"lg",children:"H\u1EE7y"}),(0,Q.jsx)(H,{type:"submit",variant:"primary",size:"lg",disabled:Object.values(T).some(Boolean)||Object.values(v).some(Boolean),children:r?"L\u01B0u Thay \u0110\u1ED5i":"T\u1EA1o Nh\xE2n V\u1EADt"})]})]})]})},$v=tP;var Ol=P(Ce(),1);var Ee=P(z(),1),nP=({isOpen:t,onClose:e,onSaveGroup:n,allCharacters:r,existingGroup:i})=>{let{addToast:o}=Ge(),{settings:l}=we(),[u,c]=(0,Ol.useState)({name:"",avatarUrl:"",memberIds:[]});(0,Ol.useEffect)(()=>{t&&c(i||{name:"",avatarUrl:"",memberIds:[]})},[i,t]);let d=h=>{let{name:g,value:C}=h.target;c(T=>({...T,[g]:C}))},f=h=>{if(h.target.files&&h.target.files[0]){let g=new FileReader;g.onloadend=()=>c(C=>({...C,avatarUrl:g.result})),g.readAsDataURL(h.target.files[0])}},m=h=>{c(g=>{let C=g.memberIds||[],T=!C.includes(h);if(T&&!l.allowUnlimitedGroupMembers&&C.length>=5)return o({message:"\u0110\xE3 \u0111\u1EA1t gi\u1EDBi h\u1EA1n 5 th\xE0nh vi\xEAn. \u0110\u1EC3 th\xEAm, h\xE3y b\u1EADt 'Nh\xF3m kh\xF4ng gi\u1EDBi h\u1EA1n' trong C\xE0i \u0111\u1EB7t AI.",type:"warning",duration:7e3}),g;let y=T?[...C,h]:C.filter(v=>v!==h);return{...g,memberIds:y}})};return(0,Ee.jsx)(Te,{isOpen:t,onClose:e,title:i?"Ch\u1EC9nh S\u1EEDa Nh\xF3m Chat":"T\u1EA1o Nh\xF3m Chat M\u1EDBi",size:"lg",children:(0,Ee.jsxs)("form",{onSubmit:h=>{if(h.preventDefault(),!u.name?.trim()){o({message:"T\xEAn nh\xF3m kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng.",type:"error"});return}if(!u.memberIds||u.memberIds.length<1){o({message:"Nh\xF3m ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 1 th\xE0nh vi\xEAn.",type:"error"});return}if(!l.allowUnlimitedGroupMembers&&u.memberIds.length>5){o({message:`Nh\xF3m v\u01B0\u1EE3t qu\xE1 gi\u1EDBi h\u1EA1n 5 th\xE0nh vi\xEAn. Hi\u1EC7n t\u1EA1i c\xF3 ${u.memberIds.length}.`,type:"error"});return}let g={id:i?.id||`group-${Date.now()}`,name:u.name.trim(),avatarUrl:u.avatarUrl?.trim()||"",memberIds:u.memberIds,createdAt:i?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};n(g)},className:"space-y-4",children:[(0,Ee.jsxs)("div",{className:"md:grid md:grid-cols-3 md:gap-4 items-start",children:[(0,Ee.jsxs)("div",{className:"md:col-span-1 mb-4 md:mb-0 text-center",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:"\u1EA2nh \u0110\u1EA1i Di\u1EC7n Nh\xF3m:"}),(0,Ee.jsx)(Fe,{name:u.name||"?",avatarUrl:u.avatarUrl,className:"w-32 h-32 rounded-lg object-cover border-2 border-primary/20 dark:border-primary-light/20 shadow-md mx-auto"})]}),(0,Ee.jsxs)("div",{className:"md:col-span-2 space-y-3",children:[(0,Ee.jsx)(je,{label:"T\xEAn Nh\xF3m (*):",name:"name",value:u.name||"",onChange:d,placeholder:"V\xED d\u1EE5: H\u1ED9i B\xE0n Tr\xF2n, Bi\u1EC7t \u0110\u1ED9i Si\xEAu Anh H\xF9ng",required:!0}),(0,Ee.jsx)(je,{label:"URL \u1EA2nh \u0110\u1EA1i Di\u1EC7n Nh\xF3m:",name:"avatarUrl",value:u.avatarUrl?.startsWith("data:")?"":u.avatarUrl||"",onChange:d,placeholder:u.avatarUrl?.startsWith("data:")?"\u1EA2nh \u0111\xE3 \u0111\u01B0\u1EE3c t\u1EA3i l\xEAn":"https://example.com/group.png",disabled:u.avatarUrl?.startsWith("data:")}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{htmlFor:"group-avatar-file",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:"Ho\u1EB7c T\u1EA3i \u1EA2nh T\u1EEB M\xE1y:"}),(0,Ee.jsx)("input",{id:"group-avatar-file",type:"file",accept:"image/*",onChange:f,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-3 file:rounded-md file:border-0 file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20"})]})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-text-light dark:text-text-dark",children:"Ch\u1ECDn Th\xE0nh Vi\xEAn (*):"}),(0,Ee.jsxs)("span",{className:`text-xs font-mono px-2 py-1 rounded-md ${!l.allowUnlimitedGroupMembers&&(u.memberIds?.length||0)>=5?"text-red-700 bg-red-100 dark:text-red-200 dark:bg-red-900/50":"text-slate-600 bg-slate-200 dark:text-slate-300 dark:bg-slate-700"}`,children:[u.memberIds?.length||0,"/",l.allowUnlimitedGroupMembers?"\u221E":5]})]}),(0,Ee.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2 p-2 bg-slate-100 dark:bg-slate-800 rounded-md custom-scrollbar",children:r.length===0?(0,Ee.jsx)("p",{className:"text-sm text-slate-500 italic text-center",children:"B\u1EA1n c\u1EA7n t\u1EA1o nh\xE2n v\u1EADt tr\u01B0\u1EDBc khi c\xF3 th\u1EC3 th\xEAm v\xE0o nh\xF3m."}):r.map(h=>(0,Ee.jsxs)("div",{onClick:()=>m(h.id),className:`flex items-center p-2 rounded-md cursor-pointer transition-all duration-200 ${u.memberIds?.includes(h.id)?"bg-primary/20 dark:bg-primary-dark/30 ring-2 ring-primary":"bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:[(0,Ee.jsx)(Fe,{name:h.name,avatarUrl:h.avatarUrl,animatedAvatarUrl:h.animatedAvatarUrl,className:"w-8 h-8 rounded-full mr-3 flex-shrink-0"}),(0,Ee.jsx)("span",{className:"font-medium text-sm text-text-light dark:text-text-dark flex-grow",children:h.name}),(0,Ee.jsx)("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${u.memberIds?.includes(h.id)?"bg-primary border-primary-dark":"bg-slate-300 dark:bg-slate-600 border-slate-400"}`,children:u.memberIds?.includes(h.id)&&(0,Ee.jsx)("i",{className:"fas fa-check text-white text-xs"})})]},h.id))})]}),(0,Ee.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-border-light dark:border-border-dark mt-4",children:[(0,Ee.jsx)(H,{type:"button",variant:"outline",onClick:e,size:"lg",children:"H\u1EE7y"}),(0,Ee.jsx)(H,{type:"submit",variant:"primary",size:"lg",children:i?"L\u01B0u Thay \u0110\u1ED5i":"T\u1EA1o Nh\xF3m"})]})]})})},Gv=nP;var en=P(Ce(),1);var B=P(z(),1),rP=()=>{let t=[];for(let e=0;e<localStorage.length;e++){let n=localStorage.key(e);if(n&&n.startsWith(_s))try{let r=localStorage.getItem(n);if(r){let i=JSON.parse(r);i.character&&i.savedAt&&t.push({key:n,characterName:i.character.name,savedAt:i.savedAt})}}catch(r){console.warn(`Could not parse character slot ${n}:`,r)}}return t.sort((e,n)=>new Date(n.savedAt).getTime()-new Date(e.savedAt).getTime())},iP=({isOpen:t,onClose:e,characters:n,groups:r,onSaveCharacterToJsonFile:i,onSaveAllCharactersToJsonFile:o,onSaveAllCharactersAndHistoryToJsonFile:l,onSaveCharacterToSlot:u,onLoadCharacterFromFile:c,onLoadCharacterFromSlot:d,onDeleteCharacter:f,onDeleteGroup:m,onEditGroup:p})=>{let{addToast:h}=Ge(),[g,C]=(0,en.useState)("characters"),[T,y]=(0,en.useState)(""),[v,x]=(0,en.useState)(""),[S,w]=(0,en.useState)([]),[E,k]=(0,en.useState)(null),[A,N]=(0,en.useState)(!1),U=(0,en.useCallback)(()=>{w(rP())},[]);(0,en.useEffect)(()=>{if(t)if(U(),k(null),n.length>0){let V=n.some(oe=>oe.id===T);if(!T||!V)y(n[0].id),x(n[0].name);else{let oe=n.find(Se=>Se.id===T);oe&&x(oe.name)}}else y(""),x("")},[t,n,T,U]),(0,en.useEffect)(()=>{if(t&&T){let V=n.find(oe=>oe.id===T);V&&x(V.name)}},[T,n,t]);let G=()=>n.find(V=>V.id===T),le=()=>{let V=G();if(!V){h({message:"Vui l\xF2ng ch\u1ECDn m\u1ED9t nh\xE2n v\u1EADt \u0111\u1EC3 l\u01B0u.",type:"error"});return}let oe=v.trim();if(!oe){h({message:"Vui l\xF2ng nh\u1EADp t\xEAn cho slot l\u01B0u tr\u1EEF.",type:"warning"});return}let Se=oe.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_.-]/g,""),nn=_s+Se,pi=S.some(hi=>hi.key===nn);u(V,Se)&&(h(pi?{message:`\u0110\xE3 ghi \u0111\xE8 slot "${oe}" v\u1EDBi nh\xE2n v\u1EADt ${V.name}.`,type:"success",icon:"fas fa-hdd"}:{message:`Nh\xE2n v\u1EADt ${V.name} \u0111\xE3 \u0111\u01B0\u1EE3c l\u01B0u v\xE0o slot m\u1EDBi: "${oe}"`,type:"success",icon:"fas fa-save"}),U())},Ne=V=>{let oe=n.find(Se=>Se.id===V);if(oe&&window.confirm(`B\u1EA1n c\xF3 ch\u1EAFc mu\u1ED1n x\xF3a nh\xE2n v\u1EADt "${oe.name}" kh\u1ECFi \u1EE9ng d\u1EE5ng? H\xE0nh \u0111\u1ED9ng n\xE0y kh\xF4ng th\u1EC3 ho\xE0n t\xE1c v\xE0 c\u0169ng s\u1EBD x\xF3a l\u1ECBch s\u1EED chat c\u1EE7a nh\xE2n v\u1EADt n\xE0y.`)&&(f(V),h({message:`\u0110\xE3 x\xF3a nh\xE2n v\u1EADt "${oe.name}" v\xE0 l\u1ECBch s\u1EED chat li\xEAn quan.`,type:"info",duration:7e3}),T===V)){let Se=n.filter(nn=>nn.id!==V);Se.length>0?(y(Se[0].id),x(Se[0].name)):(y(""),x(""))}},Ke=V=>{window.confirm(`B\u1EA1n c\xF3 ch\u1EAFc mu\u1ED1n x\xF3a nh\xF3m "${V.name}"? H\xE0nh \u0111\u1ED9ng n\xE0y s\u1EBD x\xF3a c\u1EA3 l\u1ECBch s\u1EED chat v\xE0 kh\xF4ng th\u1EC3 ho\xE0n t\xE1c.`)&&(m(V.id),h({message:`\u0110\xE3 x\xF3a nh\xF3m: ${V.name}`,type:"success"}))},me=V=>{x(V.characterName),h({message:`T\xEAn slot "${V.characterName}" \u0111\xE3 \u0111\u01B0\u1EE3c \u0111i\u1EC1n. Ch\u1ECDn nh\xE2n v\u1EADt v\xE0 nh\u1EA5n "L\u01B0u V\xE0o Slot N\xE0y" \u0111\u1EC3 ghi \u0111\xE8.`,type:"info",icon:"fas fa-edit"})},M=V=>{if(V.target.files&&V.target.files[0]){let oe=V.target.files[0];oe.type==="application/json"?k(oe):(h({message:"Vui l\xF2ng ch\u1ECDn m\u1ED9t file .json h\u1EE3p l\u1EC7.",type:"error"}),k(null),V.target.value="")}else k(null)},K=()=>{if(!E){h({message:"Vui l\xF2ng ch\u1ECDn m\u1ED9t file \u0111\u1EC3 t\u1EA3i.",type:"warning"});return}N(!0);let V=new FileReader;V.onload=oe=>{try{let Se=oe.target?.result;if(typeof Se=="string"){let nn=JSON.parse(Se);c(nn)}else throw new Error("Kh\xF4ng th\u1EC3 \u0111\u1ECDc n\u1ED9i dung file.")}catch(Se){console.error("Error loading or parsing character file:",Se),h({message:`L\u1ED7i khi t\u1EA3i file: ${Se instanceof Error?Se.message:"N\u1ED9i dung file kh\xF4ng h\u1EE3p l\u1EC7."}`,type:"error",duration:7e3})}finally{N(!1),k(null);let Se=document.getElementById("char-manage-file-upload");Se&&(Se.value="")}},V.onerror=()=>{h({message:"L\u1ED7i khi \u0111\u1ECDc file.",type:"error"}),N(!1)},V.readAsText(E)},ie=({tabId:V,title:oe,icon:Se,count:nn})=>(0,B.jsxs)("button",{type:"button",role:"tab","aria-selected":g===V,onClick:()=>C(V),className:`flex-1 px-3 py-3 text-sm font-semibold border-b-2
                  focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-0
                  transition-colors duration-200 ease-in-out flex items-center justify-center gap-2
                  ${g===V?"border-primary text-primary dark:border-primary-light dark:text-primary-light":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[(0,B.jsx)("i",{className:`fas ${Se} fa-fw`}),oe,(0,B.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${g===V?"bg-primary/10 dark:bg-primary-light/10":"bg-slate-200 dark:bg-slate-700"}`,children:nn})]});return(0,B.jsxs)(Te,{isOpen:t,onClose:e,title:"Qu\u1EA3n L\xFD & Nh\u1EADp/Xu\u1EA5t",size:"2xl",children:[(0,B.jsxs)("div",{className:"flex border-b border-border-light dark:border-border-dark -mt-2 sm:-mt-3",children:[(0,B.jsx)(ie,{tabId:"characters",title:"Nh\xE2n V\u1EADt",icon:"fa-user",count:n.length}),(0,B.jsx)(ie,{tabId:"groups",title:"Nh\xF3m Chat",icon:"fa-users",count:r.length})]}),(0,B.jsxs)("div",{className:"mt-4",children:[g==="characters"&&(0,B.jsxs)("div",{className:"animate-fadeIn grid grid-cols-1 lg:grid-cols-2 gap-5",children:[(0,B.jsxs)("section",{className:"space-y-4 p-3.5 border rounded-lg bg-slate-50 dark:bg-slate-800/50 border-border-light dark:border-border-dark",children:[(0,B.jsxs)("h3",{className:"text-base font-semibold text-text-light dark:text-text-dark flex items-center",children:[(0,B.jsx)("i",{className:"fas fa-users-cog mr-2 text-primary dark:text-primary-light"}),"Qu\u1EA3n L\xFD Nh\xE2n V\u1EADt (",n.length,")"]}),n.length===0?(0,B.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 italic py-2",children:"Ch\u01B0a c\xF3 nh\xE2n v\u1EADt n\xE0o trong \u1EE9ng d\u1EE5ng."}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-1.5 custom-scrollbar pr-1.5",children:n.map(V=>(0,B.jsxs)("div",{className:`p-2 border rounded-md flex items-center cursor-pointer transition-all duration-150
                                                    ${T===V.id?"bg-primary/10 dark:bg-primary-dark/20 border-primary dark:border-primary-light shadow-md":"bg-white dark:bg-slate-700/50 border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"}`,onClick:()=>y(V.id),onKeyDown:oe=>{(oe.key==="Enter"||oe.key===" ")&&y(V.id)},tabIndex:0,role:"radio","aria-checked":T===V.id,children:[(0,B.jsx)(Fe,{name:V.name,avatarUrl:V.avatarUrl,animatedAvatarUrl:V.animatedAvatarUrl,className:"w-7 h-7 rounded-full mr-2 flex-shrink-0"}),(0,B.jsx)("span",{className:`flex-grow text-sm truncate ${T===V.id?"font-semibold text-primary dark:text-primary-light":"text-slate-700 dark:text-slate-200"}`,children:V.name}),(0,B.jsx)(H,{size:"xs",variant:"danger",onClick:oe=>{oe.stopPropagation(),Ne(V.id)},className:"!p-1.5 ml-2",title:`X\xF3a nh\xE2n v\u1EADt ${V.name} kh\u1ECFi \u1EE9ng d\u1EE5ng`,children:(0,B.jsx)("i",{className:"fas fa-trash-alt"})})]},V.id))}),(0,B.jsxs)("div",{className:"space-y-2.5 pt-3 border-t border-border-light dark:border-border-dark",children:[(0,B.jsx)("h4",{className:"text-sm font-medium text-text-light dark:text-text-dark",children:"Thao t\xE1c v\u1EDBi nh\xE2n v\u1EADt \u0111\xE3 ch\u1ECDn:"}),(0,B.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 items-end",children:[(0,B.jsx)(je,{label:"T\xEAn Slot L\u01B0u Tr\u1EEF (Tr\xECnh Duy\u1EC7t):",value:v,onChange:V=>x(V.target.value),placeholder:"T\xEAn g\u1EE3i nh\u1EDB cho slot...",wrapperClass:"flex-grow !mb-0",disabled:!T||n.length===0}),(0,B.jsx)(H,{onClick:le,variant:"secondary",className:"w-full sm:w-auto",disabled:!v.trim()||!T||n.length===0,leftIcon:(0,B.jsx)("i",{className:"fas fa-hdd"}),children:"L\u01B0u V\xE0o Slot"})]}),(0,B.jsx)(H,{onClick:()=>{let V=G();V?i(V):h({message:"Vui l\xF2ng ch\u1ECDn m\u1ED9t nh\xE2n v\u1EADt t\u1EEB danh s\xE1ch.",type:"warning"})},variant:"outline",fullWidth:!0,leftIcon:(0,B.jsx)("i",{className:"fas fa-file-export"}),disabled:!T||n.length===0,children:"L\u01B0u Nh\xE2n V\u1EADt \u0110\xE3 Ch\u1ECDn Ra File JSON"})]})]}),(0,B.jsxs)("div",{className:"space-y-2.5 pt-3 border-t border-border-light dark:border-border-dark",children:[(0,B.jsx)("h4",{className:"text-sm font-medium text-text-light dark:text-text-dark",children:"Thao t\xE1c v\u1EDBi to\xE0n b\u1ED9 nh\xE2n v\u1EADt:"}),(0,B.jsx)(H,{onClick:o,variant:"outline",fullWidth:!0,leftIcon:(0,B.jsx)("i",{className:"fas fa-archive"}),disabled:n.length===0,children:"L\u01B0u T\u1EA5t C\u1EA3 Nh\xE2n V\u1EADt Ra File JSON"}),(0,B.jsx)(H,{onClick:l,variant:"outline",fullWidth:!0,leftIcon:(0,B.jsx)("i",{className:"fas fa-book-medical"}),disabled:n.length===0,children:"L\u01B0u T\u1EA5t C\u1EA3 NV & L\u1ECBch S\u1EED Chat"})]})]}),(0,B.jsxs)("section",{className:"space-y-4 p-3.5 border rounded-lg bg-blue-50 dark:bg-blue-900/40 border-blue-200 dark:border-blue-600",children:[(0,B.jsxs)("h3",{className:"text-base font-semibold text-text-light dark:text-text-dark flex items-center",children:[(0,B.jsx)("i",{className:"fas fa-upload mr-2 text-blue-500 dark:text-blue-400"}),"Nh\u1EADp/T\u1EA3i Nh\xE2n V\u1EADt"]}),(0,B.jsxs)("div",{className:"space-y-2.5",children:[(0,B.jsx)("h4",{className:"text-sm font-medium text-text-light dark:text-text-dark",children:"Nh\u1EADp t\u1EEB File JSON:"}),(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{htmlFor:"char-manage-file-upload",className:"sr-only",children:"Ch\u1ECDn file nh\xE2n v\u1EADt JSON"}),(0,B.jsx)("input",{id:"char-manage-file-upload",type:"file",accept:".json",onChange:M,className:`block w-full text-xs file:mr-2 file:py-1.5 file:px-2.5 file:rounded-md file:border-0 file:text-xs file:font-semibold
                                            file:bg-blue-100 file:text-blue-700 dark:file:bg-blue-700 dark:file:text-blue-100 
                                            hover:file:bg-blue-200 dark:hover:file:bg-blue-600 focus:outline-none`})]}),E&&(0,B.jsxs)("p",{className:"text-xs text-slate-600 dark:text-slate-300",children:["\u0110\xE3 ch\u1ECDn: ",(0,B.jsx)("span",{className:"font-medium",children:E.name})]}),(0,B.jsx)(H,{onClick:K,disabled:!E||A,isLoading:A,fullWidth:!0,variant:"primary",leftIcon:(0,B.jsx)("i",{className:"fas fa-file-import"}),children:A?"\u0110ang Nh\u1EADp...":"Nh\u1EADp T\u1EEB File \u0110\xE3 Ch\u1ECDn"})]}),S.length>0&&(0,B.jsxs)("div",{className:"space-y-2.5 pt-3 border-t border-blue-300 dark:border-blue-700",children:[(0,B.jsx)("h4",{className:"text-sm font-medium text-text-light dark:text-text-dark",children:"Ho\u1EB7c t\u1EA3i t\u1EEB Slot \u0111\xE3 l\u01B0u trong tr\xECnh duy\u1EC7t:"}),(0,B.jsx)("div",{className:"max-h-36 overflow-y-auto space-y-1.5 custom-scrollbar pr-1.5",children:S.map(V=>(0,B.jsxs)("div",{className:"p-2 border rounded-md bg-white dark:bg-slate-700/50 border-slate-300 dark:border-slate-600 flex justify-between items-center text-xs",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("strong",{className:"block text-slate-800 dark:text-slate-100 truncate",title:V.characterName,children:V.characterName}),(0,B.jsxs)("span",{className:"text-slate-500 dark:text-slate-400",children:["L\u01B0u: ",new Date(V.savedAt).toLocaleDateString("vi-VN")]})]}),(0,B.jsx)(H,{size:"xs",variant:"outline",onClick:()=>d(V.key),className:"!py-1 !px-2",leftIcon:(0,B.jsx)("i",{className:"fas fa-download"}),children:"T\u1EA3i Slot"})]},V.key))})]}),S.length===0&&(0,B.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic pt-3 border-t border-blue-300 dark:border-blue-700",children:"Kh\xF4ng c\xF3 slot n\xE0o \u0111\u01B0\u1EE3c l\u01B0u trong tr\xECnh duy\u1EC7t."})]})]}),g==="groups"&&(0,B.jsxs)("div",{className:"animate-fadeIn p-2",children:[(0,B.jsxs)("h3",{className:"text-base font-semibold text-text-light dark:text-text-dark mb-3",children:["Qu\u1EA3n L\xFD Nh\xF3m Hi\u1EC7n C\xF3 (",r.length,")"]}),r.length===0?(0,B.jsx)("p",{className:"text-sm text-center text-slate-500 dark:text-slate-400 italic py-4",children:"Ch\u01B0a c\xF3 nh\xF3m n\xE0o \u0111\u01B0\u1EE3c t\u1EA1o."}):(0,B.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2 custom-scrollbar pr-2",children:r.map(V=>(0,B.jsxs)("div",{className:"p-2.5 border rounded-lg flex justify-between items-center bg-white dark:bg-slate-800/60 border-slate-200 dark:border-slate-700 shadow-sm",children:[(0,B.jsxs)("div",{className:"flex items-center gap-3 flex-grow min-w-0",children:[(0,B.jsx)(Fe,{name:V.name,avatarUrl:V.avatarUrl,className:"w-9 h-9 rounded-full flex-shrink-0"}),(0,B.jsxs)("div",{className:"min-w-0",children:[(0,B.jsx)("span",{className:"font-medium text-sm text-slate-800 dark:text-slate-100 truncate block",children:V.name}),(0,B.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[V.memberIds.length," th\xE0nh vi\xEAn"]})]})]}),(0,B.jsxs)("div",{className:"flex-shrink-0 ml-2 flex items-center gap-1.5",children:[(0,B.jsx)(H,{size:"xs",variant:"secondary",onClick:()=>p(V),title:`Ch\u1EC9nh s\u1EEDa nh\xF3m ${V.name}`,children:(0,B.jsx)("i",{className:"fas fa-edit"})}),(0,B.jsx)(H,{size:"xs",variant:"danger",onClick:()=>Ke(V),title:`X\xF3a nh\xF3m ${V.name}`,children:(0,B.jsx)("i",{className:"fas fa-trash-alt"})})]})]},V.id))})]})]}),(0,B.jsx)("div",{className:"mt-6 flex justify-end",children:(0,B.jsx)(H,{variant:"outline",onClick:e,size:"lg",className:"px-6",children:"\u0110\xF3ng"})})]})},Bv=iP;var Ms=P(Ce(),1);var Me=P(z(),1),oP=({isOpen:t,onClose:e})=>{let{settings:n,setSettings:r}=we(),{addToast:i}=Ge(),[o,l]=(0,Ms.useState)(n.chatBackground||Ji),[u,c]=(0,Ms.useState)(null);(0,Ms.useEffect)(()=>{if(t){let C=n.chatBackground||Ji;l(C),c(null)}},[t,n.chatBackground]);let d=(C,T)=>{l(y=>({...y,[C]:T}))},f=C=>{if(C.target.files&&C.target.files[0]){let T=C.target.files[0],y=new FileReader;y.onloadend=()=>{let v=y.result;l(x=>({...x,imageUrl:v})),c(v)},y.readAsDataURL(T)}else c(null)},m=C=>{let T=C.target.value;d("imageUrl",T),c(null)},p=()=>{r(C=>({...C,chatBackground:o})),i({message:"\u0110\xE3 c\u1EADp nh\u1EADt c\xE0i \u0111\u1EB7t h\xECnh n\u1EC1n chat.",type:"success"}),e()},h=()=>{let C={...Ji,enabled:o.enabled};l(C),c(null),i({message:"\u0110\xE3 x\xF3a c\xE0i \u0111\u1EB7t h\xECnh n\u1EC1n v\xE0 tr\u1EDF v\u1EC1 m\u1EB7c \u0111\u1ECBnh.",type:"info"})},g=u||o.imageUrl;return t?(0,Me.jsxs)(Te,{isOpen:!0,onClose:e,title:"T\xF9y Ch\u1EC9nh H\xECnh N\u1EC1n Chat",size:"lg",children:[" ",(0,Me.jsxs)("div",{className:"space-y-6 pt-2",children:[(0,Me.jsx)(jt,{label:"B\u1EADt h\xECnh n\u1EC1n t\xF9y ch\u1EC9nh cho Chat",checked:o.enabled,onChange:C=>d("enabled",C.target.checked),wrapperClass:"mb-5"}),o.enabled&&(0,Me.jsxs)("div",{className:"space-y-5 p-3.5 rounded-lg bg-slate-50 dark:bg-slate-800/40 border border-slate-200 dark:border-slate-700 animate-fadeIn",children:[g&&(0,Me.jsxs)("div",{className:"mb-3",children:[(0,Me.jsx)("label",{className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:"Xem Tr\u01B0\u1EDBc H\xECnh N\u1EC1n:"}),(0,Me.jsx)("div",{className:"w-full h-40 rounded-md border border-border-light dark:border-border-dark bg-slate-200 dark:bg-slate-700 bg-center bg-no-repeat",style:{backgroundImage:`url(${g})`,backgroundSize:o.opacity<.3||o.blur>5?"cover":"contain",filter:`blur(${o.blur}px)`,opacity:o.opacity},title:"Xem tr\u01B0\u1EDBc h\xECnh n\u1EC1n v\u1EDBi \u0111\u1ED9 m\u1EDD v\xE0 \u0111\u1ED9 trong su\u1ED1t hi\u1EC7n t\u1EA1i",children:!g&&(0,Me.jsx)("p",{className:"text-center text-xs text-slate-400 dark:text-slate-500 pt-16",children:"Ch\u01B0a c\xF3 h\xECnh \u1EA3nh"})})]}),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("label",{htmlFor:"chat-bg-file-upload",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1.5",children:"T\u1EA3i \u1EA2nh T\u1EEB M\xE1y:"}),(0,Me.jsx)("input",{id:"chat-bg-file-upload",type:"file",accept:"image/*",onChange:f,className:`block w-full text-sm text-slate-500 dark:text-slate-400
                            file:mr-4 file:py-2 file:px-3
                            file:rounded-md file:border-0
                            file:text-sm file:font-semibold
                            file:bg-primary-light/20 file:text-primary dark:file:bg-primary-dark/30 dark:file:text-primary-light
                            hover:file:bg-primary-light/30 dark:hover:file:bg-primary-dark/40
                            focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-primary dark:focus:ring-primary-dark`})]}),(0,Me.jsx)(je,{label:"Ho\u1EB7c nh\u1EADp URL H\xECnh N\u1EC1n:",value:o.imageUrl,onChange:m,placeholder:"D\xE1n URL h\xECnh \u1EA3nh t\u1EA1i \u0111\xE2y...",leftIcon:(0,Me.jsx)("i",{className:"fas fa-link text-gray-400"})}),(0,Me.jsxs)("div",{children:[(0,Me.jsxs)("label",{htmlFor:"chat-bg-blur",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1",children:["\u0110\u1ED9 M\u1EDD H\xECnh N\u1EC1n (Blur): ",o.blur,"px"]}),(0,Me.jsx)("input",{id:"chat-bg-blur",type:"range",min:"0",max:"20",step:"1",value:o.blur,onChange:C=>d("blur",parseInt(C.target.value,10)),className:"w-full h-2.5 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary dark:accent-primary-light"})]}),(0,Me.jsxs)("div",{children:[(0,Me.jsxs)("label",{htmlFor:"chat-bg-opacity",className:"block text-sm font-medium text-text-light dark:text-text-dark mb-1",children:["\u0110\u1ED9 Trong Su\u1ED1t H\xECnh N\u1EC1n (Opacity): ",Math.round(o.opacity*100),"%"]}),(0,Me.jsx)("input",{id:"chat-bg-opacity",type:"range",min:"0.1",max:"1",step:"0.05",value:o.opacity,onChange:C=>d("opacity",parseFloat(C.target.value)),className:"w-full h-2.5 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary dark:accent-primary-light"})]}),(0,Me.jsx)(H,{variant:"danger",size:"sm",onClick:h,leftIcon:(0,Me.jsx)("i",{className:"fas fa-times-circle"}),className:"mt-2",children:"X\xF3a H\xECnh N\u1EC1n v\xE0 Thi\u1EBFt L\u1EADp M\u1EB7c \u0110\u1ECBnh"})]})]}),(0,Me.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,Me.jsx)(H,{variant:"outline",onClick:e,size:"lg",children:"H\u1EE7y"}),(0,Me.jsx)(H,{onClick:p,size:"lg",variant:"primary",children:"L\u01B0u Thay \u0110\u1ED5i"})]})]}):null},Ov=oP;var Rs=P(z(),1),sP=({isOpen:t,onClose:e,imageUrl:n})=>t?(0,Rs.jsx)(Te,{isOpen:t,onClose:e,title:"",size:"xl",containerClass:"!p-0",children:(0,Rs.jsxs)("div",{className:"flex justify-center items-center w-full h-full",children:[" ",(0,Rs.jsx)("img",{src:n||ul,alt:"Xem tr\u01B0\u1EDBc \u1EA3nh",className:"max-w-full max-h-[90vh] object-contain rounded-lg",onError:i=>{i.currentTarget.src!==ul&&(i.currentTarget.src=ul)}})]})}):null,Hv=sP;var ot=P(z(),1),vo=({icon:t,label:e,onClick:n,description:r,iconClass:i})=>(0,ot.jsxs)("button",{onClick:n,className:"w-full flex items-center p-2.5 sm:p-3 bg-slate-100 dark:bg-slate-700/60 hover:bg-slate-200 dark:hover:bg-slate-600/80 rounded-lg transition-colors duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary",children:[(0,ot.jsx)("i",{className:`fas ${t} ${i||"text-primary dark:text-primary-light"} text-lg sm:text-xl w-7 sm:w-8 text-center`}),(0,ot.jsxs)("div",{className:"ml-2.5 sm:ml-3 text-left",children:[(0,ot.jsx)("span",{className:"font-semibold text-xs sm:text-sm text-text-light dark:text-text-dark",children:e}),r&&(0,ot.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:r})]}),(0,ot.jsx)("i",{className:"fas fa-chevron-right text-slate-400 dark:text-slate-500 ml-auto text-xs sm:text-sm"})]}),aP=({isOpen:t,onClose:e,openSpecificModal:n})=>{let{settings:r,nsfwSettings:i}=we(),o=i.enabled,l=r.enableMemory,u=r.enableEmotions,c=[];l&&c.push("Nh\u1EDB"),u&&c.push("C.x\xFAc");let d=c.length>0?c.join(", "):"C\u01A1 b\u1EA3n";return(0,ot.jsxs)(Te,{isOpen:t,onClose:e,title:"C\xE0i \u0110\u1EB7t \u1EE8ng D\u1EE5ng",size:"sm",children:[(0,ot.jsxs)("div",{className:"space-y-2 sm:space-y-2.5",children:[(0,ot.jsx)(vo,{icon:"fa-key",label:"Thi\u1EBFt L\u1EADp API Key",description:"Qu\u1EA3n l\xFD API Key cho Gemini.",onClick:()=>{e(),n(1)}}),(0,ot.jsx)(vo,{icon:"fa-brain",label:`T\xEDnh N\u0103ng AI (${d})`,description:"Tr\xED nh\u1EDB, c\u1EA3m x\xFAc.",onClick:()=>{e(),n(12)}}),(0,ot.jsx)(vo,{icon:o?"fa-fire-alt":"fa-shield-alt",iconClass:o?"text-red-500 dark:text-red-400":"text-green-500 dark:text-green-400",label:`Ch\u1EBF \u0110\u1ED9 NSFW ${o?"(\u0110ang B\u1EADt)":"(\u0110ang T\u1EAFt)"}`,description:"N\u1ED9i dung nh\u1EA1y c\u1EA3m.",onClick:()=>{e(),n(2)}}),(0,ot.jsx)(vo,{icon:"fa-palette",label:"Giao Di\u1EC7n & Chung",description:"Ch\u1EE7 \u0111\u1EC1, font, k\xEDch th\u01B0\u1EDBc, h\xECnh n\u1EC1n...",onClick:()=>{e(),n(3)}}),(0,ot.jsx)(vo,{icon:"fa-scroll",label:"Nh\u1EADt K\xFD Thay \u0110\u1ED5i (Changelog)",description:"Xem c\xE1c t\xEDnh n\u0103ng m\u1EDBi v\xE0 c\u1EADp nh\u1EADt.",onClick:()=>{e(),n(13)}}),(0,ot.jsx)(vo,{icon:"fa-book-reader",label:"H\u01B0\u1EDBng D\u1EABn",description:"Xem c\xE1ch s\u1EED d\u1EE5ng.",onClick:()=>{e(),n(4)}})]}),(0,ot.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ot.jsx)(H,{variant:"primary",onClick:e,size:"md",children:"\u0110\xF3ng"})})]})},zv=aP;var pn=P(Ce(),1);Xn();Xn();var Jv;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(Jv||(Jv={}));var mi=br("LocalNotifications",{web:()=>Promise.resolve().then(()=>(Yv(),Wv)).then(t=>new t.LocalNotificationsWeb)});var Hl=async()=>{if(!Gt.isNativePlatform())return console.log("Notification permissions are handled by the browser on the web."),Notification.permission==="granted"?!0:Notification.permission==="denied"?!1:await Notification.requestPermission()==="granted";try{let t=await mi.checkPermissions();return(t.display==="prompt"||t.display==="prompt-with-rationale")&&(t=await mi.requestPermissions()),t.display==="granted"}catch(t){return console.error("Error requesting notification permissions:",t),!1}};var fe=P(z(),1),pP=({isOpen:t,onClose:e,onSendTestNotification:n})=>{let{settings:r,setSettings:i}=we(),{addToast:o}=Ge(),[l,u]=(0,pn.useState)(r.enableMemory),[c,d]=(0,pn.useState)(r.enableEmotions),[f,m]=(0,pn.useState)(r.enableTimeAwareness),[p,h]=(0,pn.useState)(r.enableDateAwareness),[g,C]=(0,pn.useState)(r.allowUnlimitedGroupMembers),[T,y]=(0,pn.useState)(r.enableGroupMemory),[v,x]=(0,pn.useState)(r.aiNotifications),[S,w]=(0,pn.useState)(!1);(0,pn.useEffect)(()=>{t&&(u(r.enableMemory),d(r.enableEmotions),m(r.enableTimeAwareness),h(r.enableDateAwareness),C(r.allowUnlimitedGroupMembers),y(r.enableGroupMemory),x(r.aiNotifications),w(!1))},[t,r]);let E=async N=>{N?await Hl()?(x(G=>({...G,enabled:!0})),o({message:"\u0110\xE3 c\u1EA5p quy\u1EC1n th\xF4ng b\xE1o!",type:"success"})):o({message:"Kh\xF4ng th\u1EC3 b\u1EADt t\xEDnh n\u0103ng do quy\u1EC1n th\xF4ng b\xE1o b\u1ECB t\u1EEB ch\u1ED1i.",type:"warning"}):x(U=>({...U,enabled:!1}))},k=async()=>{if(!n){o({message:"Ch\u1EE9c n\u0103ng th\u1EED nghi\u1EC7m kh\xF4ng kh\u1EA3 d\u1EE5ng.",type:"error"});return}w(!0),await n(),w(!1)},A=()=>{i(N=>({...N,enableMemory:l,enableEmotions:c,enableTimeAwareness:f,enableDateAwareness:p,allowUnlimitedGroupMembers:g,enableGroupMemory:T,aiNotifications:v})),o({message:"\u0110\xE3 l\u01B0u c\xE0i \u0111\u1EB7t AI.",type:"success"}),e()};return(0,fe.jsxs)(Te,{isOpen:t,onClose:e,title:"C\xE0i \u0110\u1EB7t T\xEDnh N\u0103ng AI",size:"md",children:[(0,fe.jsxs)("div",{className:"space-y-5",children:[(0,fe.jsx)("div",{className:"p-3.5 rounded-lg border bg-slate-50 dark:bg-slate-800/40 border-border-light dark:border-border-dark",children:(0,fe.jsx)(jt,{id:"enable-memory-checkbox",label:"B\u1EADt Tr\xED Nh\u1EDB Cho Nh\xE2n V\u1EADt",checked:l,onChange:N=>u(N.target.checked),description:"Cho ph\xE9p AI ghi nh\u1EDB c\xE1c chi ti\u1EBFt quan tr\u1ECDng t\u1EEB cu\u1ED9c tr\xF2 chuy\u1EC7n."})}),(0,fe.jsx)("div",{className:"p-3.5 rounded-lg border bg-slate-50 dark:bg-slate-800/40 border-border-light dark:border-border-dark",children:(0,fe.jsx)(jt,{id:"enable-emotions-checkbox",label:"B\u1EADt C\u1EA3m X\xFAc \u0110\u1ED9ng Cho Nh\xE2n V\u1EADt",checked:c,onChange:N=>d(N.target.checked),description:"Cho ph\xE9p c\u1EA3m x\xFAc c\u1EE7a AI thay \u0111\u1ED5i, \u1EA3nh h\u01B0\u1EDFng \u0111\u1EBFn ph\u1EA3n h\u1ED3i."})}),(0,fe.jsx)("div",{className:"p-3.5 rounded-lg border bg-slate-50 dark:bg-slate-800/40 border-border-light dark:border-border-dark",children:(0,fe.jsx)(jt,{id:"enable-time-awareness-checkbox",label:"B\u1EADt Nh\u1EADn Th\u1EE9c Th\u1EDDi Gian (S\xE1ng/Tr\u01B0a/Chi\u1EC1u/T\u1ED1i)",checked:f,onChange:N=>m(N.target.checked),description:"Cho ph\xE9p AI ph\u1EA3n h\u1ED3i d\u1EF1a tr\xEAn th\u1EDDi gian trong ng\xE0y."})}),(0,fe.jsx)("div",{className:"p-3.5 rounded-lg border bg-slate-50 dark:bg-slate-800/40 border-border-light dark:border-border-dark",children:(0,fe.jsx)(jt,{id:"enable-date-awareness-checkbox",label:"B\u1EADt Nh\u1EADn Th\u1EE9c Ng\xE0y Th\xE1ng",checked:p,onChange:N=>h(N.target.checked),description:"Cho ph\xE9p AI nh\u1EADn bi\u1EBFt ng\xE0y/th\xE1ng/n\u0103m v\xE0 ng\xE0y trong tu\u1EA7n."})}),(0,fe.jsxs)("div",{className:"pt-4 border-t border-border-light dark:border-border-dark mt-4",children:[(0,fe.jsxs)("h4",{className:"text-md font-semibold text-text-light dark:text-text-dark mb-3",children:[(0,fe.jsx)("i",{className:"fas fa-bell mr-2 text-secondary dark:text-secondary-light"}),"Th\xF4ng B\xE1o Ch\u1EE7 \u0110\u1ED9ng"]}),(0,fe.jsxs)("div",{className:"p-3.5 rounded-lg border bg-slate-50 dark:bg-slate-800/40 border-border-light dark:border-border-dark",children:[(0,fe.jsx)(jt,{id:"enable-notifications-checkbox",label:"B\u1EADt Th\xF4ng B\xE1o Ch\u1EE7 \u0110\u1ED9ng t\u1EEB AI",checked:v.enabled,onChange:N=>E(N.target.checked),description:"Cho ph\xE9p AI g\u1EEDi tin nh\u1EAFn cho b\u1EA1n sau m\u1ED9t th\u1EDDi gian kh\xF4ng ho\u1EA1t \u0111\u1ED9ng."}),v.enabled&&(0,fe.jsxs)("div",{className:"mt-4 pl-2 space-y-3 animate-fadeIn border-l-2 border-primary/50 ml-2",children:[(0,fe.jsx)(mo,{label:"T\u1EA7n su\u1EA5t g\u1EEDi (kho\u1EA3ng):",options:[{value:3,label:"3 gi\u1EDD"},{value:6,label:"6 gi\u1EDD"},{value:12,label:"12 gi\u1EDD"},{value:24,label:"24 gi\u1EDD"}],value:v.interval.toString(),onChange:N=>x(U=>({...U,interval:parseInt(N.target.value,10)})),wrapperClass:"!mb-0 pl-4"}),(0,fe.jsx)("div",{className:"pl-4 pt-2",children:(0,fe.jsx)(H,{type:"button",variant:"outline",size:"sm",onClick:k,isLoading:S,disabled:!n||S,leftIcon:(0,fe.jsx)("i",{className:"fas fa-paper-plane"}),children:"G\u1EEDi Th\xF4ng B\xE1o Th\u1EED Ngay"})})]})]})]}),(0,fe.jsxs)("div",{className:"pt-4 border-t border-border-light dark:border-border-dark mt-4",children:[(0,fe.jsxs)("h4",{className:"text-md font-semibold text-text-light dark:text-text-dark mb-3",children:[(0,fe.jsx)("i",{className:"fas fa-users-cog mr-2 text-secondary dark:text-secondary-light"}),"C\xE0i \u0110\u1EB7t Chat Nh\xF3m"]}),(0,fe.jsxs)("div",{className:"space-y-3",children:[(0,fe.jsx)("div",{className:"p-3.5 rounded-lg border bg-slate-50 dark:bg-slate-800/40 border-border-light dark:border-border-dark",children:(0,fe.jsx)(jt,{id:"enable-unlimited-groups-checkbox",label:"Cho ph\xE9p nh\xF3m kh\xF4ng gi\u1EDBi h\u1EA1n th\xE0nh vi\xEAn",checked:g,onChange:N=>C(N.target.checked),description:"B\u1ECF gi\u1EDBi h\u1EA1n 5 th\xE0nh vi\xEAn cho m\u1ED9t nh\xF3m chat. L\u01B0u \xFD: Nh\xF3m qu\xE1 \u0111\xF4ng c\xF3 th\u1EC3 l\xE0m gi\u1EA3m hi\u1EC7u su\u1EA5t v\xE0 t\u0103ng chi ph\xED API."})}),(0,fe.jsx)("div",{className:"p-3.5 rounded-lg border bg-slate-50 dark:bg-slate-800/40 border-border-light dark:border-border-dark",children:(0,fe.jsx)(jt,{id:"enable-group-memory-checkbox",label:"B\u1EADt Tr\xED Nh\u1EDB Chat 1-1 Trong Nh\xF3m",checked:T,onChange:N=>y(N.target.checked),description:"Cho ph\xE9p AI trong nh\xF3m s\u1EED d\u1EE5ng l\u1ECBch s\u1EED chat 1-1 v\u1EDBi b\u1EA1n. C\xF3 th\u1EC3 l\xE0m t\u0103ng m\u1EE9c s\u1EED d\u1EE5ng API."})})]})]}),(0,fe.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 px-1",children:"L\u01B0u \xFD: C\xE1c t\xEDnh n\u0103ng n\xE2ng cao (tr\xED nh\u1EDB, c\u1EA3m x\xFAc, th\xF4ng b\xE1o) c\xF3 th\u1EC3 s\u1EED d\u1EE5ng th\xEAm l\u1EC7nh g\u1ECDi API v\xE0 \u1EA3nh h\u01B0\u1EDFng \u0111\u1EBFn t\u1ED1c \u0111\u1ED9 ho\u1EB7c chi ph\xED."})]}),(0,fe.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,fe.jsx)(H,{variant:"ghost",onClick:e,size:"lg",children:"\u0110\xF3ng"}),(0,fe.jsx)(H,{onClick:A,size:"lg",variant:"primary",children:"L\u01B0u C\xE0i \u0110\u1EB7t AI"})]})]})},Qv=pP;var xo=t=>{let e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]},bf=[{version:"1.3.3",date:new Date().toISOString().split("T")[0],title:"N\xE2ng C\u1EA5p Avatar Nh\xE2n V\u1EADt: H\u1ED7 Tr\u1EE3 \u1EA2nh \u0110\u1ED9ng GIF!",changes:[{type:"new",description:"Th\xEAm t\xEDnh n\u0103ng s\u1EED d\u1EE5ng \u1EA3nh \u0111\u1EA1i di\u1EC7n \u0111\u1ED9ng (GIF) cho nh\xE2n v\u1EADt, l\xE0m cho nh\xE2n v\u1EADt tr\u1EDF n\xEAn s\u1ED1ng \u0111\u1ED9ng h\u01A1n.",details:["Ng\u01B0\u1EDDi d\xF9ng c\xF3 th\u1EC3 cung c\u1EA5p URL tr\u1EF1c ti\u1EBFp \u0111\u1EBFn file GIF cho \u1EA3nh \u0111\u1EA1i di\u1EC7n \u0111\u1ED9ng.","H\u1ED7 tr\u1EE3 t\u1EA3i l\xEAn file GIF t\u1EEB thi\u1EBFt b\u1ECB c\u1EE7a ng\u01B0\u1EDDi d\xF9ng \u0111\u1EC3 l\xE0m \u1EA3nh \u0111\u1EA1i di\u1EC7n \u0111\u1ED9ng.","\u1EA2nh GIF s\u1EBD \u0111\u01B0\u1EE3c \u01B0u ti\xEAn hi\u1EC3n th\u1ECB. N\u1EBFu kh\xF4ng c\xF3 GIF, \u1EE9ng d\u1EE5ng s\u1EBD hi\u1EC3n th\u1ECB \u1EA3nh t\u0129nh ho\u1EB7c ch\u1EEF c\xE1i \u0111\u1EA7u c\u1EE7a t\xEAn nh\xE2n v\u1EADt nh\u01B0 tr\u01B0\u1EDBc.","B\u1ED5 sung n\xFAt 'X\xF3a GIF' trong m\xE0n h\xECnh t\u1EA1o/s\u1EEDa nh\xE2n v\u1EADt \u0111\u1EC3 d\u1EC5 d\xE0ng g\u1EE1 b\u1ECF \u1EA3nh \u0111\u1ED9ng."]},{type:"info",description:"Vi\u1EC7c hi\u1EC3n th\u1ECB \u1EA3nh GIF c\xF3 th\u1EC3 ti\xEAu t\u1ED1n th\xEAm m\u1ED9t ch\xFAt t\xE0i nguy\xEAn h\u1EC7 th\u1ED1ng so v\u1EDBi \u1EA3nh t\u0129nh, t\xF9y thu\u1ED9c v\xE0o k\xEDch th\u01B0\u1EDBc v\xE0 \u0111\u1ED9 ph\u1EE9c t\u1EA1p c\u1EE7a GIF."}]},{version:"1.3.2",date:xo(1),title:"G\u1ED9p Ch\u1EE9c N\u0103ng Qu\u1EA3n L\xFD & Nh\u1EADp Nh\xE2n V\u1EADt",changes:[{type:"improved",description:"H\u1EE3p nh\u1EA5t hai c\u1EEDa s\u1ED5 'Qu\u1EA3n L\xFD Nh\xE2n V\u1EADt' v\xE0 'Nh\u1EADp Nh\xE2n V\u1EADt' th\xE0nh m\u1ED9t c\u1EEDa s\u1ED5 duy nh\u1EA5t: 'Qu\u1EA3n L\xFD & Nh\u1EADp/Xu\u1EA5t Nh\xE2n V\u1EADt'.",details:["Giao di\u1EC7n m\u1EDBi g\u1ED9p t\u1EA5t c\u1EA3 c\xE1c ch\u1EE9c n\u0103ng li\xEAn quan \u0111\u1EBFn qu\u1EA3n l\xFD, l\u01B0u tr\u1EEF (v\xE0o slot ho\u1EB7c file JSON), v\xE0 nh\u1EADp/t\u1EA3i nh\xE2n v\u1EADt v\xE0o m\u1ED9t n\u01A1i.","C\u1EA3i thi\u1EC7n tr\u1EA3i nghi\u1EC7m ng\u01B0\u1EDDi d\xF9ng b\u1EB1ng c\xE1ch gi\u1EA3m s\u1ED1 l\u01B0\u1EE3ng c\u1EEDa s\u1ED5 b\u1EADt l\xEAn v\xE0 t\u1EADp trung c\xE1c thao t\xE1c t\u01B0\u01A1ng t\u1EF1."]},{type:"info",description:"N\xFAt 'Qu\u1EA3n L\xFD Nh\xE2n V\u1EADt' v\xE0 'Nh\u1EADp Nh\xE2n V\u1EADt' \u1EDF m\xE0n h\xECnh H\u1ED3 S\u01A1 gi\u1EDD \u0111\xE2y s\u1EBD c\xF9ng m\u1EDF ra c\u1EEDa s\u1ED5 h\u1EE3p nh\u1EA5t m\u1EDBi n\xE0y."}]},{version:"1.3.1",date:xo(2),title:"T\xEDch H\u1EE3p S\xE2u & Nh\u1EADp Li\u1EC7u Ti\u1EC7n L\u1EE3i",changes:[{type:"new",description:"H\u1ED7 tr\u1EE3 m\u1EDF file .json tr\u1EF1c ti\u1EBFp b\u1EB1ng \u1EE9ng d\u1EE5ng tr\xEAn Android \u0111\u1EC3 nh\u1EADp nh\xE2n v\u1EADt.",details:["Khi b\u1EA1n nh\u1EA5n v\xE0o m\u1ED9t file .json tr\xEAn thi\u1EBFt b\u1ECB Android, h\u1EC7 th\u1ED1ng s\u1EBD g\u1EE3i \xFD m\u1EDF b\u1EB1ng \u1EE9ng d\u1EE5ng n\xE0y.","\u1EE8ng d\u1EE5ng s\u1EBD t\u1EF1 \u0111\u1ED9ng \u0111\u1ECDc file v\xE0 nh\u1EADp d\u1EEF li\u1EC7u nh\xE2n v\u1EADt (bao g\u1ED3m c\u1EA3 l\u1ECBch s\u1EED chat n\u1EBFu c\xF3 trong file)."]},{type:"improved",description:"C\u1EA3i thi\u1EC7n lu\u1ED3ng x\u1EED l\xFD nh\u1EADp file JSON khi m\u1EDF t\u1EEB b\xEAn ngo\xE0i.",details:["Toast message r\xF5 r\xE0ng h\u01A1n trong qu\xE1 tr\xECnh x\u1EED l\xFD file.","T\u1EF1 \u0111\u1ED9ng \u0111i\u1EC1u h\u01B0\u1EDBng v\u1EC1 m\xE0n h\xECnh ch\xEDnh v\xE0 b\u1ECF ch\u1ECDn nh\xE2n v\u1EADt \u0111ang ho\u1EA1t \u0111\u1ED9ng (n\u1EBFu c\xF3) sau khi nh\u1EADp file \u0111\u1EC3 ng\u01B0\u1EDDi d\xF9ng d\u1EC5 d\xE0ng th\u1EA5y danh s\xE1ch nh\xE2n v\u1EADt \u0111\u01B0\u1EE3c c\u1EADp nh\u1EADt."]}]},{version:"1.3.0",date:xo(3),title:"N\xE2ng C\u1EA5p Giao Di\u1EC7n & Th\xEAm Nh\u1EADt K\xFD Thay \u0110\u1ED5i!",changes:[{type:"new",description:"Th\xEAm m\u1EE5c Nh\u1EADt K\xFD Thay \u0110\u1ED5i (Changelog) v\xE0o C\xE0i \u0110\u1EB7t \u1EE8ng D\u1EE5ng.",details:["B\u1EA1n \u0111ang xem n\xF3 \u0111\xE2y! Gi\u1EDD \u0111\xE2y b\u1EA1n c\xF3 th\u1EC3 theo d\xF5i c\xE1c t\xEDnh n\u0103ng m\u1EDBi v\xE0 c\u1EA3i ti\u1EBFn c\u1EE7a \u1EE9ng d\u1EE5ng."]},{type:"improved",description:"Thi\u1EBFt k\u1EBF l\u1EA1i menu C\xE0i \u0110\u1EB7t \u1EE8ng D\u1EE5ng ch\xEDnh.",details:["Giao di\u1EC7n tr\u1EF1c quan h\u01A1n, d\u1EC5 d\xE0ng truy c\u1EADp c\xE1c m\u1EE5c c\xE0i \u0111\u1EB7t con."]}]},{version:"1.2.0",date:xo(6),title:"AI Th\xF4ng Minh H\u01A1n",changes:[{type:"new",description:"N\xE2ng c\u1EA5p b\u1ED9 n\xE3o AI: Tr\xED Nh\u1EDB & C\u1EA3m X\xFAc \u0110\u1ED9ng.",details:["AI gi\u1EDD \u0111\xE2y c\xF3 th\u1EC3 ghi nh\u1EDB c\xE1c chi ti\u1EBFt quan tr\u1ECDng t\u1EEB cu\u1ED9c tr\xF2 chuy\u1EC7n (n\u1EBFu b\u1EADt Tr\xED Nh\u1EDB).","C\u1EA3m x\xFAc c\u1EE7a AI c\xF3 th\u1EC3 thay \u0111\u1ED5i d\u1EF1a tr\xEAn t\u01B0\u01A1ng t\xE1c, \u1EA3nh h\u01B0\u1EDFng \u0111\u1EBFn l\u1EDDi n\xF3i (n\u1EBFu b\u1EADt C\u1EA3m X\xFAc \u0110\u1ED9ng).","B\u1EADt/t\u1EAFt c\xE1c t\xEDnh n\u0103ng n\xE0y trong C\xE0i \u0110\u1EB7t AI."]},{type:"improved",description:"C\u1EA3i thi\u1EC7n giao di\u1EC7n qu\u1EA3n l\xFD API Key, h\u1ED7 tr\u1EE3 nhi\u1EC1u key Gemini Custom."}]},{version:"1.1.0",date:xo(10),title:"C\xE1 Nh\xE2n H\xF3a & Qu\u1EA3n L\xFD M\u1EA1nh M\u1EBD",changes:[{type:"new",description:"H\u1ED3 S\u01A1 Ng\u01B0\u1EDDi D\xF9ng: T\xF9y ch\u1EC9nh t\xEAn v\xE0 \u1EA3nh \u0111\u1EA1i di\u1EC7n c\u1EE7a B\u1EA0N.",details:["AI s\u1EBD nh\u1EADn bi\u1EBFt v\xE0 x\u01B0ng h\xF4 v\u1EDBi b\u1EA1n b\u1EB1ng t\xEAn b\u1EA1n \u0111\xE3 \u0111\u1EB7t."]},{type:"new",description:"Qu\u1EA3n l\xFD nh\xE2n v\u1EADt n\xE2ng cao: L\u01B0u/T\u1EA3i nh\xE2n v\u1EADt v\xE0o c\xE1c 'slot' trong tr\xECnh duy\u1EC7t.",details:["D\u1EC5 d\xE0ng chuy\u1EC3n \u0111\u1ED5i ho\u1EB7c sao l\u01B0u c\xE1c nh\xE2n v\u1EADt y\xEAu th\xEDch m\xE0 kh\xF4ng c\u1EA7n file JSON."]},{type:"new",description:"Nh\u1EADp/Xu\u1EA5t nhi\u1EC1u nh\xE2n v\u1EADt c\xF9ng l\xFAc t\u1EEB m\u1ED9t file JSON duy nh\u1EA5t (bao g\u1ED3m c\u1EA3 t\xF9y ch\u1ECDn xu\u1EA5t k\xE8m l\u1ECBch s\u1EED chat)."},{type:"improved",description:"C\u1EA3i ti\u1EBFn giao di\u1EC7n ch\u1ECDn v\xE0 t\u1EA1o nh\xE2n v\u1EADt."}]},{version:"1.0.0",date:xo(17),title:"Phi\xEAn B\u1EA3n \u0110\u1EA7u Ti\xEAn Ra M\u1EAFt!",changes:[{type:"new",description:"Character AI Simulator ch\xEDnh th\u1EE9c ra m\u1EAFt!"},{type:"new",description:"T\u1EA1o v\xE0 tr\xF2 chuy\u1EC7n v\u1EDBi nh\xE2n v\u1EADt AI s\u1EED d\u1EE5ng Google Gemini."},{type:"new",description:"H\u1ED7 tr\u1EE3 t\xF9y ch\u1EC9nh t\xEAn, \u1EA3nh, t\xEDnh c\xE1ch, l\u1EDDi ch\xE0o, gi\u1ECDng \u0111i\u1EC7u, v\xE0 v\xED d\u1EE5 h\u1ED9i tho\u1EA1i."},{type:"new",description:"L\u01B0u v\xE0 t\u1EA3i nh\xE2n v\u1EADt t\u1EEB file JSON."},{type:"new",description:"Giao di\u1EC7n S\xE1ng/T\u1ED1i v\xE0 t\xF9y ch\u1EC9nh k\xEDch th\u01B0\u1EDBc ch\u1EEF."},{type:"new",description:"T\xEDch h\u1EE3p t\xEDnh n\u0103ng T\xECm ki\u1EBFm Web cho AI."},{type:"new",description:"D\xE1n h\xECnh \u1EA3nh tr\u1EF1c ti\u1EBFp v\xE0o khung chat."}]}];var Qe=P(z(),1),hP=({isOpen:t,onClose:e})=>{let n=i=>{switch(i){case"new":return{icon:"fas fa-sparkles",color:"text-green-500 dark:text-green-400",label:"M\u1EDAI"};case"improved":return{icon:"fas fa-arrow-alt-circle-up",color:"text-blue-500 dark:text-blue-400",label:"C.TI\u1EBEN"};case"fixed":return{icon:"fas fa-wrench",color:"text-orange-500 dark:text-orange-400",label:"S\u1EECA L\u1ED6I"};case"info":return{icon:"fas fa-info-circle",color:"text-purple-500 dark:text-purple-400",label:"T.TIN"};default:return{icon:"fas fa-star",color:"text-slate-500 dark:text-slate-400",label:"KH\xC1C"}}},r=i=>new Date(i).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"});return(0,Qe.jsxs)(Te,{isOpen:t,onClose:e,title:`Nh\u1EADt K\xFD Thay \u0110\u1ED5i - ${xs}`,size:"lg",children:[(0,Qe.jsx)("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto custom-scrollbar pr-2 -mr-2",children:bf.length===0?(0,Qe.jsx)("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"Ch\u01B0a c\xF3 th\xF4ng tin c\u1EADp nh\u1EADt n\xE0o \u0111\u01B0\u1EE3c ghi nh\u1EADn."}):bf.map((i,o)=>(0,Qe.jsxs)("section",{className:`p-4 rounded-lg shadow-subtle ${o===0?"bg-primary/5 dark:bg-primary-dark/10 border border-primary/30 dark:border-primary-dark/40":"bg-slate-50 dark:bg-slate-800/60"}`,children:[(0,Qe.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2 pb-2 border-b border-border-light dark:border-border-dark",children:[(0,Qe.jsxs)("h3",{className:`text-xl font-semibold ${o===0?"text-primary dark:text-primary-light":"text-text-light dark:text-text-dark"}`,children:["Phi\xEAn b\u1EA3n ",i.version]}),(0,Qe.jsx)("span",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 mt-1 sm:mt-0",children:r(i.date)})]}),i.title&&(0,Qe.jsx)("p",{className:"text-md font-medium text-slate-700 dark:text-slate-300 mb-3 italic",children:i.title}),(0,Qe.jsx)("ul",{className:"space-y-2.5",children:i.changes.map((l,u)=>{let c=n(l.type);return(0,Qe.jsxs)("li",{className:"flex items-start text-sm",children:[(0,Qe.jsxs)("span",{className:`flex-shrink-0 mr-2.5 mt-0.5 w-16 text-xs font-semibold ${c.color} bg-opacity-10 px-1.5 py-0.5 rounded-full text-center border ${c.color.replace("text-","border-")}`,title:c.label,children:[(0,Qe.jsx)("i",{className:`${c.icon} mr-1`}),c.label]}),(0,Qe.jsxs)("div",{className:"flex-grow",children:[(0,Qe.jsx)("span",{className:"text-text-light dark:text-text-dark",children:l.description}),l.details&&l.details.length>0&&(0,Qe.jsx)("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-0.5 text-xs text-slate-500 dark:text-slate-400",children:l.details.map((d,f)=>(0,Qe.jsx)("li",{children:d},f))})]})]},u)})})]},o))}),(0,Qe.jsx)("div",{className:"mt-8 flex justify-end",children:(0,Qe.jsx)(H,{onClick:e,size:"lg",variant:"primary",children:"\u0110\xF3ng"})})]})},Zv=hP;var zl=P(Ce(),1);var ze=P(z(),1),gP=({isOpen:t,onClose:e})=>{let{settings:n,setSettings:r}=we(),{addToast:i}=Ge(),[o,l]=(0,zl.useState)(n.customThemeColors);(0,zl.useEffect)(()=>{t&&l(n.customThemeColors)},[t,n.customThemeColors]);let u=(d,f)=>{l(m=>({...m,[d]:f}))},c=()=>{r(d=>({...d,customThemeColors:o,themePalette:"custom"})),i({message:"\u0110\xE3 l\u01B0u b\u1EA3ng m\xE0u t\xF9y ch\u1EC9nh c\u1EE7a b\u1EA1n!",type:"success"}),e()};return(0,ze.jsxs)(Te,{isOpen:t,onClose:e,title:"T\xF9y Ch\u1EC9nh B\u1EA3ng M\xE0u",size:"sm",children:[(0,ze.jsxs)("div",{className:"space-y-5 p-2",children:[(0,ze.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Ch\u1ECDn m\xE0u s\u1EAFc ch\xEDnh v\xE0 ph\u1EE5 cho giao di\u1EC7n. C\xE1c s\u1EAFc th\xE1i s\xE1ng/t\u1ED1i s\u1EBD \u0111\u01B0\u1EE3c t\u1EF1 \u0111\u1ED9ng t\u1EA1o ra."}),(0,ze.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ze.jsx)("label",{htmlFor:"primary-color-picker",className:"text-sm font-medium text-text-light dark:text-text-dark flex-shrink-0",children:"M\xE0u Ch\xEDnh (Primary):"}),(0,ze.jsx)("input",{id:"primary-color-picker",type:"color",value:o.primary,onChange:d=>u("primary",d.target.value),className:"w-16 h-10 p-1 bg-transparent border border-border-light dark:border-border-dark rounded-md cursor-pointer"}),(0,ze.jsx)("span",{className:"font-mono text-sm text-slate-700 dark:text-slate-200 p-2 rounded-md bg-slate-100 dark:bg-slate-700",children:o.primary})]}),(0,ze.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ze.jsx)("label",{htmlFor:"secondary-color-picker",className:"text-sm font-medium text-text-light dark:text-text-dark flex-shrink-0",children:"M\xE0u Ph\u1EE5 (Secondary):"}),(0,ze.jsx)("input",{id:"secondary-color-picker",type:"color",value:o.secondary,onChange:d=>u("secondary",d.target.value),className:"w-16 h-10 p-1 bg-transparent border border-border-light dark:border-border-dark rounded-md cursor-pointer"}),(0,ze.jsx)("span",{className:"font-mono text-sm text-slate-700 dark:text-slate-200 p-2 rounded-md bg-slate-100 dark:bg-slate-700",children:o.secondary})]}),(0,ze.jsxs)("div",{children:[(0,ze.jsx)("h4",{className:"text-sm font-medium text-text-light dark:text-text-dark mb-2",children:"Xem tr\u01B0\u1EDBc:"}),(0,ze.jsxs)("div",{className:"p-4 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark space-y-3",children:[(0,ze.jsx)(H,{style:{backgroundColor:o.primary},children:"N\xFAt Primary"}),(0,ze.jsx)(H,{style:{backgroundColor:o.secondary},children:"N\xFAt Secondary"}),(0,ze.jsxs)("p",{children:["\u0110\xE2y l\xE0 m\u1ED9t \u0111o\u1EA1n v\u0103n b\u1EA3n v\u1EDBi m\u1ED9t ",(0,ze.jsx)("a",{href:"#",onClick:d=>d.preventDefault(),style:{color:o.primary},className:"font-semibold hover:underline",children:"li\xEAn k\u1EBFt m\xE0u Primary"}),"."]})]})]})]}),(0,ze.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,ze.jsx)(H,{variant:"outline",onClick:e,size:"lg",children:"H\u1EE7y"}),(0,ze.jsx)(H,{onClick:c,size:"lg",style:{backgroundColor:o.primary,color:"white"},children:"L\u01B0u M\xE0u"})]})]})},Xv=gP;var To=P(Ce(),1),jn=P(z(),1),yP=To.default.memo(({toast:t,onClose:e})=>{let[n,r]=(0,To.useState)(!1);(0,To.useEffect)(()=>{let f=setTimeout(()=>r(!0),50);return()=>clearTimeout(f)},[]);let i=()=>{r(!1),setTimeout(e,350)},o="bg-info-bgLight dark:bg-info-bgDark",l="text-info-textLight dark:text-info-textDark",u="border-info-borderLight dark:border-info-borderDark",c="text-info-DEFAULT dark:text-info-light";switch(t.type){case"success":o="bg-success-bgLight dark:bg-success-bgDark",l="text-success-textLight dark:text-success-textDark",u="border-success-borderLight dark:border-success-borderDark",c="text-success-DEFAULT dark:text-success-light";break;case"error":o="bg-error-bgLight dark:bg-error-bgDark",l="text-error-textLight dark:text-error-textDark",u="border-error-borderLight dark:border-error-borderDark",c="text-error-DEFAULT dark:text-error-light";break;case"warning":o="bg-warning-bgLight dark:bg-warning-bgDark",l="text-warning-textLight dark:text-warning-textDark",u="border-warning-borderLight dark:border-warning-borderDark",c="text-warning-DEFAULT dark:text-warning-light";break}let d=t.type==="success"?"fas fa-check-circle":t.type==="error"?"fas fa-times-circle":t.type==="warning"?"fas fa-exclamation-triangle":t.type==="info"?"fas fa-info-circle":"fas fa-bell";return(0,jn.jsxs)("div",{className:`
        p-4 rounded-xl shadow-2xl border-l-4 
        ${o} ${l} ${u}
        flex items-start space-x-3
        transform transition-all duration-300 ease-out
        ${n?"opacity-100 translate-x-0":"opacity-0 translate-x-[110%]"}
      `,role:"alert","aria-live":t.type==="error"?"assertive":"polite",children:[(0,jn.jsx)("div",{className:`flex-shrink-0 w-6 h-6 flex items-center justify-center rounded-full ${c} ${o==="bg-info-bgLight dark:bg-info-bgDark"?"":"bg-opacity-20"} mt-0.5`,children:(0,jn.jsx)("i",{className:`${t.icon||d} ${c} text-sm fa-fw`})}),(0,jn.jsx)("div",{className:"flex-1 text-sm",children:(0,jn.jsx)("p",{className:`font-semibold ${l}`,children:t.message})}),(0,jn.jsx)("button",{onClick:i,className:`ml-auto -mr-1 -mt-1 rounded-full p-1.5 hover:bg-black/10 dark:hover:bg-white/10
                   focus:outline-none focus-visible:ring-2 focus-visible:ring-current
                   transition-colors duration-150`,"aria-label":"\u0110\xF3ng th\xF4ng b\xE1o",children:(0,jn.jsx)("i",{className:`fas fa-times text-sm ${l} opacity-70 hover:opacity-100`})})]})}),jv=yP;var Ls=P(z(),1),vP=()=>{let{toasts:t,removeToast:e}=wf();return t.length===0?null:(0,Ls.jsx)("div",{className:"fixed top-5 right-5 z-[200] w-full max-w-sm sm:max-w-md space-y-3 pointer-events-none",children:t.map(n=>(0,Ls.jsxs)("div",{className:"pointer-events-auto",children:[" ",(0,Ls.jsx)(jv,{toast:n,onClose:()=>e(n.id)})]},n.id))})},e0=vP;var ql=P(Ce(),1);var Y=P(z(),1),CP=({characters:t,groups:e,onSelectCharacter:n,onSelectGroup:r,openModal:i,userProfile:o})=>{let[l,u]=(0,ql.useState)("characters"),[c,d]=(0,ql.useState)(""),[f,m]=(0,ql.useState)(!1),p=t.filter(T=>T.name.toLowerCase().includes(c.toLowerCase())),h=e.filter(T=>T.name.toLowerCase().includes(c.toLowerCase())),g=()=>{let T=new Date().getHours(),y="Ch\xE0o m\u1EEBng";return T>=5&&T<12&&(y="Ch\xE0o bu\u1ED5i s\xE1ng"),T>=12&&T<18&&(y="Ch\xE0o bu\u1ED5i chi\u1EC1u"),T>=18&&T<22&&(y="Bu\u1ED5i t\u1ED1i t\u1ED1t l\xE0nh"),(T>=22||T<5)&&(y="Khuya r\u1ED3i"),`${y}!`},C=({tabId:T,title:y,count:v})=>(0,Y.jsxs)("button",{onClick:()=>u(T),className:`w-1/2 py-3 text-sm font-semibold border-b-2 transition-all duration-200 ease-in-out flex items-center justify-center gap-2
            focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-light focus-visible:ring-offset-0
            ${l===T?"text-primary dark:text-primary-light border-primary dark:border-primary-light":"text-slate-500 dark:text-slate-400 border-transparent hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[y,(0,Y.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${l===T?"bg-primary/10 dark:bg-primary-light/10":"bg-slate-200 dark:bg-slate-700"}`,children:v})]});return(0,Y.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-slate-100 via-gray-50 to-slate-200 dark:from-slate-900 dark:via-background-dark dark:to-slate-800",children:[(0,Y.jsx)("header",{className:"p-4 shadow-sm bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm sticky top-0 z-40 h-[88px] flex items-center",children:(0,Y.jsx)("div",{className:"container mx-auto flex justify-between items-center gap-3 w-full",children:f?(0,Y.jsxs)("div",{className:"flex items-center gap-2 w-full animate-fadeIn",children:[(0,Y.jsx)(je,{id:"character-search",type:"search",placeholder:"T\xECm ki\u1EBFm nh\xE2n v\u1EADt ho\u1EB7c nh\xF3m...",value:c,onChange:T=>d(T.target.value),wrapperClass:"!mb-0 flex-grow",leftIcon:(0,Y.jsx)("i",{className:"fas fa-search text-gray-400"}),className:"!rounded-full !py-2",autoFocus:!0}),(0,Y.jsx)(H,{variant:"ghost",size:"sm",onClick:()=>{m(!1),d("")},className:"!p-2.5 !rounded-full flex-shrink-0",title:"\u0110\xF3ng t\xECm ki\u1EBFm",children:(0,Y.jsx)("i",{className:"fas fa-times text-lg"})})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"w-10 h-10 flex-shrink-0","aria-hidden":"true"}),(0,Y.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-primary-light text-center truncate",children:g()}),(0,Y.jsx)(H,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"!p-2.5 !rounded-full flex-shrink-0 w-10 h-10",title:"T\xECm ki\u1EBFm",children:(0,Y.jsx)("i",{className:"fas fa-search text-lg"})})]})})}),(0,Y.jsxs)("nav",{className:"flex sticky top-[88px] z-30 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm shadow-sm",children:[(0,Y.jsx)(C,{tabId:"characters",title:"Nh\xE2n V\u1EADt",count:p.length}),(0,Y.jsx)(C,{tabId:"groups",title:"Chat Nh\xF3m",count:h.length})]}),(0,Y.jsxs)("main",{className:"flex-grow container mx-auto p-4 sm:p-6",children:[l==="characters"&&(0,Y.jsx)(Y.Fragment,{children:t.length>0&&p.length===0?(0,Y.jsxs)("div",{className:"text-center py-10",children:[(0,Y.jsx)("i",{className:"fas fa-search-minus fa-3x text-slate-400 dark:text-slate-500 mb-4"}),(0,Y.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Kh\xF4ng t\xECm th\u1EA5y nh\xE2n v\u1EADt n\xE0o kh\u1EDBp."}),(0,Y.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"H\xE3y th\u1EED m\u1ED9t t\u1EEB kh\xF3a t\xECm ki\u1EBFm kh\xE1c."})]}):t.length===0?(0,Y.jsxs)("div",{className:"text-center py-10",children:[(0,Y.jsx)("i",{className:"fas fa-users-slash fa-3x text-slate-400 dark:text-slate-500 mb-4"}),(0,Y.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Ch\u01B0a c\xF3 nh\xE2n v\u1EADt n\xE0o \u0111\u01B0\u1EE3c t\u1EA1o."}),(0,Y.jsxs)("p",{className:"text-slate-500 dark:text-slate-400",children:["H\xE3y nh\u1EA5n n\xFAt ",(0,Y.jsx)("i",{className:"fas fa-plus-circle text-primary"})," \u1EDF thanh d\u01B0\u1EDBi c\xF9ng \u0111\u1EC3 t\u1EA1o m\u1EDBi!"]})]}):(0,Y.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:p.map(T=>(0,Y.jsxs)("div",{className:"bg-card-light dark:bg-card-dark rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col justify-between transform hover:-translate-y-1 focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 cursor-pointer",onClick:()=>n(T),onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&n(T)},role:"button",tabIndex:0,"aria-label":`Tr\xF2 chuy\u1EC7n v\u1EDBi ${T.name}`,children:[(0,Y.jsx)("div",{className:"w-full h-48 overflow-hidden bg-slate-200 dark:bg-slate-700 relative group",children:(0,Y.jsx)(Fe,{name:T.name,avatarUrl:T.avatarUrl,animatedAvatarUrl:T.animatedAvatarUrl,className:"object-cover w-full h-full",altText:`Avatar c\u1EE7a ${T.name}`})}),(0,Y.jsxs)("div",{className:"p-3 text-center flex-grow flex flex-col justify-center",children:[(0,Y.jsx)("h3",{className:"font-semibold text-md text-text-light dark:text-text-dark truncate",title:T.name,children:T.name}),T.greetingMessage&&(0,Y.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 px-1 line-clamp-2",title:T.greetingMessage,children:T.greetingMessage})]})]},T.id))})}),l==="groups"&&(0,Y.jsx)(Y.Fragment,{children:e.length>0&&h.length===0?(0,Y.jsxs)("div",{className:"text-center py-10",children:[(0,Y.jsx)("i",{className:"fas fa-search-minus fa-3x text-slate-400 dark:text-slate-500 mb-4"}),(0,Y.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Kh\xF4ng t\xECm th\u1EA5y nh\xF3m n\xE0o kh\u1EDBp."}),(0,Y.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"H\xE3y th\u1EED m\u1ED9t t\u1EEB kh\xF3a t\xECm ki\u1EBFm kh\xE1c."})]}):e.length===0?(0,Y.jsxs)("div",{className:"text-center py-10",children:[(0,Y.jsx)("i",{className:"fas fa-user-friends fa-3x text-slate-400 dark:text-slate-500 mb-4"}),(0,Y.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Ch\u01B0a c\xF3 nh\xF3m chat n\xE0o."}),(0,Y.jsx)(H,{onClick:()=>i(6),variant:"primary",size:"lg",className:"mt-4",leftIcon:(0,Y.jsx)("i",{className:"fas fa-plus"}),children:"T\u1EA1o Nh\xF3m Chat M\u1EDBi"})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"text-right mb-4",children:(0,Y.jsx)(H,{onClick:()=>i(6),variant:"primary",size:"md",leftIcon:(0,Y.jsx)("i",{className:"fas fa-plus"}),children:"T\u1EA1o Nh\xF3m Chat M\u1EDBi"})}),(0,Y.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:h.map(T=>(0,Y.jsxs)("div",{className:"bg-card-light dark:bg-card-dark rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col justify-between transform hover:-translate-y-1 focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 cursor-pointer",onClick:()=>r(T),onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&r(T)},role:"button",tabIndex:0,"aria-label":`Tr\xF2 chuy\u1EC7n v\u1EDBi nh\xF3m ${T.name}`,children:[(0,Y.jsx)("div",{className:"w-full h-48 overflow-hidden bg-slate-200 dark:bg-slate-700 relative",children:(0,Y.jsx)(Fe,{name:T.name,avatarUrl:T.avatarUrl,className:"object-cover w-full h-full",altText:`Avatar c\u1EE7a nh\xF3m ${T.name}`})}),(0,Y.jsxs)("div",{className:"p-3 text-center flex-grow flex flex-col justify-center",children:[(0,Y.jsx)("h3",{className:"font-semibold text-md text-text-light dark:text-text-dark truncate",title:T.name,children:T.name}),(0,Y.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 px-1",children:[T.memberIds.length," th\xE0nh vi\xEAn"]})]})]},T.id))})]})})]})]})},t0=CP;var Ue=P(Ce(),1);var In=P(Ce(),1);var ge=P(z(),1);function xP(t){let e=[],n=0,r=/(\*\*(.+?)\*\*)|(\*(.+?)\*)/g,i;for(;(i=r.exec(t))!==null;)i.index>n&&e.push(t.substring(n,i.index)),i[2]?e.push((0,ge.jsx)("strong",{children:i[2]},`strong-${n}-${i.index}`)):i[4]&&e.push((0,ge.jsx)("em",{className:"text-slate-500 dark:text-slate-400",children:i[4]},`italic-${n}-${i.index}`)),n=r.lastIndex;return n<t.length&&e.push(t.substring(n)),e}var TP=t=>{if(!t)return"";let e=/(https?:\/\/[^\s"<>{}|\^`\\]+)/g,n=t.split(e),r=[];for(let i=0;i<n.length;i++)i%2===0?n[i]&&r.push(...xP(n[i])):n[i]&&r.push((0,ge.jsx)("a",{href:n[i],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",onClick:o=>o.stopPropagation(),children:n[i]},`url-${i}-${n[i]}`));return r.map((i,o)=>(0,ge.jsx)(In.default.Fragment,{children:i},`frag-${o}`))},_P=({message:t,allCharacters:e,isGroupChat:n,openModal:r,onEditRequest:i,onDeleteRequest:o})=>{let{userProfile:l}=we(),{addToast:u}=Ge(),c=t.sender==="user",[d,f]=(0,In.useState)(!1),[m,p]=(0,In.useState)(!1),h=(0,In.useRef)(null),g=(0,In.useRef)(null),C=c?null:e.find(k=>k.id===t.senderCharacterId)||e.find(k=>k.id===t.chatId),T=l.avatarUrl,y=l.name||$e,v="w-6 h-6 sm:w-7 sm:h-7 rounded-full object-cover shadow-sm bg-slate-300 dark:bg-slate-600 flex-shrink-0";(0,In.useEffect)(()=>{let k=A=>{h.current&&!h.current.contains(A.target)&&f(!1),g.current&&!g.current.contains(A.target)&&p(!1)};return(d||m)&&document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[d,m]);let x=async()=>{if(!t.content){u({message:"Kh\xF4ng c\xF3 n\u1ED9i dung \u0111\u1EC3 sao ch\xE9p.",type:"warning"});return}try{await navigator.clipboard.writeText(t.content),u({message:"\u0110\xE3 sao ch\xE9p n\u1ED9i dung tin nh\u1EAFn!",type:"success"})}catch(k){console.error("Failed to copy text: ",k),u({message:"L\u1ED7i khi sao ch\xE9p tin nh\u1EAFn.",type:"error"})}p(!1)},S=c?y:C?.name||"AI",w=c?T:C?.avatarUrl,E=c?void 0:C?.animatedAvatarUrl;return(0,ge.jsxs)("div",{className:`group flex flex-col ${c?"items-end":"items-start"} relative`,children:[n&&!c&&C&&(0,ge.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 ml-10 mb-0.5",children:C.name}),(0,ge.jsxs)("div",{className:`flex items-end space-x-3 ${c?"flex-row-reverse space-x-reverse":"justify-start"} w-full`,children:[(0,ge.jsx)("button",{type:"button",onClick:()=>r&&(E||w)&&r(10,{imageUrl:E||w}),disabled:!(E||w),className:"focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1 rounded-full self-start","aria-label":`Xem \u1EA3nh \u0111\u1EA1i di\u1EC7n c\u1EE7a ${S}`,title:E||w?`Xem \u1EA3nh \u0111\u1EA1i di\u1EC7n c\u1EE7a ${S}`:S,children:(0,ge.jsx)(Fe,{name:S,avatarUrl:w,animatedAvatarUrl:E,className:`${v} ${w?"cursor-pointer hover:opacity-80 transition-opacity":""}`})}),(0,ge.jsxs)("div",{className:`relative flex items-center ${c?"flex-row":"flex-row-reverse"}`,children:[(0,ge.jsxs)("div",{className:"relative",children:[(0,ge.jsx)("button",{onClick:()=>c?f(k=>!k):p(k=>!k),className:"p-1.5 rounded-full text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-150 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary mx-1 self-center","aria-label":"T\xF9y ch\u1ECDn tin nh\u1EAFn",children:(0,ge.jsx)("i",{className:"fas fa-ellipsis-h text-sm"})}),c&&d&&(0,ge.jsxs)("div",{ref:h,className:"absolute z-10 w-36 bg-white dark:bg-slate-700 rounded-md shadow-lg py-1 border border-border-light dark:border-border-dark",style:{top:"-8px",right:"calc(100% + 4px)"},children:[(0,ge.jsxs)("button",{onClick:()=>{i(t.id),f(!1)},className:"block w-full text-left px-3 py-1.5 text-xs text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[(0,ge.jsx)("i",{className:"fas fa-pencil-alt w-3 text-center"}),"S\u1EEDa"]}),(0,ge.jsxs)("button",{onClick:()=>{o(t.id),f(!1)},className:"block w-full text-left px-3 py-1.5 text-xs text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-800/50 transition-colors flex items-center gap-2",children:[(0,ge.jsx)("i",{className:"fas fa-trash-alt w-3 text-center"}),"X\xF3a"]})]}),!c&&m&&(0,ge.jsx)("div",{ref:g,className:"absolute z-10 w-40 bg-white dark:bg-slate-700 rounded-md shadow-lg py-1 border border-border-light dark:border-border-dark",style:{top:"-8px",left:"calc(100% + 4px)"},children:(0,ge.jsxs)("button",{onClick:x,className:"block w-full text-left px-3 py-1.5 text-xs text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[(0,ge.jsx)("i",{className:"fas fa-copy w-3 text-center"}),"Sao ch\xE9p n\u1ED9i dung"]})})]}),(0,ge.jsxs)("div",{className:`px-3 py-2 sm:px-3.5 sm:py-2.5 rounded-2xl max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md xl:max-w-lg text-sm sm:text-base leading-relaxed shadow-sm ${c?"bg-primary text-white dark:bg-primary-dark dark:text-gray-100 rounded-br-lg":"bg-white text-slate-800 dark:bg-slate-700 dark:text-slate-100 rounded-bl-lg"}`,children:[t.imagePart&&(0,ge.jsx)("div",{className:"mb-1.5 max-w-xs max-h-48 overflow-hidden rounded-md",children:(0,ge.jsx)("img",{src:t.imagePart.dataUrl,alt:"H\xECnh \u1EA3nh \u0111\xEDnh k\xE8m",className:"w-full h-full object-contain cursor-pointer",onClick:()=>r&&r(10,{imageUrl:t.imagePart?.dataUrl})})}),t.content&&(0,ge.jsx)("div",{className:"whitespace-pre-wrap break-words",children:TP(t.content)}),!c&&t.groundingAttributions&&t.groundingAttributions.length>0&&(0,ge.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-300 dark:border-slate-600 text-xs",children:[(0,ge.jsx)("h4",{className:"font-semibold text-slate-600 dark:text-slate-300 mb-1 opacity-80",children:"Ngu\u1ED3n tham kh\u1EA3o:"}),(0,ge.jsx)("ul",{className:"space-y-0.5",children:t.groundingAttributions.map((k,A)=>k.web&&k.web.uri&&(0,ge.jsx)("li",{className:"truncate",children:(0,ge.jsxs)("a",{href:k.web.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-400 dark:text-blue-400 dark:hover:text-blue-300 hover:underline inline-flex items-center gap-1",title:k.web.uri,onClick:N=>N.stopPropagation(),children:[(0,ge.jsx)("i",{className:"fas fa-link fa-xs opacity-70"}),k.web.title||k.web.uri]})},`grounding-${t.id}-${A}`))})]})]})]})]})]})},n0=_P;var er=P(z(),1),SP=({characterName:t,avatarUrl:e,animatedAvatarUrl:n})=>(0,er.jsxs)("div",{className:"flex items-end space-x-3 justify-start animate-fadeIn",role:"status","aria-label":`${t} \u0111ang so\u1EA1n tin`,children:[(0,er.jsx)(Fe,{name:t,avatarUrl:e,animatedAvatarUrl:n,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-full object-cover shadow-sm bg-slate-300 dark:bg-slate-600 flex-shrink-0",altText:`Avatar c\u1EE7a ${t}`}),(0,er.jsx)("div",{className:"px-3.5 py-2.5 rounded-2xl rounded-bl-lg bg-slate-200 dark:bg-slate-600 shadow-sm",children:(0,er.jsxs)("div",{className:"flex space-x-1.5 items-center h-[1em]",children:[" ",(0,er.jsx)("span",{className:"typing-dot h-2 w-2 bg-slate-500 dark:bg-slate-400 rounded-full"}),(0,er.jsx)("span",{className:"typing-dot h-2 w-2 bg-slate-500 dark:bg-slate-400 rounded-full"}),(0,er.jsx)("span",{className:"typing-dot h-2 w-2 bg-slate-500 dark:bg-slate-400 rounded-full"})]})})]}),r0=SP;var W=P(z(),1),wP=({character:t,group:e,allCharacters:n,messages:r,setMessages:i,onBack:o,openModal:l,nsfwSettings:u,userProfile:c})=>{let{settings:d,setSettings:f}=we(),{addToast:m}=Ge(),[p,h]=(0,Ue.useState)(""),[g,C]=(0,Ue.useState)(!1),[T,y]=(0,Ue.useState)(!1),v=(0,Ue.useRef)(null),x=(0,Ue.useRef)(null),S=(0,Ue.useRef)(null),[w,E]=(0,Ue.useState)(null),[k,A]=(0,Ue.useState)(null),[N,U]=(0,Ue.useState)("Neutral"),[G,le]=(0,Ue.useState)(!1),[Ne,Ke]=(0,Ue.useState)(!1),me=(0,Ue.useRef)(null),M=!!e,K=M?e:t;if(!K)return o(),null;let ie=K.id;(0,Ue.useEffect)(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[r,w,g]),(0,Ue.useEffect)(()=>{x.current?.focus(),U("Neutral")},[t,e]),(0,Ue.useEffect)(()=>{if(!Ne)return;let _=D=>{me.current&&!me.current.contains(D.target)&&Ke(!1)};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[Ne]),(0,Ue.useEffect)(()=>{if(t&&r.length===0&&t.greetingMessage&&!g){let _={id:`ai-greeting-${t.id}-${Date.now()}`,chatId:t.id,sender:"ai",content:t.greetingMessage,timestamp:new Date().toISOString()};i([_])}},[t,r,i,g]);let oe=(0,Ue.useCallback)(async _=>{let D=typeof _=="string"?_:p.trim();if(!D&&!k||g||T||G||!K)return;C(!0);let I={id:`user-${Date.now()}`,chatId:ie,sender:"user",content:D,timestamp:new Date().toISOString(),...k&&{imagePart:k}};i(X=>[...X,I]),typeof _!="string"&&h("");let b=k;E(null),A(null);try{if(M&&e){let X=n.filter($=>e.memberIds.includes($.id)),ae=(await yv(d,e,X,[...r,I],D,u,c,b,I.timestamp)).map($=>({id:`ai-group-${$.characterId}-${Date.now()}-${Math.random()}`,chatId:e.id,sender:"ai",senderCharacterId:$.characterId,content:$.response,timestamp:new Date().toISOString()}));i($=>[...$,...ae])}else if(t){le(!0);let X=[];if(d.enableMemory)try{X=await pv(d,t,c,r,I)}catch(Ae){console.error("Error extracting memories:",Ae),m({message:"L\u1ED7i khi AI c\u1ED1 g\u1EAFng ghi nh\u1EDB chi ti\u1EBFt.",type:"warning"})}le(!1);let j=[...r,I].map(Ae=>({...Ae,content:Ae.sender==="user"&&u.enabled?bs(Ae.content):Ae.content})),ae=await gv(d,t,j,D,u,c,b,!1,N,X,I.timestamp),$={id:`ai-${Date.now()}`,chatId:t.id,sender:"ai",content:ae.text,timestamp:new Date().toISOString(),groundingAttributions:ae.groundingAttributions};if(i(Ae=>[...Ae,$]),d.enableEmotions){le(!0);try{let Ae=await hv(d,t,c,[...r,I,$]);Ae&&U(Ae)}catch(Ae){console.error("Error determining emotion:",Ae)}finally{le(!1)}}}}catch(X){console.error("Error getting AI response:",X);let j=`L\u1ED7i t\u1EEB AI: ${X.message||"Kh\xF4ng th\u1EC3 nh\u1EADn ph\u1EA3n h\u1ED3i."}`,ae=String(X.message||X).toLowerCase();(ae.includes("api key")||ae.includes("billing")||ae.includes("quota")||ae.includes("permission denied"))&&(j="L\u1ED7i API Key: Key kh\xF4ng h\u1EE3p l\u1EC7, h\u1EBFt h\u1EA1n, ho\u1EB7c c\xF3 v\u1EA5n \u0111\u1EC1 thanh to\xE1n. Vui l\xF2ng ki\u1EC3m tra c\xE0i \u0111\u1EB7t API Key v\xE0 th\u1EED l\u1EA1i.",d.apiProvider==="geminiCustom"&&f($=>({...$,apiKeyStatus:"invalid"}))),m({message:j,type:"error",duration:1e4})}finally{C(!1),le(!1),x.current?.focus()}},[p,k,g,T,G,K,r,i,d,u,m,c,f,N,n,M,e,t,ie]),Se=(0,Ue.useCallback)(async()=>{if(!(g||T||G||!t)){y(!0),m({message:"AI \u0111ang ngh\u0129 g\u1EE3i \xFD tin nh\u1EAFn...",type:"info",duration:3e3});try{let _=await _v(d,t,r,c);h(_),m({message:"G\u1EE3i \xFD \u0111\xE3 \u0111\u01B0\u1EE3c \u0111i\u1EC1n v\xE0o \xF4 nh\u1EADp li\u1EC7u!",type:"success"})}catch(_){console.error("Error in suggestion flow:",_),m({message:`L\u1ED7i g\u1EE3i \xFD: ${_.message||"Kh\xF4ng th\u1EC3 t\u1EA1o g\u1EE3i \xFD."}`,type:"error"})}finally{y(!1),x.current?.focus()}}},[t,r,d,m,g,T,c,G]),nn=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),oe())},pi=()=>{window.confirm(`B\u1EA1n c\xF3 ch\u1EAFc mu\u1ED1n x\xF3a to\xE0n b\u1ED9 l\u1ECBch s\u1EED tr\xF2 chuy\u1EC7n v\u1EDBi ${K.name} kh\xF4ng?`)&&(i([]),M||U("Neutral"),m({message:`\u0110\xE3 x\xF3a l\u1ECBch s\u1EED chat v\u1EDBi ${K.name}.`,type:"info"}))},wo=()=>{M?l(6,e):l(5,t)},hi=()=>{f(_=>{let D=!_.enableWebSearch;return m({message:`T\xECm ki\u1EBFm tr\xEAn web ${D?"\u0111\xE3 b\u1EADt":"\u0111\xE3 t\u1EAFt"}.`,type:"info"}),{..._,enableWebSearch:D}})},Wl=_=>{let D=_.clipboardData?.items;if(D){for(let I of D)if(I.type.indexOf("image")!==-1){let b=I.getAsFile();if(b){let X=new FileReader;X.onload=j=>{j.target?.result&&typeof j.target.result=="string"&&(E(j.target.result),A({dataUrl:j.target.result,mimeType:b.type}),m({message:"\u0110\xE3 d\xE1n h\xECnh \u1EA3nh.",type:"info"}))},X.readAsDataURL(b),_.preventDefault();return}}}},Yl=()=>{E(null),A(null)},Ql=(0,Ue.useCallback)(_=>{let D=r.findIndex($=>$.id===_);if(D===-1||r[D].sender!=="user")return;let I=r[D];h(I.content),I.imagePart?(E(I.imagePart.dataUrl),A({dataUrl:I.imagePart.dataUrl,mimeType:I.imagePart.mimeType})):(E(null),A(null));let b=[_],X=r.findIndex($=>$.id===_);if(r.filter($=>$.sender==="user").pop()?.id===_&&X+1<r.length)for(let $=X+1;$<r.length&&r[$].sender==="ai";$++)b.push(r[$].id);let ae=b.length>1;i($=>$.filter(Ae=>!b.includes(Ae.id))),m({message:"N\u1ED9i dung tin nh\u1EAFn \u0111\xE3 \u0111\u01B0\u1EE3c \u0111\u01B0a v\xE0o \xF4 nh\u1EADp. H\xE3y s\u1EEDa v\xE0 g\u1EEDi l\u1EA1i.",type:"info"}),x.current?.focus(),g&&ae&&(C(!1),le(!1))},[r,i,h,m,g]),ko=(0,Ue.useCallback)(_=>{i(D=>D.filter(I=>I.id!==_)),m({message:"\u0110\xE3 x\xF3a tin nh\u1EAFn.",type:"success"})},[i,m]),Vs=()=>{S.current?.click()},bn=_=>{if(_.target.files&&_.target.files[0]){let D=_.target.files[0],I=new FileReader;I.onload=b=>{b.target?.result&&typeof b.target.result=="string"&&(E(b.target.result),A({dataUrl:b.target.result,mimeType:D.type}),m({message:"\u0110\xE3 ch\u1ECDn h\xECnh \u1EA3nh.",type:"info"}))},I.readAsDataURL(D),_.target.value=""}},[et,Pn]=(0,Ue.useState)(!1),gi=d.chatBackground,$s=gi?.imageUrl?.trim();return(0,W.jsxs)("div",{className:"flex flex-col h-screen relative",children:[gi?.enabled&&$s&&(0,W.jsx)("div",{style:{backgroundImage:`url(${$s})`,filter:`blur(${gi.blur||0}px)`,opacity:gi.opacity||1},className:"absolute inset-0 w-full h-full bg-cover bg-center z-0 pointer-events-none","aria-hidden":"true"}),(0,W.jsxs)("header",{className:"flex-shrink-0 bg-white dark:bg-slate-800 shadow-md p-3 sm:p-4 flex items-center justify-between relative z-[2]",children:[(0,W.jsxs)("div",{className:"flex items-center min-w-0",children:[(0,W.jsx)(H,{variant:"ghost",size:"sm",onClick:o,className:"mr-2 p-2 rounded-full",children:(0,W.jsx)("i",{className:"fas fa-arrow-left text-lg"})}),(0,W.jsx)("button",{type:"button",onClick:()=>l(10,{imageUrl:M?e?.avatarUrl:t?.animatedAvatarUrl||t?.avatarUrl}),className:"focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1 rounded-full","aria-label":`Xem \u1EA3nh \u0111\u1EA1i di\u1EC7n c\u1EE7a ${K.name}`,title:`Xem \u1EA3nh \u0111\u1EA1i di\u1EC7n c\u1EE7a ${K.name}`,children:(0,W.jsx)(Fe,{name:K.name,avatarUrl:K.avatarUrl,animatedAvatarUrl:M?void 0:t?.animatedAvatarUrl,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full mr-3 object-cover flex-shrink-0 bg-slate-300 dark:bg-slate-600 cursor-pointer hover:opacity-80 transition-opacity"})}),(0,W.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,W.jsx)("h2",{className:"text-md sm:text-lg font-semibold text-text-light dark:text-text-dark truncate",children:K.name}),M&&(0,W.jsxs)("div",{className:"relative",ref:me,children:[(0,W.jsxs)("button",{type:"button",className:"text-xs text-slate-500 dark:text-slate-400 cursor-pointer hover:underline focus:outline-none focus:ring-1 focus:ring-primary rounded",onClick:()=>Ke(_=>!_),"aria-haspopup":"true","aria-expanded":Ne,children:[e?.memberIds.length," th\xE0nh vi\xEAn"]}),Ne&&(0,W.jsxs)("div",{className:"absolute z-30 top-full left-0 mt-2 w-max max-w-xs bg-card-light dark:bg-card-dark rounded-lg shadow-xl p-3 border border-border-light dark:border-border-dark animate-fadeIn",role:"tooltip",children:[(0,W.jsx)("h4",{className:"font-bold mb-2 text-sm text-text-light dark:text-text-dark border-b border-border-light dark:border-border-dark pb-1.5",children:"Th\xE0nh vi\xEAn nh\xF3m:"}),e?.memberIds&&e.memberIds.length>0?(0,W.jsx)("ul",{className:"space-y-1.5 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:e.memberIds.map(_=>{let D=n.find(I=>I.id===_);return(0,W.jsxs)("li",{className:"text-sm text-text-light dark:text-text-dark flex items-center gap-2",children:[(0,W.jsx)(Fe,{name:D?.name||"?",avatarUrl:D?.avatarUrl,animatedAvatarUrl:D?.animatedAvatarUrl,className:"w-5 h-5 rounded-full"}),(0,W.jsx)("span",{children:D?.name||"Nh\xE2n v\u1EADt kh\xF4ng x\xE1c \u0111\u1ECBnh"})]},_)})}):(0,W.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 italic",children:"Kh\xF4ng c\xF3 th\xE0nh vi\xEAn n\xE0o."})]})]})]})]}),(0,W.jsxs)("div",{className:"relative",children:[(0,W.jsx)(H,{variant:"ghost",size:"sm",onClick:()=>Pn(_=>!_),className:"p-2 rounded-full",children:(0,W.jsx)("i",{className:"fas fa-ellipsis-v text-lg"})}),et&&(0,W.jsxs)("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl py-1.5 z-20 border border-border-light dark:border-border-dark",role:"menu",children:[M?(0,W.jsxs)("button",{role:"menuitem",onClick:()=>{wo(),Pn(!1)},className:"block w-full text-left px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-slate-100 dark:hover:bg-slate-600/70 transition-colors flex items-center gap-2",children:[(0,W.jsx)("i",{className:"fas fa-users-cog w-4 text-center"})," Ch\u1EC9nh S\u1EEDa Nh\xF3m"]}):(0,W.jsxs)("button",{role:"menuitem",onClick:()=>{wo(),Pn(!1)},className:"block w-full text-left px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-slate-100 dark:hover:bg-slate-600/70 transition-colors flex items-center gap-2",children:[(0,W.jsx)("i",{className:"fas fa-user-edit w-4 text-center"})," S\u1EEDa H\u1ED3 S\u01A1 Nh\xE2n V\u1EADt"]}),(0,W.jsxs)("button",{role:"menuitem",onClick:()=>{l(9),Pn(!1)},className:"block w-full text-left px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-slate-100 dark:hover:bg-slate-600/70 transition-colors flex items-center gap-2",children:[(0,W.jsx)("i",{className:"fas fa-image w-4 text-center"})," T\xF9y Ch\u1EC9nh H\xECnh N\u1EC1n Chat"]}),(0,W.jsxs)("div",{role:"menuitemcheckbox","aria-checked":d.enableWebSearch,className:"w-full px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-slate-100 dark:hover:bg-slate-600/70 transition-colors flex items-center gap-2 cursor-pointer",onClick:()=>{hi(),Pn(!1)},tabIndex:0,onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(hi(),Pn(!1))},children:[(0,W.jsx)("i",{className:`fas ${d.enableWebSearch?"fa-globe-americas":"fa-search-slash"} w-4 text-center`}),(0,W.jsx)("span",{className:"flex-grow",id:"web-search-label",children:"Cho ph\xE9p AI t\xECm ki\u1EBFm web"}),(0,W.jsx)("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-primary dark:text-primary-light rounded border-gray-300 dark:border-gray-500 focus:ring-primary dark:focus:ring-primary-light",checked:d.enableWebSearch,readOnly:!0,"aria-labelledby":"web-search-label",tabIndex:-1})]}),(0,W.jsxs)("button",{role:"menuitem",onClick:()=>{pi(),Pn(!1)},className:"block w-full text-left px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/40 transition-colors flex items-center gap-2",children:[(0,W.jsx)("i",{className:"fas fa-trash-alt w-4 text-center"})," X\xF3a L\u1ECBch S\u1EED Chat"]})]})]})]}),(0,W.jsx)("main",{className:"flex-grow overflow-y-auto p-3 sm:p-4 custom-scrollbar relative z-[1]",children:(0,W.jsxs)("div",{className:"flex flex-col h-full",children:[(0,W.jsxs)("div",{className:"space-y-3",children:[r.length===0&&!g&&(0,W.jsxs)("div",{className:"text-center text-slate-500 dark:text-slate-400 mt-10 p-4 rounded-lg bg-slate-200/50 dark:bg-slate-700/30 max-w-md mx-auto",children:[(0,W.jsx)(Fe,{name:K.name,avatarUrl:K.avatarUrl,animatedAvatarUrl:M?void 0:t?.animatedAvatarUrl,className:"w-16 h-16 rounded-full object-cover mx-auto mb-3 border-2 border-slate-300 dark:border-slate-600 bg-slate-300 dark:bg-slate-600"}),(0,W.jsxs)("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:["B\u1EAFt \u0111\u1EA7u tr\xF2 chuy\u1EC7n v\u1EDBi ",K.name,"!"]}),(0,W.jsx)("p",{className:"text-xs mt-1",children:`H\xE3y g\u1EEDi tin nh\u1EAFn \u0111\u1EA7u ti\xEAn cho ${M?"nh\xF3m":K.name}.`}),(0,W.jsxs)("p",{className:"text-xs mt-1",children:["B\u1EA1n \u0111ang chat v\u1EDBi t\u01B0 c\xE1ch l\xE0 ",(0,W.jsx)("span",{className:"font-semibold",children:c.name}),"."]}),d.enableWebSearch&&(0,W.jsxs)("p",{className:"text-xs mt-2 text-green-600 dark:text-green-400",children:[(0,W.jsx)("i",{className:"fas fa-globe-americas mr-1"}),"AI c\xF3 th\u1EC3 t\xECm ki\u1EBFm th\xF4ng tin tr\xEAn web."]})]}),r.map(_=>(0,W.jsx)(n0,{message:_,allCharacters:n,isGroupChat:M,openModal:l,onEditRequest:Ql,onDeleteRequest:ko},_.id)),g&&(0,W.jsx)("div",{className:"mt-3",children:(0,W.jsx)(r0,{characterName:M?"AI":t.name,avatarUrl:M?"":t.avatarUrl,animatedAvatarUrl:M?"":t.animatedAvatarUrl})})]}),(0,W.jsx)("div",{ref:v,className:"mt-auto flex-shrink-0",style:{height:"1px"}})]})}),(0,W.jsxs)("footer",{className:"flex-shrink-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2.5 sm:p-3 relative z-[2]",children:[(0,W.jsx)("input",{type:"file",ref:S,accept:"image/*",style:{display:"none"},onChange:bn}),w&&(0,W.jsxs)("div",{className:"mb-2 p-2 border border-dashed border-primary dark:border-primary-light rounded-lg relative max-w-xs mx-auto sm:mx-0",children:[(0,W.jsx)("img",{src:w,alt:"Pasted preview",className:"max-h-24 max-w-full rounded object-contain"}),(0,W.jsx)(H,{variant:"danger",size:"xs",onClick:Yl,className:"!absolute -top-2 -right-2 !rounded-full !p-0 w-6 h-6",title:"X\xF3a \u1EA3nh \u0111\xE3 d\xE1n",children:(0,W.jsx)("i",{className:"fas fa-times"})})]}),(0,W.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,W.jsx)(H,{onClick:Se,isLoading:T,disabled:M||g||T||G,className:"!rounded-full !p-0 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-secondary hover:bg-secondary-dark dark:bg-secondary-dark dark:hover:bg-secondary text-white","aria-label":"G\u1EE3i \xFD tin nh\u1EAFn",title:M?"G\u1EE3i \xFD ch\u01B0a h\u1ED7 tr\u1EE3 trong chat nh\xF3m":"G\u1EE3i \xFD tin nh\u1EAFn",children:(0,W.jsx)("i",{className:"fas fa-lightbulb text-md sm:text-lg"})}),(0,W.jsx)(H,{onClick:Vs,disabled:g||T||G,className:"!rounded-full !p-0 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-green-500 hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-500 text-white","aria-label":"G\u1EEDi h\xECnh \u1EA3nh",title:"G\u1EEDi h\xECnh \u1EA3nh",children:(0,W.jsx)("i",{className:"fas fa-image text-md sm:text-lg"})}),(0,W.jsx)($t,{ref:x,value:p,onChange:_=>h(_.target.value),onKeyDown:nn,onPaste:Wl,placeholder:`Nh\u1EAFn tin v\u1EDBi ${K.name}...`,rows:1,className:"flex-grow !py-2.5 !px-3.5 text-sm resize-none max-h-28 custom-scrollbar !rounded-full bg-slate-100 dark:bg-slate-700 focus:ring-primary dark:focus:ring-primary-light",wrapperClass:"flex-grow !mb-0",disabled:g||T||G}),(0,W.jsx)(H,{onClick:()=>oe(),isLoading:g||G,disabled:g||T||G||!p.trim()&&!k,className:"!rounded-full !p-0 w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-primary hover:bg-primary-dark dark:bg-primary-dark dark:hover:bg-primary","aria-label":"G\u1EEDi tin nh\u1EAFn",children:(0,W.jsx)("i",{className:"fas fa-paper-plane text-white text-md sm:text-lg"})})]})]})]})},i0=wP;var Kl=P(Ce(),1);var st=P(z(),1),kP=({characters:t,groups:e,onSelectCharacter:n,onSelectGroup:r})=>{let[i,o]=(0,Kl.useState)([]);(0,Kl.useEffect)(()=>{(()=>{let c=[];[...t.map(f=>({type:"character",data:f})),...e.map(f=>({type:"group",data:f}))].forEach(f=>{try{let m=St+f.data.id,p=localStorage.getItem(m);if(p){let h=JSON.parse(p);if(h.length>0){let g=[...h].sort((C,T)=>new Date(T.timestamp).getTime()-new Date(C.timestamp).getTime())[0];c.push({entity:f,lastMessage:g,lastMessageTimestamp:g.timestamp})}}}catch(m){console.error(`Error loading chat history for ${f.data.name}:`,m)}}),c.sort((f,m)=>f.lastMessageTimestamp?m.lastMessageTimestamp?new Date(m.lastMessageTimestamp).getTime()-new Date(f.lastMessageTimestamp).getTime():-1:1),o(c)})()},[t,e]);let l=u=>{let{entity:c,lastMessage:d}=u,f=c.type==="character",m=c.data,p=d?.sender==="ai"&&!f&&d.senderCharacterId?t.find(g=>g.id===d.senderCharacterId):null,h="";return d?.sender==="user"?h="B\u1EA1n: ":p&&(h=`${p.name}: `),(0,st.jsxs)("div",{onClick:()=>f?n(m):r(m),className:"bg-card-light dark:bg-card-dark p-2.5 sm:p-3 rounded-lg shadow-subtle hover:shadow-md transition-shadow cursor-pointer flex items-center space-x-2.5 sm:space-x-3",children:[(0,st.jsx)(Fe,{name:m.name,avatarUrl:m.avatarUrl,animatedAvatarUrl:f?m.animatedAvatarUrl:void 0,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full object-cover flex-shrink-0 bg-slate-200 dark:bg-slate-700",altText:`Avatar c\u1EE7a ${m.name}`}),(0,st.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,st.jsx)("h3",{className:"font-semibold text-sm sm:text-base text-text-light dark:text-text-dark truncate",children:m.name}),d&&(0,st.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate line-clamp-1",children:[h,d.content||(d.imagePart?"[H\xECnh \u1EA3nh]":"")]}),d&&(0,st.jsx)("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-0.5",children:new Date(d.timestamp).toLocaleString("vi-VN",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(0,st.jsx)("i",{className:"fas fa-chevron-right text-slate-300 dark:text-slate-500 text-xs sm:text-sm"})]},m.id)};return(0,st.jsxs)("div",{className:"p-3 sm:p-4 flex-grow bg-slate-50 dark:bg-slate-900",children:[(0,st.jsxs)("header",{className:"mb-4 sm:mb-5",children:[(0,st.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-primary dark:text-primary-light",children:"L\u1ECBch S\u1EED Tr\xF2 Chuy\u1EC7n"}),(0,st.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Xem l\u1EA1i c\xE1c cu\u1ED9c tr\xF2 chuy\u1EC7n g\u1EA7n \u0111\xE2y."})]}),i.length===0?(0,st.jsxs)("div",{className:"text-center py-10",children:[(0,st.jsx)("i",{className:"fas fa-comment-dots fa-3x text-slate-400 dark:text-slate-500 mb-4"}),(0,st.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-md",children:"Ch\u01B0a c\xF3 l\u1ECBch s\u1EED tr\xF2 chuy\u1EC7n n\xE0o."}),(0,st.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"H\xE3y b\u1EAFt \u0111\u1EA7u m\u1ED9t cu\u1ED9c tr\xF2 chuy\u1EC7n t\u1EEB Trang Ch\u1EE7!"})]}):(0,st.jsx)("div",{className:"space-y-2.5",children:i.map(l)})]})},o0=kP;var at=P(z(),1),EP=({openModal:t})=>{let{userProfile:e}=we(),n=e.name||$e,r=e.bio||wt;return(0,at.jsxs)("div",{className:"p-4 sm:p-6 flex-grow bg-slate-50 dark:bg-slate-900",children:[(0,at.jsx)("header",{className:"mb-8 text-center",children:(0,at.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-primary dark:text-primary-light",children:"H\u1ED3 S\u01A1 C\u1EE7a B\u1EA1n"})}),(0,at.jsxs)("div",{className:"max-w-xl mx-auto bg-card-light dark:bg-card-dark p-6 sm:p-8 rounded-xl shadow-xl",children:[(0,at.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,at.jsx)(Fe,{name:n,avatarUrl:e.avatarUrl,className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover border-4 border-primary dark:border-primary-light shadow-lg mb-4",altText:"\u1EA2nh \u0111\u1EA1i di\u1EC7n c\u1EE7a b\u1EA1n"}),(0,at.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-text-light dark:text-text-dark",children:n}),(0,at.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:r})]}),(0,at.jsxs)("div",{className:"space-y-4",children:[(0,at.jsx)(H,{variant:"primary",fullWidth:!0,onClick:()=>t(8),leftIcon:(0,at.jsx)("i",{className:"fas fa-edit"}),size:"lg",children:"Ch\u1EC9nh S\u1EEDa H\u1ED3 S\u01A1"}),(0,at.jsx)(H,{variant:"outline",fullWidth:!0,onClick:()=>t(7),leftIcon:(0,at.jsx)("i",{className:"fas fa-users-cog"}),size:"lg",children:"Qu\u1EA3n L\xFD & Nh\u1EADp/Xu\u1EA5t Nh\xE2n V\u1EADt"}),(0,at.jsx)(H,{variant:"outline",fullWidth:!0,onClick:()=>t(11),leftIcon:(0,at.jsx)("i",{className:"fas fa-cogs"}),size:"lg",children:"C\xE0i \u0110\u1EB7t \u1EE8ng D\u1EE5ng"})]})]}),(0,at.jsx)("footer",{className:"mt-12 text-center text-xs text-slate-500 dark:text-slate-400",children:"Th\xF4ng tin h\u1ED3 s\u01A1 c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c l\u01B0u c\u1EE5c b\u1ED9 tr\xEAn thi\u1EBFt b\u1ECB n\xE0y."})]})},s0=EP;var tn=P(z(),1),Pf=({tab:t,icon:e,label:n,isActive:r,onClick:i})=>(0,tn.jsxs)("button",{onClick:i,className:`flex flex-col items-center justify-center flex-1 py-1.5 px-1 text-xs transition-colors duration-200 ease-in-out
                  focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1 rounded-md
                  ${r?"text-primary dark:text-primary-light":"text-slate-500 dark:text-slate-400 hover:text-primary dark:hover:text-primary-light"}`,"aria-current":r?"page":void 0,"aria-label":n,children:[(0,tn.jsx)("i",{className:`fas ${e} text-lg mb-0.5`})," ",(0,tn.jsx)("span",{children:n})," "]}),AP=({onClick:t})=>(0,tn.jsxs)("button",{onClick:t,className:`flex flex-col items-center justify-center flex-1 text-white bg-primary dark:bg-primary-dark rounded-full
                 mx-2 shadow-lg hover:bg-primary-dark dark:hover:bg-primary
                 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-light
                 transform hover:scale-105 active:scale-95 transition-transform`,"aria-label":"T\u1EA1o m\u1EDBi nh\xE2n v\u1EADt",style:{width:"52px",height:"52px"},children:[(0,tn.jsx)("i",{className:"fas fa-plus text-xl"})," "]}),NP=({activeTab:t,onTabChange:e,onCreate:n})=>(0,tn.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-border-light dark:border-border-dark shadow-top-md z-[100] flex items-center justify-around h-14",children:[" ",(0,tn.jsx)(Pf,{tab:"home",icon:"fa-home",label:"Trang Ch\u1EE7",isActive:t==="home",onClick:()=>e("home")}),(0,tn.jsx)(Pf,{tab:"history",icon:"fa-comments",label:"L\u1ECBch S\u1EED",isActive:t==="history",onClick:()=>e("history")}),(0,tn.jsx)(AP,{onClick:n}),(0,tn.jsx)(Pf,{tab:"profile",icon:"fa-user-circle",label:"H\u1ED3 S\u01A1",isActive:t==="profile",onClick:()=>e("profile")})]}),a0=NP;Xn();Xn();var Fs=br("App",{web:()=>Promise.resolve().then(()=>(u0(),l0)).then(t=>new t.AppWeb)});Xn();function IP(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return new Proxy({},{get(r,i){return(o,l,u)=>{let c=t.Capacitor.Plugins[n];if(c===void 0){u(new Error(`Capacitor plugin ${n} not found`));return}if(typeof c[i]!="function"){u(new Error(`Method ${i} not found in Capacitor plugin ${n}`));return}(async()=>{try{let d=await c[i](o);l(d)}catch(d){u(d)}})()}}})}})}function bP(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return t.cordova.plugins[n]}})}function c0(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?IP(window):window.cordova!==void 0&&bP(window))}Rf();var Us=br("Filesystem",{web:()=>Promise.resolve().then(()=>(m0(),f0)).then(t=>new t.FilesystemWeb)});c0();var ve=P(z(),1),p0=7,MP=()=>{let{settings:t,nsfwSettings:e,userProfile:n,setSettings:r}=we(),{addToast:i}=Ge(),[o,l]=(0,ne.useState)(0),[u,c]=(0,ne.useState)(null),[d,f]=(0,ne.useState)(null),[m,p]=(0,ne.useState)(null),[h,g]=(0,ne.useState)([]),[C,T]=(0,ne.useState)([]),[y,v]=(0,ne.useState)(null),[x,S]=(0,ne.useState)(null),[w,E]=(0,ne.useState)([]),[k,A]=(0,ne.useState)(!0),[N,U]=(0,ne.useState)("home"),G=(0,ne.useMemo)(()=>y?.id||x?.id,[y,x]),le=(0,ne.useRef)(G),Ne=(0,ne.useRef)(N),Ke=(0,ne.useRef)(null);(0,ne.useEffect)(()=>{le.current=G},[G]),(0,ne.useEffect)(()=>{Ne.current=N},[N]),(0,ne.useEffect)(()=>{A(!0);try{let _=localStorage.getItem(_d);if(_){let I=JSON.parse(_);I=I.filter(b=>b&&typeof b.id=="string"&&typeof b.name=="string").map(b=>({id:b.id,name:b.name,avatarUrl:b.avatarUrl||"",animatedAvatarUrl:b.animatedAvatarUrl||"",personality:b.personality||"",greetingMessage:b.greetingMessage||"",voiceTone:b.voiceTone||"",exampleResponses:b.exampleResponses||"",systemPrompt:b.systemPrompt||"",createdAt:b.createdAt||new Date().toISOString(),updatedAt:b.updatedAt||new Date().toISOString()})),g(I)}let D=localStorage.getItem(Sd);if(D){let I=JSON.parse(D);I=I.filter(b=>b&&typeof b.id=="string"&&typeof b.name=="string"&&Array.isArray(b.memberIds)).map(b=>({id:b.id,name:b.name,avatarUrl:b.avatarUrl||"",memberIds:b.memberIds,createdAt:b.createdAt||new Date().toISOString(),updatedAt:b.updatedAt||new Date().toISOString()})),T(I)}}catch(_){console.error("Error loading data from localStorage:",_),i({message:"L\u1ED7i khi t\u1EA3i d\u1EEF li\u1EC7u \u0111\xE3 l\u01B0u.",type:"error"})}finally{A(!1)}},[i]),(0,ne.useEffect)(()=>{try{localStorage.setItem(_d,JSON.stringify(h))}catch(_){_ instanceof DOMException&&(_.name==="QuotaExceededError"||_.name==="NS_ERROR_DOM_QUOTA_REACHED")?i({message:"L\u1ED7i: B\u1ED9 nh\u1EDB c\u1EE5c b\u1ED9 \u0111\u1EA7y. Kh\xF4ng th\u1EC3 l\u01B0u tr\u1EEF to\xE0n b\u1ED9 d\u1EEF li\u1EC7u nh\xE2n v\u1EADt.",type:"error",duration:1e4}):console.error("Error saving characters to localStorage:",_)}},[h,i]),(0,ne.useEffect)(()=>{try{localStorage.setItem(Sd,JSON.stringify(C))}catch(_){console.error("Error saving groups to localStorage:",_)}},[C]),(0,ne.useEffect)(()=>{if(G)try{let _=St+G,D=localStorage.getItem(_);if(D){let I=JSON.parse(D).map(b=>({...b,chatId:b.chatId||b.characterId||G}));E(I)}else E([])}catch(_){console.error(`Error loading chat history for ${G}:`,_),i({message:"L\u1ED7i t\u1EA3i l\u1ECBch s\u1EED chat.",type:"error"}),E([])}else E([])},[G,i]),(0,ne.useEffect)(()=>{if(G&&w.length>0){let _=St+G;localStorage.setItem(_,JSON.stringify(w))}else if(G&&w.length===0){let _=St+G;localStorage.removeItem(_)}},[w,G]);let me=(0,ne.useCallback)(()=>{v(null),S(null),U("home")},[]);(0,ne.useEffect)(()=>{let _;return Gt.isNativePlatform()&&(_=Fs.addListener("backButton",()=>{o!==0?et():le.current?me():Ne.current!=="home"?U("home"):Fs.exitApp()})),()=>{_&&_.remove()}},[me,o]);let M=(0,ne.useCallback)(async(_,D)=>{if(!(!t.aiNotifications.enabled||!_)){console.log(`Attempting to send proactive notification for ${_.name}...`);try{let I=await Tf(t,_,n,D),b={id:`ai-proactive-${_.id}-${Date.now()}`,chatId:_.id,sender:"ai",content:I,timestamp:new Date().toISOString()},X=St+_.id,j=[...D,b];localStorage.setItem(X,JSON.stringify(j)),await mi.schedule({notifications:[{title:_.name,body:I,id:Math.floor(Math.random()*2147483647),extra:{characterId:_.id}}]}),console.log(`Proactive notification for ${_.name} scheduled.`)}catch(I){console.error("Failed to send proactive notification:",I)}}},[t,n]),K=(0,ne.useCallback)(_=>{let D=[];return h.forEach(I=>{try{let b=St+I.id,X=localStorage.getItem(b);if(X){let j=JSON.parse(X);if(j.length>0){let ae=new Date(j[j.length-1].timestamp).getTime();D.push({character:I,history:j,lastMessageTimestamp:ae})}}}catch(b){console.warn(`Could not process history for character ${I.id}`,b)}}),D.sort((I,b)=>b.lastMessageTimestamp-I.lastMessageTimestamp).slice(0,_).map(I=>({character:I.character,history:I.history}))},[h]);(0,ne.useEffect)(()=>{let _;return Gt.isNativePlatform()&&(_=Fs.addListener("appStateChange",({isActive:D})=>{if(Ke.current&&(clearTimeout(Ke.current),Ke.current=null),!D&&t.aiNotifications.enabled){let I=K(p0);if(I.length>0){let b=Math.floor(Math.random()*I.length),X=I[b],{character:j,history:ae}=X,$=(t.aiNotifications.interval||6)*60*60*1e3;console.log(`Scheduling proactive notification for a random recent character (${j.name}) in ${t.aiNotifications.interval} hours.`),Ke.current=window.setTimeout(()=>{M(j,ae)},$)}else console.log("No recent conversations found to schedule a proactive notification.")}})),()=>{_&&_.remove(),Ke.current&&clearTimeout(Ke.current)}},[t.aiNotifications,K,M]);let ie=(0,ne.useCallback)(_=>{v(_),S(null)},[]);(0,ne.useEffect)(()=>{let _;return Gt.isNativePlatform()&&(_=mi.addListener("localNotificationActionPerformed",D=>{let I=D.notification.extra?.characterId;if(I){let b=h.find(X=>X.id===I);b&&le.current!==I&&(me(),setTimeout(()=>{ie(b)},100))}})),()=>{_&&_.remove()}},[h,me,ie]);let V=(0,ne.useCallback)(_=>{g(D=>{let I=D.findIndex(b=>b.id===_.id);if(I>-1){let b=[...D];return b[I]=_,i({message:`\u0110\xE3 c\u1EADp nh\u1EADt nh\xE2n v\u1EADt: ${_.name}`,type:"success"}),y?.id===_.id&&v(_),b}else return i({message:`\u0110\xE3 t\u1EA1o nh\xE2n v\u1EADt m\u1EDBi: ${_.name}`,type:"success"}),[...D,_]}),l(0),c(null)},[i,y]),oe=(0,ne.useCallback)(_=>{g(D=>D.filter(I=>I.id!==_)),T(D=>D.map(I=>({...I,memberIds:I.memberIds.filter(b=>b!==_)}))),localStorage.removeItem(St+_),y?.id===_&&(v(null),U("home"))},[y]),Se=(0,ne.useCallback)(_=>{T(D=>{let I=D.findIndex(b=>b.id===_.id);if(I>-1){let b=[...D];return b[I]=_,i({message:`\u0110\xE3 c\u1EADp nh\u1EADt nh\xF3m: ${_.name}`,type:"success"}),x?.id===_.id&&S(_),b}else return i({message:`\u0110\xE3 t\u1EA1o nh\xF3m m\u1EDBi: ${_.name}`,type:"success"}),[...D,_]}),l(0),f(null)},[i,x]),nn=(0,ne.useCallback)(_=>{T(D=>D.filter(I=>I.id!==_)),localStorage.removeItem(St+_),x?.id===_&&(S(null),U("home"))},[x]),pi=(0,ne.useCallback)(_=>{if(_.memberIds.length===0){i({message:"Nh\xF3m n\xE0y kh\xF4ng c\xF3 th\xE0nh vi\xEAn n\xE0o. Vui l\xF2ng th\xEAm th\xE0nh vi\xEAn \u0111\u1EC3 b\u1EAFt \u0111\u1EA7u chat.",type:"warning"});return}S(_),v(null)},[i]),wo=(0,ne.useCallback)((_,D)=>{if(!_||!D)return i({message:"T\xEAn slot kh\xF4ng h\u1EE3p l\u1EC7 ho\u1EB7c kh\xF4ng c\xF3 nh\xE2n v\u1EADt \u0111\u1EC3 l\u01B0u.",type:"error"}),!1;let I=D.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_.-]/g,"");if(!I)return i({message:"T\xEAn slot kh\xF4ng h\u1EE3p l\u1EC7 sau khi chu\u1EA9n h\xF3a.",type:"error"}),!1;let b={character:_,savedAt:new Date().toISOString()},X=_s+I;try{return localStorage.setItem(X,JSON.stringify(b)),!0}catch(j){return console.error(`Error saving character to localStorage slot "${I}":`,j),j instanceof DOMException&&(j.name==="QuotaExceededError"||j.name==="NS_ERROR_DOM_QUOTA_REACHED")?i({message:`L\u1ED7i khi l\u01B0u nh\xE2n v\u1EADt v\xE0o slot "${D}": B\u1ED9 nh\u1EDB \u0111\u1EA7y.`,type:"error",duration:8e3}):i({message:`L\u1ED7i khi l\u01B0u nh\xE2n v\u1EADt v\xE0o slot "${D}".`,type:"error",duration:8e3}),!1}},[i]),hi=(0,ne.useCallback)(_=>{let D=localStorage.getItem(_);if(D)try{let I=JSON.parse(D);if(I&&I.character){let b={...I.character,avatarUrl:I.character.avatarUrl||"",animatedAvatarUrl:I.character.animatedAvatarUrl||"",voiceTone:I.character.voiceTone||"",exampleResponses:I.character.exampleResponses||"",systemPrompt:I.character.systemPrompt||"",createdAt:I.character.createdAt||new Date().toISOString(),updatedAt:I.character.updatedAt||new Date().toISOString()};g(X=>{let j=X.findIndex($=>$.id===b.id),ae=[...X];return j!==-1?ae[j]=b:ae.push(b),ae}),i({message:`\u0110\xE3 t\u1EA3i nh\xE2n v\u1EADt "${b.name}" t\u1EEB slot.`,type:"success"})}else i({message:"D\u1EEF li\u1EC7u trong slot kh\xF4ng h\u1EE3p l\u1EC7.",type:"error"})}catch(I){i({message:"L\u1ED7i khi \u0111\u1ECDc slot.",type:"error"}),console.error(`Error parsing slot ${_}:`,I)}else i({message:"Kh\xF4ng t\xECm th\u1EA5y slot.",type:"warning"})},[i]),Wl=(0,ne.useCallback)(async _=>{if(!_){i({message:"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u nh\xE2n v\u1EADt \u0111\u1EC3 l\u01B0u.",type:"error"});return}try{let D=JSON.stringify(_,null,2),I=_.name?.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"ai_character",b=new Date().toISOString().slice(0,19).replace(/:/g,"-").replace("T","_"),X=`${I}_${b}.json`;if(Gt.isNativePlatform())await Us.writeFile({path:X,data:D,directory:_o.Documents,encoding:tr.UTF8}),i({message:`\u0110\xE3 l\u01B0u "${_.name}" v\xE0o th\u01B0 m\u1EE5c Documents!`,type:"success",icon:"fas fa-save",duration:7e3});else{let j=new Blob([D],{type:"application/json"}),ae=URL.createObjectURL(j),$=document.createElement("a");$.href=ae,$.download=X,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(ae),i({message:`\u0110\u1ECBnh ngh\u0129a nh\xE2n v\u1EADt "${_.name}" \u0111\xE3 b\u1EAFt \u0111\u1EA7u t\u1EA3i xu\u1ED1ng!`,type:"success",icon:"fas fa-file-download"})}}catch(D){console.error("Error saving character to JSON:",D),i({message:"L\u1ED7i khi l\u01B0u nh\xE2n v\u1EADt ra file JSON.",type:"error"})}},[i]),Yl=(0,ne.useCallback)(async()=>{if(h.length===0){i({message:"Kh\xF4ng c\xF3 nh\xE2n v\u1EADt n\xE0o \u0111\u1EC3 l\u01B0u.",type:"warning"});return}try{let _=h.filter(X=>X&&X.id&&X.name);if(_.length===0){i({message:"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u nh\xE2n v\u1EADt h\u1EE3p l\u1EC7 n\xE0o \u0111\u1EC3 l\u01B0u.",type:"warning"});return}let D=JSON.stringify(_,null,2),b=`all_ai_characters_${new Date().toISOString().slice(0,19).replace(/:/g,"-").replace("T","_")}.json`;if(Gt.isNativePlatform())await Us.writeFile({path:b,data:D,directory:_o.Documents,encoding:tr.UTF8}),i({message:`\u0110\xE3 l\u01B0u ${_.length} nh\xE2n v\u1EADt v\xE0o th\u01B0 m\u1EE5c Documents!`,type:"success",icon:"fas fa-archive",duration:7e3});else{let X=new Blob([D],{type:"application/json"}),j=URL.createObjectURL(X),ae=document.createElement("a");ae.href=j,ae.download=b,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),URL.revokeObjectURL(j),i({message:`T\u1EA5t c\u1EA3 ${_.length} nh\xE2n v\u1EADt h\u1EE3p l\u1EC7 \u0111\xE3 b\u1EAFt \u0111\u1EA7u t\u1EA3i xu\u1ED1ng!`,type:"success",icon:"fas fa-archive"})}}catch(_){console.error("Error saving all characters to JSON:",_),i({message:"L\u1ED7i khi l\u01B0u t\u1EA5t c\u1EA3 nh\xE2n v\u1EADt ra file JSON.",type:"error"})}},[h,i]),Ql=(0,ne.useCallback)(async()=>{if(h.length===0){i({message:"Kh\xF4ng c\xF3 nh\xE2n v\u1EADt n\xE0o \u0111\u1EC3 l\u01B0u.",type:"warning"});return}try{let _=[],D=0;for(let j of h)if(j&&j.id&&j.name){let ae=St+j.id,$=localStorage.getItem(ae),Ae=[];if($)try{Ae=JSON.parse($)}catch(Pr){console.warn(`Could not parse history for ${j.name}`,Pr)}_.push({character:j,chatHistory:Ae}),Ae.length>0&&D++}if(_.length===0){i({message:"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u nh\xE2n v\u1EADt h\u1EE3p l\u1EC7 n\xE0o \u0111\u1EC3 l\u01B0u.",type:"warning"});return}let I=JSON.stringify(_,null,2),X=`all_characters_with_history_${new Date().toISOString().slice(0,19).replace(/:/g,"-").replace("T","_")}.json`;if(Gt.isNativePlatform())await Us.writeFile({path:X,data:I,directory:_o.Documents,encoding:tr.UTF8}),i({message:`\u0110\xE3 l\u01B0u ${_.length} nh\xE2n v\u1EADt (trong \u0111\xF3 ${D} c\xF3 l\u1ECBch s\u1EED chat) v\xE0o Documents!`,type:"success",icon:"fas fa-book-medical",duration:7e3});else{let j=new Blob([I],{type:"application/json"}),ae=URL.createObjectURL(j),$=document.createElement("a");$.href=ae,$.download=X,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(ae),i({message:`To\xE0n b\u1ED9 ${_.length} nh\xE2n v\u1EADt (v\xE0 l\u1ECBch s\u1EED n\u1EBFu c\xF3) \u0111\xE3 b\u1EAFt \u0111\u1EA7u t\u1EA3i xu\u1ED1ng!`,type:"success",icon:"fas fa-book-medical"})}}catch(_){console.error("Error saving all characters and history to JSON:",_),i({message:"L\u1ED7i khi l\u01B0u t\u1EA5t c\u1EA3 nh\xE2n v\u1EADt v\xE0 l\u1ECBch s\u1EED chat ra file JSON.",type:"error"})}},[h,i]),ko=(0,ne.useCallback)(_=>{let D=0,I=0,b=0,X=0,j=$=>{if($.character&&$.character.id&&$.character.name&&$.character.personality){let Ae=h.findIndex(Eo=>Eo.id===$.character.id),Pr={...$.character,avatarUrl:$.character.avatarUrl||"",animatedAvatarUrl:$.character.animatedAvatarUrl||"",voiceTone:$.character.voiceTone||"",exampleResponses:$.character.exampleResponses||"",systemPrompt:$.character.systemPrompt||"",createdAt:$.character.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};if(V(Pr),Ae>-1?b++:X++,$.chatHistory&&Array.isArray($.chatHistory)&&$.chatHistory.length>0){let Eo=$.chatHistory.map(Zl=>({...Zl,chatId:Zl.chatId||Zl.characterId||$.character.id})),C0=St+$.character.id;localStorage.setItem(C0,JSON.stringify(Eo)),I++}D++}else console.warn("Skipping invalid character entry in StoredCharacterWithHistory array:",$)},ae=$=>{if($&&$.id&&$.name&&$.personality){let Ae=h.findIndex(Eo=>Eo.id===$.id),Pr={...$,avatarUrl:$.avatarUrl||"",animatedAvatarUrl:$.animatedAvatarUrl||"",voiceTone:$.voiceTone||"",exampleResponses:$.exampleResponses||"",systemPrompt:$.systemPrompt||"",createdAt:$.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};V(Pr),Ae>-1?b++:X++,D++}else console.warn("Skipping invalid character object in AIChatCharacter array:",$)};Array.isArray(_)?_.length>0&&_[0].character&&typeof _[0].chatHistory<"u"?(_.forEach($=>j($)),D>0?i({message:`\u0110\xE3 x\u1EED l\xFD ${D} nh\xE2n v\u1EADt (${X} m\u1EDBi, ${b} c\u1EADp nh\u1EADt). ${I} c\xF3 l\u1ECBch s\u1EED chat \u0111\u01B0\u1EE3c kh\xF4i ph\u1EE5c.`,type:"success",duration:8e3}):i({message:"Kh\xF4ng t\xECm th\u1EA5y nh\xE2n v\u1EADt h\u1EE3p l\u1EC7 n\xE0o trong file (\u0111\u1ECBnh d\u1EA1ng c\xF3 l\u1ECBch s\u1EED chat).",type:"warning"})):(_.forEach($=>ae($)),D>0?i({message:`\u0110\xE3 x\u1EED l\xFD ${D} nh\xE2n v\u1EADt (${X} m\u1EDBi, ${b} c\u1EADp nh\u1EADt) (kh\xF4ng c\xF3 l\u1ECBch s\u1EED chat t\u1EEB file n\xE0y).`,type:"success",duration:8e3}):i({message:"Kh\xF4ng t\xECm th\u1EA5y nh\xE2n v\u1EADt h\u1EE3p l\u1EC7 n\xE0o trong file (\u0111\u1ECBnh d\u1EA1ng ch\u1EC9 nh\xE2n v\u1EADt).",type:"warning"})):_&&_.character&&typeof _.chatHistory<"u"?(j(_),D>0&&i({message:`\u0110\xE3 nh\u1EADp 1 nh\xE2n v\u1EADt (${X} m\u1EDBi, ${b} c\u1EADp nh\u1EADt) ${I>0?"v\xE0 l\u1ECBch s\u1EED chat c\u1EE7a h\u1ECD":"(kh\xF4ng c\xF3 l\u1ECBch s\u1EED chat k\xE8m theo)"}.`,type:"success",duration:8e3})):_&&_.id&&_.name&&_.personality?ae(_):i({message:"C\u1EA5u tr\xFAc file JSON kh\xF4ng h\u1EE3p l\u1EC7. Ph\u1EA3i l\xE0 m\u1ED9t nh\xE2n v\u1EADt, m\u1ED9t m\u1EA3ng c\xE1c nh\xE2n v\u1EADt, ho\u1EB7c m\u1ED9t m\u1EA3ng c\xE1c nh\xE2n v\u1EADt k\xE8m l\u1ECBch s\u1EED chat.",type:"error",duration:7e3})},[V,i,h]);(0,ne.useEffect)(()=>{let _=(X,j)=>{X==="system"?document.documentElement.classList.toggle("dark",j):document.documentElement.classList.toggle("dark",X==="dark"),document.body.style.fontSize=`${t.fontSize}px`},D=window.matchMedia("(prefers-color-scheme: dark)"),I=D.matches;_(t.theme,I);let b=X=>{I=X.matches,t.theme==="system"&&_("system",I)};return D.addEventListener("change",b),()=>{D.removeEventListener("change",b)}},[t.theme,t.fontSize]);let Vs=(0,ne.useCallback)(async()=>{let _=K(p0);if(_.length===0){i({message:"Kh\xF4ng c\xF3 cu\u1ED9c tr\xF2 chuy\u1EC7n n\xE0o g\u1EA7n \u0111\xE2y \u0111\u1EC3 g\u1EEDi th\xF4ng b\xE1o.",type:"warning"});return}let D=Math.floor(Math.random()*_.length),{character:I,history:b}=_[D];if(!await Hl()){i({message:"Quy\u1EC1n th\xF4ng b\xE1o \u0111\xE3 b\u1ECB t\u1EEB ch\u1ED1i. Vui l\xF2ng b\u1EADt trong c\xE0i \u0111\u1EB7t h\u1EC7 th\u1ED1ng.",type:"error"});return}i({message:`\u0110ang g\u1EEDi th\xF4ng b\xE1o t\u1EEB ${I.name} (ch\u1ECDn ng\u1EABu nhi\xEAn t\u1EEB c\xE1c cu\u1ED9c tr\xF2 chuy\u1EC7n g\u1EA7n \u0111\xE2y)...`,type:"info"});try{let j=b;y?.id===I.id&&(j=w);let ae=await Tf(t,I,n,j),$={id:`ai-test-${I.id}-${Date.now()}`,chatId:I.id,sender:"ai",content:ae,timestamp:new Date().toISOString()};if(y?.id===I.id)E(Ae=>[...Ae,$]);else{let Ae=[...j,$],Pr=St+I.id;localStorage.setItem(Pr,JSON.stringify(Ae))}await mi.schedule({notifications:[{title:I.name,body:ae,id:Math.floor(Math.random()*2147483647),extra:{characterId:I.id}}]}),i({message:"\u0110\xE3 g\u1EEDi th\xF4ng b\xE1o. Vui l\xF2ng ki\u1EC3m tra thanh th\xF4ng b\xE1o c\u1EE7a b\u1EA1n.",type:"success"})}catch(j){console.error("Failed to send test notification:",j),i({message:`G\u1EEDi th\xF4ng b\xE1o th\u1EA5t b\u1EA1i: ${j.message||"Unknown error"}`,type:"error"})}},[K,t,n,i,y,w,E]),bn=(0,ne.useCallback)((_,D)=>{let I=D?{...D}:{};_===5?c(D):_===6&&f(D),_===12&&!I.onSendTestNotification&&(I.onSendTestNotification=Vs),p(I),l(_)},[Vs]),et=(0,ne.useCallback)(()=>{l(0),u&&c(null),d&&f(null),p(null)},[u,d]),Pn=(0,ne.useCallback)(_=>{U(_)},[]);if((0,ne.useEffect)(()=>{let _;if(Gt.isNativePlatform()){let D=async I=>{let b=I.url;if(i({message:"\u0110ang m\u1EDF file...",type:"info"}),b&&b.toLowerCase().endsWith(".json"))try{let j=(await Us.readFile({path:b,encoding:tr.UTF8})).data;if(j){let ae=JSON.parse(j);ko(ae),i({message:"\u0110\xE3 x\u1EED l\xFD xong file JSON \u0111\u01B0\u1EE3c m\u1EDF.",type:"success",duration:5e3}),me()}else throw new Error("Kh\xF4ng \u0111\u1ECDc \u0111\u01B0\u1EE3c d\u1EEF li\u1EC7u t\u1EEB file.")}catch(X){console.error("Error processing opened JSON file:",X),i({message:`L\u1ED7i khi m\u1EDF file JSON: ${X.message||"Kh\xF4ng th\u1EC3 x\u1EED l\xFD file."}`,type:"error",duration:1e4}),me()}else b&&(i({message:`Kh\xF4ng ph\u1EA3i file JSON h\u1EE3p l\u1EC7: ${b}`,type:"warning",duration:7e3}),me())};_=Fs.addListener("appUrlOpen",D)}return()=>{_&&_.remove()}},[i,ko,me]),k)return(0,ve.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-xl text-primary dark:text-primary-light bg-background-light dark:bg-background-dark p-4",children:[(0,ve.jsxs)("svg",{className:"animate-spin h-12 w-12 text-primary dark:text-primary-light mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ve.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ve.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,ve.jsx)("p",{className:"font-semibold",children:"\u0110ang t\u1EA3i \u1EE9ng d\u1EE5ng AI Chat..."}),(0,ve.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Chu\u1EA9n b\u1ECB cho nh\u1EEFng cu\u1ED9c tr\xF2 chuy\u1EC7n th\xFA v\u1ECB!"})]});let gi=()=>{switch(o){case 1:return(0,ve.jsx)(Pv,{isOpen:!0,onClose:et});case 12:return(0,ve.jsx)(Qv,{isOpen:!0,onClose:et,onSendTestNotification:m?.onSendTestNotification});case 2:return(0,ve.jsx)(Dv,{isOpen:!0,onClose:et});case 3:return(0,ve.jsx)(Fv,{isOpen:!0,onClose:et,openSpecificModal:bn});case 8:return(0,ve.jsx)(Uv,{isOpen:!0,onClose:et});case 4:return(0,ve.jsx)(Vv,{onClose:et});case 5:return(0,ve.jsx)($v,{isOpen:!0,onClose:et,onSaveCharacter:V,existingCharacter:u});case 6:return(0,ve.jsx)(Gv,{isOpen:!0,onClose:et,onSaveGroup:Se,allCharacters:h,existingGroup:d});case 7:return(0,ve.jsx)(Bv,{isOpen:!0,onClose:et,characters:h,groups:C,onSaveCharacterToJsonFile:Wl,onSaveAllCharactersToJsonFile:Yl,onSaveAllCharactersAndHistoryToJsonFile:Ql,onSaveCharacterToSlot:wo,onLoadCharacterFromFile:ko,onLoadCharacterFromSlot:hi,onDeleteCharacter:oe,onDeleteGroup:nn,onEditGroup:_=>{et(),bn(6,_)}});case 9:return(0,ve.jsx)(Ov,{isOpen:!0,onClose:et});case 10:return(0,ve.jsx)(Hv,{isOpen:!0,onClose:et,imageUrl:m?.imageUrl||""});case 11:return(0,ve.jsx)(zv,{isOpen:!0,onClose:et,openSpecificModal:bn});case 13:return(0,ve.jsx)(Zv,{isOpen:!0,onClose:et});case 14:return(0,ve.jsx)(Xv,{isOpen:!0,onClose:et});default:return null}},$s=!!G;return(0,ve.jsxs)("div",{className:"min-h-screen flex flex-col transition-colors duration-300 ease-in-out",children:[(0,ve.jsx)(e0,{}),gi(),$s?(0,ve.jsx)(i0,{character:y,group:x,allCharacters:h,messages:w,setMessages:E,onBack:me,openModal:bn,nsfwSettings:e,userProfile:n}):(0,ve.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,ve.jsxs)("main",{className:"flex-grow pb-14",children:[N==="home"&&(0,ve.jsx)(t0,{characters:h,groups:C,onSelectCharacter:ie,onSelectGroup:pi,openModal:bn,userProfile:n}),N==="history"&&(0,ve.jsx)(o0,{characters:h,groups:C,onSelectCharacter:ie,onSelectGroup:pi}),N==="profile"&&(0,ve.jsx)(s0,{openModal:bn})]}),(0,ve.jsx)(a0,{activeTab:N,onTabChange:Pn,onCreate:()=>bn(5)})]})]})},h0=MP;var So=P(z(),1),v0=document.getElementById("root");if(!v0)throw new Error("Could not find root element to mount to");var RP=y0.default.createRoot(v0);RP.render((0,So.jsx)(g0.default.StrictMode,{children:(0,So.jsx)(Ev,{children:(0,So.jsxs)(Iv,{children:[" ",(0,So.jsx)(h0,{})]})})}));
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@capacitor/core/dist/index.js:
  (*! Capacitor: https://capacitorjs.com/ - MIT License *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
